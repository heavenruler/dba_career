# TiDB Intro for DBA #5-3

## Chaos engineering for leased-line quality across multiple data centers

### Scenario

- **RTT 延遲（50 / 100 / 200 ms）**
  - TiDB、PD Leader、TiKV 之間逐層注入額外延遲觀察。

- **頻寬瓶頸（30Mbps / 10Mbps / 5Mbps）**
  - 此情境針對 TiProxy / TiDB / TiKV 進行限速，期望在低頻寬下仍維持運作。

----

### Summary

測試結果揭示了系統對於網路延遲（RTT）和頻寬（Bandwidth）瓶頸的敏感度差異，尤其在**高併發（Concurrency 1000）**情境下，對應用程式層（TiProxy/TiDB）和儲存層寫入（TiKV Write）的影響最為顯著。

TiDB 集群的效能受制於網路品質的兩大決定性因素：

*   **高延遲 (RTT)：** 主要衝擊**前端應用層**（TiProxy/TiDB）的高併發處理能力，導致 QPS 顯著下降（90% 左右）。
*   **低頻寬 (Bandwidth)：** 對**後端儲存層的寫入**操作（TiKV Write）影響甚重，使其成為系統在高併發環境下維持運作的最大瓶頸。

#### **一、 網路延遲情境下的效能差異 (RTT 6 / 50 / 100 / 200 ms)**

> TiDB、PD Leader、TiKV 之間逐層注入額外延遲觀察。

| 組件 (Component) | 基準 QPS (Default RTT) | RTT 50 ms QPS | RTT 50 ms 效能下降比例 | RTT 100 ms QPS | RTT 100 ms 效能下降比例 | RTT 200 ms QPS | RTT 200 ms 效能下降比例 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **TiProxy** | 41631.97 | 10988.21 | 73.69% | 6201.94 | 85.08% | 2608.58 | 93.73% |
| **TiDB** | 38870.17 | 15673.98 | 59.66% | 9707.17 | 75.04% | 5217.21 | 86.58% |
| **PD Leader** | 38709.68 | 33452.27 | 13.60% | 28710.88 | 25.80% | 19373.59 | 49.95% |
| **TiKV Write** | 7874.02 | 5386.00 | 31.60% | 4792.33 | 39.14% | 3024.19 | 61.58% |
| **TiKV Read** | 8086.25 | 8426.97 | -4.21% (上升) | 7915.57 | 2.11% | 8645.53 | -6.92% (上升) |

### RTT 情境分析重點 (Concurrency 1000):

1.  **前端層衝擊：** 在 RTT 200 ms 條件下，TiProxy 的 QPS 衰退最為嚴重，高達 **93.73%**。TiDB 也下降了 **86.58%**。
2.  **寫入效能：** TiKV Write 的 QPS 在 RTT 200 ms 時下降了 **61.58%**。
3.  **讀取穩定性：** TiKV Read 在所有 RTT 測試中表現穩定，效能下降極微或甚至微幅上升。

----

#### **二、 頻寬瓶頸情境下的效能差異 (30 / 10 / 5 Mbps)**

> 此情境針對 TiProxy / TiDB / TiKV 進行限速，期望在低頻寬下仍維持運作，並同步觀察 TiKV `region` pending 情況。

| 組件 (Component) | 基準 QPS (Default) | 10 Mbps QPS | 10 Mbps 效能下降比例 | 5 Mbps QPS | 5 Mbps 效能下降比例 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **TiProxy** | 41631.97 | 7733.55 | 81.42% | 6697.62 | 83.92% |
| **TiDB** | 38870.17 | 8161.27 | 79.01% | 6117.33 | 84.24% |
| **PD Leader** | 38709.68 | 8390.43 | 78.33% | 5984.32 | 84.55% |
| **TiKV Write** | 7874.02 | 6109.98 | 22.39% | 814.77 | 89.65% |
| **TiKV Read** | 8086.25 | 8042.90 | 0.54% | 7853.40 | 2.88% |

### 頻寬情境分析重點 (Concurrency 1000):

1.  **寫入瓶頸：** 當頻寬限制到 5 Mbps 時，TiKV Write 的 QPS 暴跌 **89.65%** ，遠高於其他組件在此情境下的跌幅，這使其成為高併發低頻寬下的最大瓶頸。
2.  **前端層一致性：** 在 10 Mbps 條件下，TiProxy、TiDB 和 PD Leader 的 QPS 下降比例都集中在 78% 至 81% 之間。
3.  **讀取穩定性：** TiKV Read 在 5 Mbps 頻寬限制下，效能下降僅 **2.88%** ，確認讀取操作對於頻寬的敏感度極低。

----

### 測試環境資訊 交付
```
[root@l-k8s-labroom-1 ~]# date ; tiup cluster display tidb-demo
Mon Nov 24 09:43:29 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                   Role        Host           Ports                 OS/Arch       Status  Data Dir                         Deploy Dir
--                   ----        ----           -----                 -------       ------  --------                         ----------
172.24.40.20:3000    grafana     172.24.40.20   3000                  linux/x86_64  Up      -                                /data/tidb-deploy/grafana-3000
10.160.152.21:2379   pd          10.160.152.21  2379/2380             linux/x86_64  Up|UI   /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd          10.160.152.22  2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd          10.160.152.23  2379/2380             linux/x86_64  Up|L    /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd          172.24.40.17   2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd          172.24.40.18   2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.19:2379    pd          172.24.40.19   2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090    prometheus  172.24.40.20   9090/9115/9100/12020  linux/x86_64  Up      /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
10.160.152.21:4000   tidb        10.160.152.21  4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb        10.160.152.22  4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb        10.160.152.23  4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb        172.24.40.17   4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb        172.24.40.18   4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.19:4000    tidb        172.24.40.19   4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.24:20160  tikv        10.160.152.24  20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.20:20160   tikv        172.24.40.20   20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy     10.160.152.21  6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy     10.160.152.22  6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy     10.160.152.23  6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy     172.24.40.17   6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy     172.24.40.18   6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.19:6000    tiproxy     172.24.40.19   6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 22
```

----

## **RTT 延遲（50 / 100 / 200 ms）**

- TiProxy
  - Latency ~= Default @ mysqlslap_logs_20251124_095128
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 1.03 | 1.02 | 1.03 | 97434.23 | 0.01 |
    | 50 | 1.03 | 1.03 | 1.04 | 96618.36 | 0.01 |
    | 100 | 1.05 | 1.05 | 1.06 | 95026.92 | 0.01 |
    | 250 | 1.07 | 1.07 | 1.07 | 93254.59 | 0.01 |
    | 500 | 1.11 | 1.10 | 1.13 | 89901.11 | 0.01 |
    | 1000 | 2.40 | 2.37 | 2.44 | 41631.97 | 0.02 |
  - Latency ~= 50 ms @ mysqlslap_logs_20251124_100636
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 4.50 | 4.43 | 4.63 | 22241.99 | 0.04 |
    | 50 | 4.57 | 4.44 | 4.63 | 21888.22 | 0.05 |
    | 100 | 4.57 | 4.44 | 4.64 | 21881.84 | 0.05 |
    | 250 | 4.65 | 4.64 | 4.66 | 21511.54 | 0.05 |
    | 500 | 6.03 | 5.79 | 6.22 | 16585.58 | 0.06 |
    | 1000 | 9.10 | 8.76 | 9.67 | 10988.21 | 0.09 |
  - Latency ~= 100 ms @ mysqlslap_logs_20251124_101151
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 8.50 | 8.23 | 9.03 | 11769.32 | 0.08 |
    | 50 | 8.10 | 7.84 | 8.23 | 12343.65 | 0.08 |
    | 100 | 8.24 | 8.23 | 8.24 | 12140.83 | 0.08 |
    | 250 | 8.24 | 8.24 | 8.25 | 12128.56 | 0.08 |
    | 500 | 8.91 | 8.64 | 9.14 | 11219.57 | 0.09 |
    | 1000 | 16.12 | 15.69 | 16.63 | 6201.94 | 0.16 |
  - Latency ~= 200 ms @ mysqlslap_logs_20251124_101616
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 14.37 | 13.84 | 14.63 | 6961.04 | 0.14 |
    | 50 | 14.64 | 14.63 | 14.64 | 6830.76 | 0.15 |
    | 100 | 14.64 | 14.64 | 14.65 | 6830.13 | 0.15 |
    | 250 | 14.91 | 14.65 | 15.44 | 6705.26 | 0.15 |
    | 500 | 17.72 | 17.12 | 18.16 | 5642.28 | 0.18 |
    | 1000 | 38.34 | 32.68 | 47.28 | 2608.58 | 0.38 |
- TiDB
  - Latency ~= Default @ mysqlslap_logs_20251124_103210
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 1.03 | 1.02 | 1.03 | 97434.23 | 0.01 |
    | 50 | 1.04 | 1.03 | 1.04 | 96401.03 | 0.01 |
    | 100 | 1.05 | 1.05 | 1.05 | 95268.34 | 0.01 |
    | 250 | 1.09 | 1.08 | 1.10 | 91631.03 | 0.01 |
    | 500 | 1.23 | 1.13 | 1.40 | 81543.90 | 0.01 |
    | 1000 | 2.57 | 2.47 | 2.67 | 38870.17 | 0.03 |
  - Latency ~= 50 ms @ mysqlslap_logs_20251124_103412
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 3.03 | 3.03 | 3.03 | 33003.30 | 0.03 |
    | 50 | 3.04 | 3.03 | 3.04 | 32948.93 | 0.03 |
    | 100 | 3.04 | 3.04 | 3.05 | 32869.51 | 0.03 |
    | 250 | 3.06 | 3.06 | 3.07 | 32672.62 | 0.03 |
    | 500 | 3.59 | 3.58 | 3.62 | 27824.15 | 0.04 |
    | 1000 | 6.38 | 5.89 | 7.16 | 15673.98 | 0.06 |
  - Latency ~= 100 ms @ mysqlslap_logs_20251124_103606
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 5.03 | 5.03 | 5.03 | 19868.87 | 0.05 |
    | 50 | 5.04 | 5.03 | 5.05 | 19838.65 | 0.05 |
    | 100 | 5.05 | 5.04 | 5.07 | 19787.61 | 0.05 |
    | 250 | 5.06 | 5.06 | 5.06 | 19764.15 | 0.05 |
    | 500 | 5.44 | 5.39 | 5.53 | 18382.35 | 0.05 |
    | 1000 | 10.30 | 9.95 | 10.84 | 9707.17 | 0.10 |
  - Latency ~= 200 ms @ mysqlslap_logs_20251124_103843
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 9.04 | 9.03 | 9.04 | 11067.66 | 0.09 |
    | 50 | 9.03 | 9.03 | 9.04 | 11068.48 | 0.09 |
    | 100 | 9.05 | 9.04 | 9.06 | 11055.02 | 0.09 |
    | 250 | 9.07 | 9.06 | 9.09 | 11030.22 | 0.09 |
    | 500 | 10.34 | 9.72 | 11.50 | 9674.30 | 0.10 |
    | 1000 | 19.17 | 18.85 | 19.73 | 5217.21 | 0.19 |
- PD
  - Leader
    - Latency ~= Default @ mysqlslap_logs_20251124_113907
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 1.03 | 1.03 | 1.03 | 97339.39 | 0.01 |
      | 50 | 1.04 | 1.04 | 1.04 | 96277.28 | 0.01 |
      | 100 | 1.05 | 1.05 | 1.05 | 94996.83 | 0.01 |
      | 250 | 1.09 | 1.08 | 1.09 | 91827.36 | 0.01 |
      | 500 | 1.28 | 1.14 | 1.55 | 77982.84 | 0.01 |
      | 1000 | 2.58 | 2.51 | 2.66 | 38709.68 | 0.03 |
    - Latency ~= 50 ms @ mysqlslap_logs_20251124_114022
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 1.63 | 1.42 | 1.83 | 61525.84 | 0.02 |
      | 50 | 1.83 | 1.43 | 2.23 | 54565.30 | 0.02 |
      | 100 | 1.71 | 1.64 | 1.84 | 58536.59 | 0.02 |
      | 250 | 1.67 | 1.67 | 1.68 | 59760.96 | 0.02 |
      | 500 | 1.97 | 1.88 | 2.06 | 50787.20 | 0.02 |
      | 1000 | 2.99 | 2.77 | 3.23 | 33452.27 | 0.03 |
    - Latency ~= 100 ms @ mysqlslap_logs_20251124_114142
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 1.96 | 1.82 | 2.23 | 51089.92 | 0.02 |
      | 50 | 2.36 | 1.82 | 2.63 | 42325.06 | 0.02 |
      | 100 | 1.97 | 1.83 | 2.24 | 50795.80 | 0.02 |
      | 250 | 1.98 | 1.84 | 2.26 | 50386.29 | 0.02 |
      | 500 | 2.37 | 1.90 | 2.71 | 42182.23 | 0.02 |
      | 1000 | 3.48 | 3.18 | 3.72 | 28710.88 | 0.03 |
    - Latency ~= 200 ms @ mysqlslap_logs_20251124_114313
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 3.69 | 2.62 | 4.22 | 27102.72 | 0.04 |
      | 50 | 2.63 | 2.63 | 2.63 | 38046.92 | 0.03 |
      | 100 | 3.16 | 2.63 | 3.44 | 31612.22 | 0.03 |
      | 250 | 3.45 | 2.65 | 5.04 | 29019.15 | 0.03 |
      | 500 | 3.02 | 2.67 | 3.57 | 33072.43 | 0.03 |
      | 1000 | 5.16 | 4.49 | 5.67 | 19373.59 | 0.05 |
- TiKV (調整 mysqlslap 參數 1000 times.)
  - Write
    - Latency ~= Default @ mysqlslap_logs_20251124_134753
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 0.20 | 0.19 | 0.21 | 5033.56 | 0.20 |
      | 50 | 0.06 | 0.06 | 0.06 | 16216.22 | 0.06 |
      | 100 | 0.06 | 0.05 | 0.06 | 18181.82 | 0.06 |
      | 250 | 0.06 | 0.06 | 0.07 | 16129.03 | 0.06 |
      | 500 | 0.09 | 0.08 | 0.10 | 10909.09 | 0.09 |
      | 1000 | 0.13 | 0.12 | 0.15 | 7874.02 | 0.13 |
    - Latency ~= 50 ms @ mysqlslap_logs_20251124_134839
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 5.27 | 5.27 | 5.28 | 189.69 | 5.27 |
      | 50 | 1.06 | 1.06 | 1.06 | 940.73 | 1.06 |
      | 100 | 0.57 | 0.55 | 0.59 | 1767.83 | 0.57 |
      | 250 | 0.25 | 0.24 | 0.25 | 4026.85 | 0.25 |
      | 500 | 0.22 | 0.17 | 0.32 | 4531.72 | 0.22 |
      | 1000 | 0.19 | 0.17 | 0.20 | 5386.00 | 0.19 |
    - Latency ~= 100 ms @ mysqlslap_logs_20251124_134936
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 10.28 | 10.27 | 10.29 | 97.30 | 10.28 |
      | 50 | 2.07 | 2.07 | 2.07 | 483.17 | 2.07 |
      | 100 | 1.05 | 1.04 | 1.06 | 951.78 | 1.05 |
      | 250 | 0.48 | 0.45 | 0.54 | 2076.12 | 0.48 |
      | 500 | 0.27 | 0.27 | 0.28 | 3658.54 | 0.27 |
      | 1000 | 0.21 | 0.21 | 0.21 | 4792.33 | 0.21 |
    - Latency ~= 200 ms @ mysqlslap_logs_20251124_135050
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 20.27 | 20.27 | 20.28 | 49.33 | 20.27 |
      | 50 | 4.11 | 4.06 | 4.20 | 243.23 | 4.11 |
      | 100 | 2.24 | 2.24 | 2.24 | 446.36 | 2.24 |
      | 250 | 0.85 | 0.84 | 0.85 | 1176.93 | 0.85 |
      | 500 | 0.47 | 0.46 | 0.48 | 2126.15 | 0.47 |
      | 1000 | 0.33 | 0.31 | 0.36 | 3024.19 | 0.33 |
  - Read
    - Latency ~= Default @ mysqlslap_logs_20251124_135510
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 0.06 | 0.05 | 0.06 | 17964.07 | 0.06 |
      | 50 | 0.04 | 0.03 | 0.05 | 26548.67 | 0.04 |
      | 100 | 0.04 | 0.04 | 0.05 | 24193.55 | 0.04 |
      | 250 | 0.05 | 0.05 | 0.06 | 18867.92 | 0.05 |
      | 500 | 0.08 | 0.07 | 0.08 | 12931.03 | 0.08 |
      | 1000 | 0.12 | 0.11 | 0.13 | 8086.25 | 0.12 |
    - Latency ~= 50 ms @ mysqlslap_logs_20251124_135439
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 0.05 | 0.05 | 0.05 | 19607.84 | 0.05 |
      | 50 | 0.03 | 0.03 | 0.03 | 32967.03 | 0.03 |
      | 100 | 0.03 | 0.03 | 0.03 | 30927.84 | 0.03 |
      | 250 | 0.05 | 0.05 | 0.05 | 20979.02 | 0.05 |
      | 500 | 0.07 | 0.07 | 0.08 | 13636.36 | 0.07 |
      | 1000 | 0.12 | 0.11 | 0.13 | 8426.97 | 0.12 |
    - Latency ~= 100 ms @ mysqlslap_logs_20251124_135404
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 0.05 | 0.05 | 0.06 | 18750.00 | 0.05 |
      | 50 | 0.03 | 0.03 | 0.04 | 29411.76 | 0.03 |
      | 100 | 0.04 | 0.03 | 0.04 | 28571.43 | 0.04 |
      | 250 | 0.05 | 0.05 | 0.05 | 20000.00 | 0.05 |
      | 500 | 0.08 | 0.07 | 0.09 | 12605.04 | 0.08 |
      | 1000 | 0.13 | 0.12 | 0.13 | 7915.57 | 0.13 |
    - Latency ~= 200 ms @ mysqlslap_logs_20251124_135321
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 0.05 | 0.05 | 0.05 | 19480.52 | 0.05 |
      | 50 | 0.03 | 0.03 | 0.03 | 34883.72 | 0.03 |
      | 100 | 0.04 | 0.03 | 0.04 | 27522.94 | 0.04 |
      | 250 | 0.06 | 0.05 | 0.07 | 17751.48 | 0.06 |
      | 500 | 0.07 | 0.07 | 0.07 | 14423.08 | 0.07 |
      | 1000 | 0.12 | 0.11 | 0.12 | 8645.53 | 0.12 |

----

## **頻寬瓶頸（30Mbps / 10Mbps / 5Mbps）**
- TiProxy
  - Bandwidth ~= 10Mbps @ mysqlslap_logs_20251124_141937
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 1.38 | 1.03 | 2.08 | 72586.50 | 0.01 |
    | 50 | 1.07 | 1.07 | 1.07 | 93428.84 | 0.01 |
    | 100 | 1.15 | 1.13 | 1.18 | 86956.52 | 0.01 |
    | 250 | 3.02 | 1.87 | 4.60 | 33116.24 | 0.03 |
    | 500 | 9.24 | 5.64 | 14.45 | 10820.95 | 0.09 |
    | 1000 | 12.93 | 11.10 | 16.25 | 7733.55 | 0.13 |
  - Bandwidth ~= 5Mbps @ mysqlslap_logs_20251124_142200
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 1.04 | 1.04 | 1.05 | 95877.28 | 0.01 |
    | 50 | 1.13 | 1.12 | 1.14 | 88809.95 | 0.01 |
    | 100 | 2.52 | 1.55 | 4.37 | 39672.04 | 0.03 |
    | 250 | 3.84 | 3.79 | 3.91 | 26034.89 | 0.04 |
    | 500 | 9.56 | 7.43 | 12.98 | 10458.79 | 0.10 |
    | 1000 | 14.93 | 11.62 | 19.31 | 6697.62 | 0.15 |
- TiDB
  - Bandwidth ~= 10Mbps @ mysqlslap_logs_20251124_142634
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 1.03 | 1.03 | 1.03 | 97370.98 | 0.01 |
    | 50 | 1.06 | 1.05 | 1.06 | 94696.97 | 0.01 |
    | 100 | 1.11 | 1.10 | 1.13 | 89686.10 | 0.01 |
    | 250 | 2.06 | 1.47 | 2.44 | 48449.61 | 0.02 |
    | 500 | 10.77 | 6.17 | 19.85 | 9281.89 | 0.11 |
    | 1000 | 12.25 | 9.31 | 15.19 | 8161.27 | 0.12 |
  - Bandwidth ~= 5Mbps @ mysqlslap_logs_20251124_142834
    | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
    |--------------|--------|--------|--------|----------|-------------|
    | 10 | 1.03 | 1.03 | 1.03 | 97087.38 | 0.01 |
    | 50 | 2.14 | 1.10 | 4.21 | 46692.61 | 0.02 |
    | 100 | 1.33 | 1.28 | 1.42 | 75018.75 | 0.01 |
    | 250 | 4.04 | 3.10 | 4.89 | 24738.19 | 0.04 |
    | 500 | 12.69 | 6.43 | 23.33 | 7878.57 | 0.13 |
    | 1000 | 16.35 | 15.37 | 16.86 | 6117.33 | 0.16 |
- PD
  - Leader
    - Bandwidth ~= 10Mbps @ mysqlslap_logs_20251124_143639
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 1.03 | 1.03 | 1.03 | 97307.82 | 0.01 |
      | 50 | 1.04 | 1.04 | 1.05 | 96030.73 | 0.01 |
      | 100 | 2.08 | 1.05 | 4.12 | 48146.36 | 0.02 |
      | 250 | 1.78 | 1.09 | 2.13 | 56116.72 | 0.02 |
      | 500 | 10.71 | 7.21 | 16.60 | 9336.20 | 0.11 |
      | 1000 | 11.92 | 11.01 | 13.59 | 8390.43 | 0.12 |
    - Bandwidth ~= 5Mbps @ mysqlslap_logs_20251124_143814
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 1.03 | 1.03 | 1.03 | 97276.26 | 0.01 |
      | 50 | 1.04 | 1.04 | 1.04 | 96092.25 | 0.01 |
      | 100 | 1.06 | 1.05 | 1.06 | 94607.38 | 0.01 |
      | 250 | 8.31 | 3.15 | 16.55 | 12037.56 | 0.08 |
      | 500 | 11.48 | 7.34 | 19.68 | 8712.57 | 0.11 |
      | 1000 | 16.71 | 13.64 | 22.84 | 5984.32 | 0.17 |
- TiKV
  - Write
    - Bandwidth ~= 10Mbps @ mysqlslap_logs_20251124_140416
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 0.19 | 0.19 | 0.19 | 5217.39 | 0.19 |
      | 50 | 0.17 | 0.17 | 0.17 | 6000.00 | 0.17 |
      | 100 | 0.15 | 0.15 | 0.16 | 6465.52 | 0.15 |
      | 250 | 0.14 | 0.14 | 0.14 | 7228.92 | 0.14 |
      | 500 | 0.13 | 0.12 | 0.13 | 7751.94 | 0.13 |
      | 1000 | 0.16 | 0.15 | 0.18 | 6109.98 | 0.16 |
    - Bandwidth ~= 5Mbps @ mysqlslap_logs_20251124_140511
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 0.34 | 0.33 | 0.34 | 2979.15 | 0.34 |
      | 50 | 0.33 | 0.32 | 0.33 | 3054.99 | 0.33 |
      | 100 | 0.30 | 0.30 | 0.31 | 3285.87 | 0.30 |
      | 250 | 0.27 | 0.27 | 0.27 | 3680.98 | 0.27 |
      | 500 | 0.25 | 0.25 | 0.26 | 3947.37 | 0.25 |
      | 1000 | 1.23 | 0.25 | 3.19 | 814.77 | 1.23 |
  - Read
    - Bandwidth ~= 10Mbps @ mysqlslap_logs_20251124_140242
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 0.06 | 0.06 | 0.06 | 17751.48 | 0.06 |
      | 50 | 0.03 | 0.03 | 0.03 | 32608.70 | 0.03 |
      | 100 | 0.04 | 0.03 | 0.04 | 26548.67 | 0.04 |
      | 250 | 0.05 | 0.05 | 0.07 | 18867.92 | 0.05 |
      | 500 | 0.07 | 0.06 | 0.07 | 14705.88 | 0.07 |
      | 1000 | 0.12 | 0.11 | 0.13 | 8042.90 | 0.12 |
  - Bandwidth ~= 5Mbps @ mysqlslap_logs_20251124_140555
      | concurrency | avg(s) | min(s) | max(s) | avg_qps | avg_ms/req |
      |--------------|--------|--------|--------|----------|-------------|
      | 10 | 0.05 | 0.05 | 0.06 | 18292.68 | 0.05 |
      | 50 | 0.03 | 0.03 | 0.04 | 29126.21 | 0.03 |
      | 100 | 0.04 | 0.03 | 0.04 | 25641.03 | 0.04 |
      | 250 | 0.05 | 0.04 | 0.05 | 22058.82 | 0.05 |
      | 500 | 0.07 | 0.07 | 0.08 | 13333.33 | 0.07 |
      | 1000 | 0.13 | 0.12 | 0.14 | 7853.40 | 0.13 |