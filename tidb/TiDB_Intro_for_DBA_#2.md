# TiDB Intro for DBA #2

## Benchmark Architecture

### IDC Only (passthrough TiProxy)
```
╔═══════════════════════════════╗
║         Client / App         ║
╚═══════════════════════════════╝
              │
              ▼
╔════════════════════════════════════════════╗
║  A10 Load Balancer (VIP: x.x.x.x:6000)    ║
╚════════════════════════════════════════════╝
              │
              ▼
╔════════════════════════════════════════════════════════════╗
║                        TiProxy 層                        ║
║ ┌─────────────┬─────────────┬─────────────┐              ║
║ │ tiproxy-1   │ tiproxy-2   │ tiproxy-3   │              ║
║ │172.24.40.17 │172.24.40.18 │172.24.40.19 │              ║
║ │port: 6000   │port: 6000   │port: 6000   │              ║
║ └─────────────┴─────────────┴─────────────┘              ║
╚════════════════════════════════════════════════════════════╝
              │
              ▼
╔════════════════════════════════════════════════════════════╗
║                         TiDB 層                          ║
║ ┌─────────────┬─────────────┬─────────────┐              ║
║ │ TiDB-1      │ TiDB-2      │ TiDB-3      │              ║
║ │172.24.40.17 │172.24.40.18 │172.24.40.19 │              ║
║ │port: 4000   │port: 4000   │port: 4000   │              ║
║ └─────────────┴─────────────┴─────────────┘              ║
╚════════════════════════════════════════════════════════════╝
              │    │─────────────DistSQL / KV API──────────►│
              ▼                                              ▼
╔══════════════════════════════╦══════════════════════════════╗
║       PD 層                 ║        TiKV 層               ║
║ ┌─────────────┬────────────┐║ ┌─────────────┬────────────┐ ║
║ │ PD-1        │ PD-2       │║ │ TiKV-1      │ TiKV-2     │ ║
║ │172.24.40.17 │172.24.40.18│║ │172.24.40.17 │172.24.40.18│ ║
║ │port: 2379   │port: 2379  │║ │port:20160   │port:20160  │ ║
║ └─────────────┴────────────┘║ └─────────────┴────────────┘ ║
║ PD-3: 172.24.40.19:2379     ║ TiKV-3: 172.24.40.19:20160   ║
╚══════════════════════════════╩══════════════════════════════╝
```

### IDC or GCP Only (passthrough TiDB)
```
╔═══════════════════════════════╗
║         Client / App         ║
╚═══════════════════════════════╝
              │
              ▼
╔════════════════════════════════════════════╗
║  A10 Load Balancer (VIP: x.x.x.x:4000)    ║
╚════════════════════════════════════════════╝
              │
              ▼
╔════════════════════════════════════════════════════════════╗
║                         TiDB 層                          ║
║ ┌─────────────┬─────────────┬─────────────┐              ║
║ │ TiDB-1      │ TiDB-2      │ TiDB-3      │              ║
║ │172.24.40.17 │172.24.40.18 │172.24.40.19 │              ║
║ │port: 4000   │port: 4000   │port: 4000   │              ║
║ └─────────────┴─────────────┴─────────────┘              ║
╚════════════════════════════════════════════════════════════╝
              │    │─────────────DistSQL / KV API──────────►│
              ▼                                              ▼
╔══════════════════════════════╦══════════════════════════════╗
║       PD 層                 ║        TiKV 層               ║
║ ┌─────────────┬────────────┐║ ┌─────────────┬────────────┐ ║
║ │ PD-1        │ PD-2       │║ │ TiKV-1      │ TiKV-2     │ ║
║ │172.24.40.17 │172.24.40.18│║ │172.24.40.17 │172.24.40.18│ ║
║ │port: 2379   │port: 2379  │║ │port:20160   │port:20160  │ ║
║ └─────────────┴────────────┘║ └─────────────┴────────────┘ ║
║ PD-3: 172.24.40.19:2379     ║ TiKV-3: 172.24.40.19:20160   ║
╚══════════════════════════════╩══════════════════════════════╝
```

### Benchmark architecture environment with mixed IDC and GCP
```
          ╔═══════════════════════════╗                  ╔══════════════════════════╗
          ║    Client / App (#GCP)    ║                  ║    Client / App (#IDC)   ║
          ╚═══════════════════════════╝                  ╚══════════════════════════╝
                       │                                              │
                       ▼                                              ▼
╔════════════════════════════════════════════╗ ╔════════════════════════════════════════════╗
║ GCP Load Balancer (VIP: 10.160.152.25:4000)║ ║ AIDC Load Balancer (VIP: 172.24.40.21:4000)║
║ GCP Load Balancer (VIP: 10.160.152.26:6000)║ ║ AIDC Load Balancer (VIP: 172.24.40.25:6000)║
╚════════════════════════════════════════════╝ ╚════════════════════════════════════════════╝
                       │                                              │
                       ▼                                              ▼
           ╔══════════════════════════════════════════════════════════════════════╗
           ║                        Unified TiDB Cluster                          ║
           ║                                                                      ║
           ║ ┌───────────────────────────────┐       ┌────────────────────────────┐║
           ║ │           GCP 區域            │       │          原 IDC 區域        │║
           ║ │                               │       │                            │║
           ║ │ ┌───────────────────────────┐ │       │ ┌────────────────────────┐ │║
           ║ │ │        TiProxy:6000 層    │ │       │ │       TiProxy:6000 層  │ │║
           ║ │ │ tiproxy-1 10.160.152.21   │ │       │ │ tiproxy-3 172.24.40.17 │ │║
           ║ │ │ tiproxy-2 10.160.152.22   │ │       │ │ tiproxy-4 172.24.40.18 │ │║
           ║ │ └───────────────────────────┘ │       │ │ tiproxy-5 172.24.40.19 │ │║
           ║ │             │                 │       │ └────────────────────────┘ │║
           ║ │             ▼                 │       │           │                │║
           ║ │ ┌───────────────────────────┐ │       │ ┌────────────────────────┐ │║
           ║ │ │         TiDB 層           │ │       │ │        TiDB 層         │ │║
           ║ │ │ TiDB-1 10.160.152.21:4000 │ │       │ │ TiDB-3 172.24.40.17    │ │║
           ║ │ │ TiDB-2 10.160.152.22:4000 │ │       │ │ TiDB-4 172.24.40.18    │ │║
           ║ │ └───────────────────────────┘ │       │ │ TiDB-5 172.24.40.19    │ │║
           ║ │             │                 │       │ └────────────────────────┘ │║
           ║ │             ▼                 │       │           │                │║
           ║ │ ┌───────────────────────────┐ │⇄⇄⇄⇄⇄⇄⇄│ ┌────────────────────────┐ │║
           ║ │ │          PD 層            │ │       │ │         PD 層          │ │║
           ║ │ │ PD-1   10.160.152.21:2379 │ │       │ │ PD-3   172.24.40.17    │ │║
           ║ │ │ PD-2   10.160.152.22:2379 │ │       │ │ PD-4   172.24.40.18    │ │║
           ║ │ └───────────────────────────┘ │       │ │ PD-5   172.24.40.19    │ │║
           ║ │             │                 │       │ └────────────────────────┘ │║
           ║ │             ▼                 │       │           │                │║
           ║ │ ┌───────────────────────────┐ │⇄⇄⇄⇄⇄⇄⇄│ ┌────────────────────────┐ │║
           ║ │ │         TiKV 層           │ │       │ │        TiKV 層         │ │║
           ║ │ │ TiKV-1 10.160.152.21:20160│ │       │ │ TiKV-3 172.24.40.17    │ │║
           ║ │ │ TiKV-2 10.160.152.22:20160│ │       │ │ TiKV-4 172.24.40.18    │ │║
           ║ │ └───────────────────────────┘ │       │ │ TiKV-5 172.24.40.19    │ │║
           ║ │                               │       │ └────────────────────────┘ │║
           ║ └───────────────────────────────┘       └────────────────────────────┘║
           ║                                                                      ║
           ╚══════════════════════════════════════════════════════════════════════╝
```

---

## RPS Benchmark

### Environment Phase

#### Deploy on VM

======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================

- IDC * 1

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================

- GCP * 1

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================

- IDC * 3

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================

- GCP * 3

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================

- IDC * 1 + GCP * 2 # 未實施 Label 隔離分流

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

RPS From TiDB with IDC # 離峰 # 同時執行
```
```

RPS From TiProxy with IDC # 離峰 # 同時執行
```
```

RPS From TiDB with GCP # 離峰 # 同時執行
```
```

RPS From TiProxy with GCP # 離峰 # 同時執行
```
```

====================================================================

- IDC * 1 + GCP * 2 # 實施 Label 隔離分流

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

RPS From TiDB with IDC # 離峰 # 同時執行
```
```

RPS From TiProxy with IDC # 離峰 # 同時執行
```
```

RPS From TiDB with GCP # 離峰 # 同時執行
```
```

RPS From TiProxy with GCP # 離峰 # 同時執行
```
```

======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================


- IDC * 2 + GCP * 1 # 未實施 Label 隔離分流

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

RPS From TiDB with IDC # 離峰 # 同時執行
```
```

RPS From TiProxy with IDC # 離峰 # 同時執行
```
```

RPS From TiDB with GCP # 離峰 # 同時執行
```
```

RPS From TiProxy with GCP # 離峰 # 同時執行
```
```

====================================================================

- IDC * 2 + GCP * 1 # 實施 Label 隔離分流

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

RPS From TiDB with IDC # 離峰 # 同時執行
```
```

RPS From TiProxy with IDC # 離峰 # 同時執行
```
```

RPS From TiDB with GCP # 離峰 # 同時執行
```
```

RPS From TiProxy with GCP # 離峰 # 同時執行
```
```

======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================


- IDC * 3 + GCP * 2 # 未實施 Label 隔離分流

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

RPS From TiDB with IDC # 離峰 # 同時執行
```
```

RPS From TiProxy with IDC # 離峰 # 同時執行
```
```

RPS From TiDB with GCP # 離峰 # 同時執行
```
```

RPS From TiProxy with GCP # 離峰 # 同時執行
```
```

====================================================================

- IDC * 3 + GCP * 2 # 實施 Label 隔離分流

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

RPS From TiDB with IDC # 離峰 # 同時執行
```
```

RPS From TiProxy with IDC # 離峰 # 同時執行
```
```

RPS From TiDB with GCP # 離峰 # 同時執行
```
```

RPS From TiProxy with GCP # 離峰 # 同時執行
```
```

======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================

- IDC * 2 + GCP * 3 # 未實施 Label 隔離分流

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

RPS From TiDB with IDC # 離峰 # 同時執行
```
```

RPS From TiProxy with IDC # 離峰 # 同時執行
```
```

RPS From TiDB with GCP # 離峰 # 同時執行
```
```

RPS From TiProxy with GCP # 離峰 # 同時執行
```
```

====================================================================

- IDC * 2 + GCP * 3 # 實施 Label 隔離分流

Cluster Summary
```
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

RPS From TiDB with IDC # 離峰 # 同時執行
```
```

RPS From TiProxy with IDC # 離峰 # 同時執行
```
```

RPS From TiDB with GCP # 離峰 # 同時執行
```
```

RPS From TiProxy with GCP # 離峰 # 同時執行
```
```

======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================

- IDC * 3 + GCP * 3 # 未實施 Label 隔離分流

隔離分流未實施存取狀態
```
"172.24.40.25:6000"
總計: 400 次
=== 統計結果 ===
  g-k8s-labroom-3 : 81 次 (20.25%)
  g-k8s-labroom-2 : 65 次 (16.25%)
  g-k8s-labroom-1 : 57 次 (14.25%)
  l-k8s-labroom-1 : 63 次 (15.75%)
  l-k8s-labroom-2 : 63 次 (15.75%)
  l-k8s-labroom-3 : 71 次 (17.75%)

"10.160.152.26:6000"
總計: 400 次
=== 統計結果 ===
  l-k8s-labroom-1 : 144 次 (36.00%)
  l-k8s-labroom-3 : 126 次 (31.50%)
  l-k8s-labroom-2 : 130 次 (32.50%)
```

Cluster Summary
```
date ; tiup cluster display tidb-demo
Fri Aug 29 16:34:46 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                   Role        Host           Ports                 OS/Arch       Status  Data Dir                         Deploy Dir
--                   ----        ----           -----                 -------       ------  --------                         ----------
172.24.40.20:3000    grafana     172.24.40.20   3000                  linux/x86_64  Up      -                                /data/tidb-deploy/grafana-3000
10.160.152.21:2379   pd          10.160.152.21  2379/2380             linux/x86_64  Up|UI   /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd          10.160.152.22  2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd          10.160.152.23  2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd          172.24.40.17   2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd          172.24.40.18   2379/2380             linux/x86_64  Up|L    /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.19:2379    pd          172.24.40.19   2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090    prometheus  172.24.40.20   9090/9115/9100/12020  linux/x86_64  Up      /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
10.160.152.21:4000   tidb        10.160.152.21  4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb        10.160.152.22  4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb        10.160.152.23  4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb        172.24.40.17   4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb        172.24.40.18   4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.19:4000    tidb        172.24.40.19   4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv        10.160.152.21  20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv        10.160.152.22  20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.23:20160  tikv        10.160.152.23  20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv        172.24.40.17   20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv        172.24.40.18   20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.19:20160   tikv        172.24.40.19   20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy     10.160.152.21  6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy     10.160.152.22  6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy     10.160.152.23  6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy     172.24.40.17   6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy     172.24.40.18   6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.19:6000    tiproxy     172.24.40.19   6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
```

RPS From TiDB with IDC # 離峰
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.529                0.00            5.297           1887.78         1
single_thread_multi_conn  10000           0.599                0.00            5.990           1669.45         1
multi_thread_multi_conn   10000           1.535                0.00            15.365          650.82          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.621                0.00            6.216           1608.74         1
single_thread_multi_conn  10000           0.588                0.00            5.966           1676.30         1
multi_thread_multi_conn   10000           7.330                0.00            0.924           10818.03        100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.523                0.00            5.230           1912.03         1
single_thread_multi_conn  10000           0.595                0.00            6.144           1627.47         1
multi_thread_multi_conn   10000           12.551               0.00            0.952           10507.58        200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.539                0.00            5.395           1853.68         1
single_thread_multi_conn  10000           0.601                0.00            6.247           1600.88         1
multi_thread_multi_conn   10000           14.146               0.00            0.975           10254.49        250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.543                0.00            5.437           1839.11         1
single_thread_multi_conn  10000           0.612                0.00            6.581           1519.55         1
multi_thread_multi_conn   10000           21.064               0.00            1.188           8414.04         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.602                0.00            6.020           1661.21         1
single_thread_multi_conn  10000           0.616                0.00            6.870           1455.52         1
multi_thread_multi_conn   10000           11.970               0.00            1.602           6242.34         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.594                0.00            5.939           1683.81         1
single_thread_multi_conn  10000           0.593                0.00            6.809           1468.70         1
multi_thread_multi_conn   10000           12.104               0.00            2.008           4981.18         1000
========================================================================================================================
```

RPS From TiProxy with IDC # 離峰
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.764                0.00            7.647           1307.62         1
single_thread_multi_conn  10000           11.543               0.00            115.470         86.60           1
multi_thread_multi_conn   10000           8.511                0.00            85.131          117.47          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.690                0.00            6.904           1448.36         1
single_thread_multi_conn  10000           2.661                0.00            27.161          368.18          1
multi_thread_multi_conn   10000           12.203               0.00            1.519           6582.43         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.626                0.00            6.267           1595.57         1
single_thread_multi_conn  10000           2.767                0.00            28.805          347.16          1
multi_thread_multi_conn   10000           21.579               0.00            1.477           6768.71         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.409               0.00            114.123         87.62           1
single_thread_multi_conn  10000           2.806                0.00            29.442          339.66          1
multi_thread_multi_conn   10000           25.419               0.00            1.428           7001.64         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.888                0.00            8.882           1125.89         1
single_thread_multi_conn  10000           2.848                0.00            32.520          307.51          1
multi_thread_multi_conn   10000           39.515               0.00            1.618           6179.61         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.618                0.00            6.182           1617.49         1
single_thread_multi_conn  10000           2.628                0.00            30.145          331.73          1
multi_thread_multi_conn   10000           28.304               0.00            1.882           5312.98         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.810                0.00            8.104           1233.96         1
single_thread_multi_conn  10000           2.738                0.00            32.914          303.83          1
multi_thread_multi_conn   10000           30.336               0.00            2.145           4662.38         1000
========================================================================================================================
```

RPS From TiDB with GCP # 離峰
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.362                0.00            3.624           2759.51         1
single_thread_multi_conn  10000           0.375                0.00            3.750           2666.31         1
multi_thread_multi_conn   10000           1.087                0.00            10.875          919.51          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.366                0.00            3.667           2727.23         1
single_thread_multi_conn  10000           0.408                0.00            4.152           2408.65         1
multi_thread_multi_conn   10000           9.218                0.00            1.103           9067.47         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.365                0.00            3.653           2737.76         1
single_thread_multi_conn  10000           0.418                0.00            4.313           2318.61         1
multi_thread_multi_conn   10000           16.707               0.00            1.202           8319.85         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.372                0.00            3.727           2683.41         1
single_thread_multi_conn  10000           0.414                0.00            4.301           2325.04         1
multi_thread_multi_conn   10000           21.583               0.00            1.310           7633.98         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.378                0.00            3.777           2647.32         1
single_thread_multi_conn  10000           0.416                0.00            4.488           2227.94         1
multi_thread_multi_conn   10000           10.204               0.00            1.602           6243.22         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.363                0.00            3.633           2752.33         1
single_thread_multi_conn  10000           0.416                0.00            4.653           2149.05         1
multi_thread_multi_conn   10000           5.255                0.00            2.104           4752.20         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.375                0.00            3.750           2666.67         1
single_thread_multi_conn  10000           0.423                0.00            4.880           2049.08         1
multi_thread_multi_conn   10000           4.481                0.00            2.615           3824.07         1000
========================================================================================================================
```

RPS From TiProxy with GCP # 離峰
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.813               0.00            118.157         84.63           1
single_thread_multi_conn  10000           11.536               0.00            115.385         86.67           1
multi_thread_multi_conn   10000           34.620               0.00            346.206         28.88           1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.225               0.00            112.277         89.07           1
single_thread_multi_conn  10000           11.299               0.00            116.415         85.90           1
multi_thread_multi_conn   10000           33.715               0.00            3.532           2831.61         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.284               0.00            112.868         88.60           1
single_thread_multi_conn  10000           11.394               0.00            118.431         84.44           1
multi_thread_multi_conn   10000           36.530               0.00            3.224           3101.94         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.290               0.00            112.926         88.55           1
single_thread_multi_conn  10000           11.311               0.00            118.807         84.17           1
multi_thread_multi_conn   10000           36.273               0.00            2.008           4980.70         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.266               0.00            112.684         88.74           1
single_thread_multi_conn  10000           11.375               0.00            124.951         80.03           1
multi_thread_multi_conn   10000           44.815               0.00            2.149           4654.37         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.308               0.00            113.110         88.41           1
single_thread_multi_conn  10000           11.346               0.00            130.307         76.74           1
multi_thread_multi_conn   10000           46.631               0.00            2.663           3754.47         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.215               0.00            112.176         89.15           1
single_thread_multi_conn  10000           11.295               0.00            135.407         73.85           1
multi_thread_multi_conn   10000           44.521               0.00            3.164           3160.38         1000
========================================================================================================================
```

RPS From TiDB with IDC # 離峰 # 同時執行
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.615                0.00            6.157           1624.25         1
single_thread_multi_conn  10000           0.529                0.00            5.295           1888.67         1
multi_thread_multi_conn   10000           1.532                0.00            15.335          652.09          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.573                0.00            5.734           1743.98         1
single_thread_multi_conn  10000           0.590                0.00            5.998           1667.34         1
multi_thread_multi_conn   10000           7.388                0.00            0.935           10695.06        100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.548                0.00            5.482           1824.22         1
single_thread_multi_conn  10000           0.587                0.00            6.048           1653.47         1
multi_thread_multi_conn   10000           10.876               0.00            0.870           11491.62        200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.614                0.00            6.144           1627.51         1
single_thread_multi_conn  10000           0.658                0.00            6.804           1469.76         1
multi_thread_multi_conn   10000           13.942               0.00            0.970           10307.45        250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.581                0.00            5.810           1721.18         1
single_thread_multi_conn  10000           0.616                0.00            6.625           1509.38         1
multi_thread_multi_conn   10000           14.758               0.00            1.283           7794.50         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.532                0.00            5.323           1878.72         1
single_thread_multi_conn  10000           0.603                0.00            6.716           1488.98         1
multi_thread_multi_conn   10000           11.639               0.00            1.588           6295.82         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.545                0.00            5.452           1834.18         1
single_thread_multi_conn  10000           0.598                0.00            6.869           1455.90         1
multi_thread_multi_conn   10000           12.362               0.00            1.949           5131.47         1000
========================================================================================================================
```

RPS From TiProxy with IDC # 離峰 # 同時執行
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.825                0.00            8.250           1212.05         1
single_thread_multi_conn  10000           11.026               0.00            110.300         90.66           1
multi_thread_multi_conn   10000           9.131                0.00            91.330          109.49          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.014               0.00            110.175         90.77           1
single_thread_multi_conn  10000           2.568                0.00            26.187          381.87          1
multi_thread_multi_conn   10000           12.812               0.00            1.560           6411.04         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.763                0.00            7.638           1309.18         1
single_thread_multi_conn  10000           0.827                0.00            8.584           1165.02         1
multi_thread_multi_conn   10000           21.673               0.00            1.412           7080.12         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.616                0.00            6.168           1621.39         1
single_thread_multi_conn  10000           0.822                0.00            8.625           1159.46         1
multi_thread_multi_conn   10000           26.090               0.00            1.377           7263.35         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.844                0.00            8.444           1184.22         1
single_thread_multi_conn  10000           2.390                0.00            26.398          378.82          1
multi_thread_multi_conn   10000           40.406               0.00            1.497           6679.28         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.626                0.00            6.267           1595.72         1
single_thread_multi_conn  10000           2.714                0.00            31.087          321.68          1
multi_thread_multi_conn   10000           39.811               0.00            2.543           3932.82         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.796                0.00            7.962           1256.02         1
single_thread_multi_conn  10000           4.327                0.00            51.735          193.29          1
multi_thread_multi_conn   10000           35.300               0.00            3.655           2736.33         1000
========================================================================================================================
```

RPS From TiDB with GCP # 離峰 # 同時執行
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.376                0.00            3.758           2660.66         1
single_thread_multi_conn  10000           0.379                0.00            3.797           2633.69         1
multi_thread_multi_conn   10000           1.079                0.00            10.796          926.26          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.378                0.00            3.783           2643.30         1
single_thread_multi_conn  10000           0.408                0.00            4.144           2412.86         1
multi_thread_multi_conn   10000           9.996                0.00            1.167           8565.93         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.374                0.00            3.745           2669.88         1
single_thread_multi_conn  10000           0.419                0.00            4.324           2312.49         1
multi_thread_multi_conn   10000           16.564               0.00            1.203           8309.27         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.376                0.00            3.761           2658.56         1
single_thread_multi_conn  10000           0.415                0.00            4.308           2321.37         1
multi_thread_multi_conn   10000           19.144               0.00            1.236           8093.35         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.364                0.00            3.637           2749.18         1
single_thread_multi_conn  10000           0.417                0.00            4.488           2227.97         1
multi_thread_multi_conn   10000           7.311                0.00            1.542           6484.55         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.367                0.00            3.675           2720.88         1
single_thread_multi_conn  10000           0.419                0.00            4.675           2138.86         1
multi_thread_multi_conn   10000           5.158                0.00            2.106           4749.25         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.379                0.00            3.795           2634.85         1
single_thread_multi_conn  10000           0.418                0.00            4.831           2069.87         1
multi_thread_multi_conn   10000           4.498                0.00            2.615           3824.12         1000
========================================================================================================================
```

RPS From TiProxy with GCP # 離峰 # 同時執行
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.805               0.00            108.074         92.53           1
single_thread_multi_conn  10000           10.765               0.00            107.672         92.88           1
multi_thread_multi_conn   10000           32.104               0.00            321.050         31.15           1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.611               0.00            106.132         94.22           1
single_thread_multi_conn  10000           10.818               0.00            110.336         90.63           1
multi_thread_multi_conn   10000           32.119               0.00            3.362           2974.73         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.035               0.00            110.373         90.60           1
single_thread_multi_conn  10000           10.797               0.00            112.274         89.07           1
multi_thread_multi_conn   10000           33.683               0.00            2.090           4783.69         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.674               0.00            106.763         93.67           1
single_thread_multi_conn  10000           10.864               0.00            114.033         87.69           1
multi_thread_multi_conn   10000           35.783               0.00            1.944           5143.19         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.777               0.00            107.792         92.77           1
single_thread_multi_conn  10000           10.846               0.00            119.257         83.85           1
multi_thread_multi_conn   10000           43.914               0.00            2.188           4570.40         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.663               0.00            106.658         93.76           1
single_thread_multi_conn  10000           10.894               0.00            126.361         79.14           1
multi_thread_multi_conn   10000           45.274               0.00            2.651           3772.58         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.734               0.00            107.369         93.14           1
single_thread_multi_conn  10000           10.905               0.00            131.669         75.95           1
multi_thread_multi_conn   10000           42.207               0.00            3.104           3221.94         1000
========================================================================================================================
```

====================================================================

RPS From TiDB with IDC # 尖峰
```
```

RPS From TiProxy with IDC # 尖峰
```
```

RPS From TiDB with GCP # 尖峰
```
```

RPS From TiProxy with GCP # 尖峰
```
```

RPS From TiDB with IDC # 尖峰 # 同時執行
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.574                0.00            5.740           1742.18         1
single_thread_multi_conn  10000           0.620                0.00            6.203           1612.11         1
multi_thread_multi_conn   10000           1.473                0.00            14.745          678.20          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.565                0.00            5.653           1769.08         1
single_thread_multi_conn  10000           0.664                0.00            6.757           1479.95         1
multi_thread_multi_conn   10000           7.653                0.00            0.936           10683.84        100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.594                0.00            5.943           1682.72         1
single_thread_multi_conn  10000           0.614                0.00            6.314           1583.79         1
multi_thread_multi_conn   10000           12.454               0.00            0.952           10505.96        200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.537                0.00            5.376           1860.12         1
single_thread_multi_conn  10000           0.596                0.00            6.182           1617.61         1
multi_thread_multi_conn   10000           14.073               0.00            1.044           9581.09         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.524                0.00            5.242           1907.49         1
single_thread_multi_conn  10000           0.590                0.00            6.360           1572.33         1
multi_thread_multi_conn   10000           16.453               0.00            1.198           8348.60         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.593                0.00            5.934           1685.10         1
single_thread_multi_conn  10000           0.691                0.00            7.580           1319.26         1
multi_thread_multi_conn   10000           13.996               0.00            1.779           5620.90         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.568                0.00            5.681           1760.37         1
single_thread_multi_conn  10000           0.611                0.00            7.119           1404.71         1
multi_thread_multi_conn   10000           11.774               0.00            3.335           2998.63         1000
========================================================================================================================
```

RPS From TiProxy with IDC # 尖峰 # 同時執行
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.799                0.00            7.995           1250.78         1
single_thread_multi_conn  10000           0.620                0.00            6.207           1611.00         1
multi_thread_multi_conn   10000           2.494                0.00            24.953          400.76          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.638                0.00            6.387           1565.60         1
single_thread_multi_conn  10000           1.135                0.00            11.586          863.15          1
multi_thread_multi_conn   10000           12.203               0.00            1.451           6893.57         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           1.007                0.00            10.073          992.74          1
single_thread_multi_conn  10000           2.690                0.00            27.939          357.92          1
multi_thread_multi_conn   10000           22.027               0.00            1.573           6359.17         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.285               0.00            112.889         88.58           1
single_thread_multi_conn  10000           3.914                0.00            41.581          240.49          1
multi_thread_multi_conn   10000           26.343               0.00            1.383           7230.17         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.893                0.00            8.939           1118.70         1
single_thread_multi_conn  10000           3.011                0.00            32.710          305.71          1
multi_thread_multi_conn   10000           44.653               0.00            1.521           6576.74         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.788                0.00            7.887           1267.91         1
single_thread_multi_conn  10000           3.459                0.00            39.415          253.71          1
multi_thread_multi_conn   10000           38.706               0.00            1.956           5113.17         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.814                0.00            8.145           1227.79         1
single_thread_multi_conn  10000           5.969                0.00            71.442          139.97          1
multi_thread_multi_conn   10000           39.410               0.00            2.258           4428.23         1000
========================================================================================================================
```

RPS From TiDB with GCP # 尖峰 # 同時執行
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.376                0.00            3.763           2657.67         1
single_thread_multi_conn  10000           0.377                0.00            3.774           2649.70         1
multi_thread_multi_conn   10000           1.089                0.00            10.897          917.72          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.376                0.00            3.764           2656.43         1
single_thread_multi_conn  10000           0.410                0.00            4.167           2399.60         1
multi_thread_multi_conn   10000           9.705                0.00            1.140           8771.13         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.368                0.00            3.684           2714.43         1
single_thread_multi_conn  10000           0.413                0.00            4.258           2348.39         1
multi_thread_multi_conn   10000           17.199               0.00            1.219           8202.95         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.369                0.00            3.688           2711.77         1
single_thread_multi_conn  10000           0.417                0.00            4.339           2304.67         1
multi_thread_multi_conn   10000           19.500               0.00            1.237           8081.34         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.373                0.00            3.732           2679.38         1
single_thread_multi_conn  10000           0.418                0.00            4.502           2221.23         1
multi_thread_multi_conn   10000           11.764               0.00            1.554           6435.23         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.376                0.00            3.760           2659.81         1
single_thread_multi_conn  10000           0.422                0.00            4.708           2124.06         1
multi_thread_multi_conn   10000           4.774                0.00            2.094           4775.13         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.381                0.00            3.812           2623.52         1
single_thread_multi_conn  10000           0.420                0.00            4.845           2063.97         1
multi_thread_multi_conn   10000           4.964                0.00            2.607           3836.46         1000
========================================================================================================================
```

RPS From TiProxy with GCP # 尖峰 # 同時執行
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.590               0.00            105.925         94.41           1
single_thread_multi_conn  10000           10.586               0.00            105.885         94.44           1
multi_thread_multi_conn   10000           34.750               0.00            347.524         28.77           1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.832               0.00            108.349         92.29           1
single_thread_multi_conn  10000           10.513               0.00            107.260         93.23           1
multi_thread_multi_conn   10000           31.160               0.00            3.308           3023.19         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.526               0.00            105.288         94.98           1
single_thread_multi_conn  10000           11.119               0.00            115.503         86.58           1
multi_thread_multi_conn   10000           35.330               0.00            2.151           4649.79         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.490               0.00            114.925         87.01           1
single_thread_multi_conn  10000           10.943               0.00            115.798         86.36           1
multi_thread_multi_conn   10000           34.618               0.00            1.937           5162.68         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.860               0.00            108.631         92.05           1
single_thread_multi_conn  10000           11.060               0.00            121.502         82.30           1
multi_thread_multi_conn   10000           46.465               0.00            2.216           4511.78         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.864               0.00            108.669         92.02           1
single_thread_multi_conn  10000           11.133               0.00            127.867         78.21           1
multi_thread_multi_conn   10000           46.224               0.00            2.658           3761.68         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.083               0.00            110.859         90.20           1
single_thread_multi_conn  10000           11.146               0.00            133.286         75.03           1
multi_thread_multi_conn   10000           43.239               0.00            3.165           3159.47         1000
========================================================================================================================
```

======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================

- IDC * 3 + GCP * 3 # 實施 Label 隔離分流

隔離分流實施存取狀態
```
"172.24.40.25:6000"
總計: 400 次
=== 統計結果 ===
  l-k8s-labroom-1 : 131 次 (32.75%)
  l-k8s-labroom-2 : 132 次 (33.00%)
  l-k8s-labroom-3 : 137 次 (34.25%)

"10.160.152.26:6000"
總計: 400 次
=== 統計結果 ===
  g-k8s-labroom-2 : 139 次 (34.75%)
  g-k8s-labroom-3 : 136 次 (34.00%)
  g-k8s-labroom-1 : 125 次 (31.25%)
```

分析
```
- 上班時段，下班時段效能差異
- 實施隔離分流語法差異
- 單區執行 A/S 與共同執行 A/A 效能差異
```

Cluster Summary
```
[root@l-k8s-labroom-1 ~]# make display
date ; tiup cluster display tidb-demo
Fri Aug 29 00:18:54 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                   Role        Host           Ports                 OS/Arch       Status  Data Dir                         Deploy Dir
--                   ----        ----           -----                 -------       ------  --------                         ----------
172.24.40.20:3000    grafana     172.24.40.20   3000                  linux/x86_64  Up      -                                /data/tidb-deploy/grafana-3000
10.160.152.21:2379   pd          10.160.152.21  2379/2380             linux/x86_64  Up|UI   /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd          10.160.152.22  2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd          10.160.152.23  2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd          172.24.40.17   2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd          172.24.40.18   2379/2380             linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.19:2379    pd          172.24.40.19   2379/2380             linux/x86_64  Up|L    /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090    prometheus  172.24.40.20   9090/9115/9100/12020  linux/x86_64  Up      /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
10.160.152.21:4000   tidb        10.160.152.21  4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb        10.160.152.22  4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb        10.160.152.23  4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb        172.24.40.17   4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb        172.24.40.18   4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.19:4000    tidb        172.24.40.19   4000/10080            linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv        10.160.152.21  20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv        10.160.152.22  20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.23:20160  tikv        10.160.152.23  20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv        172.24.40.17   20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv        172.24.40.18   20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.19:20160   tikv        172.24.40.19   20160/20180           linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy     10.160.152.21  6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy     10.160.152.22  6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy     10.160.152.23  6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy     172.24.40.17   6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy     172.24.40.18   6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.19:6000    tiproxy     172.24.40.19   6000/6001             linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
```

RPS From TiDB with IDC # 離峰
```
```

RPS From TiProxy with IDC # 離峰
```
```

RPS From TiDB with GCP # 離峰
```
```

RPS From TiProxy with GCP # 離峰
```
```

RPS From TiDB with IDC # 離峰 # 同時執行
```
```

RPS From TiProxy with IDC # 離峰 # 同時執行
```
```

RPS From TiDB with GCP # 離峰 # 同時執行
```
```

RPS From TiProxy with GCP # 離峰 # 同時執行
```
```

====================================================================

RPS From TiDB with IDC # 尖峰 #1-1.py
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.535                0.00            5.358           1866.53         1
single_thread_multi_conn  10000           0.535                0.00            5.350           1869.30         1
multi_thread_multi_conn   10000           1.651                0.00            16.519          605.37          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.524                0.00            5.245           1906.74         1
single_thread_multi_conn  10000           0.614                0.00            6.233           1604.41         1
multi_thread_multi_conn   10000           7.678                0.00            0.960           10417.45        100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.516                0.00            5.165           1936.00         1
single_thread_multi_conn  10000           0.614                0.00            6.319           1582.64         1
multi_thread_multi_conn   10000           11.915               0.00            0.928           10776.75        200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.522                0.00            5.223           1914.57         1
single_thread_multi_conn  10000           0.612                0.00            6.338           1577.78         1
multi_thread_multi_conn   10000           11.001               0.00            0.974           10265.02        250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.539                0.00            5.394           1853.94         1
single_thread_multi_conn  10000           0.642                0.00            6.986           1431.36         1
multi_thread_multi_conn   10000           10.173               0.00            1.370           7297.53         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.529                0.00            5.291           1890.07         1
single_thread_multi_conn  10000           0.610                0.00            6.777           1475.47         1
multi_thread_multi_conn   10000           11.506               0.00            1.712           5842.36         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.520                0.00            5.199           1923.39         1
single_thread_multi_conn  10000           0.610                0.00            7.036           1421.19         1
multi_thread_multi_conn   10000           12.758               0.00            1.985           5038.69         1000
========================================================================================================================
```

RPS From TiProxy with IDC # 尖峰 #1-2.py
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.742                0.00            7.420           1347.69         1
single_thread_multi_conn  10000           0.612                0.00            6.130           1631.37         1
multi_thread_multi_conn   10000           2.649                0.00            26.498          377.38          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.670                0.00            6.704           1491.60         1
single_thread_multi_conn  10000           0.842                0.00            8.591           1164.04         1
multi_thread_multi_conn   10000           12.050               0.00            1.382           7237.95         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.783                0.00            7.830           1277.18         1
single_thread_multi_conn  10000           0.820                0.00            8.527           1172.69         1
multi_thread_multi_conn   10000           22.407               0.00            1.335           7493.05         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.814                0.00            8.140           1228.55         1
single_thread_multi_conn  10000           0.966                0.00            10.155          984.71          1
multi_thread_multi_conn   10000           28.697               0.00            2.405           4157.55         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.756                0.00            7.561           1322.53         1
single_thread_multi_conn  10000           0.841                0.00            9.257           1080.29         1
multi_thread_multi_conn   10000           46.040               0.00            1.609           6213.77         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.602                0.00            6.027           1659.18         1
single_thread_multi_conn  10000           0.821                0.00            9.607           1040.95         1
multi_thread_multi_conn   10000           35.432               0.00            4.727           2115.66         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.837                0.00            8.375           1194.07         1
single_thread_multi_conn  10000           0.919                0.00            11.172          895.13          1
multi_thread_multi_conn   10000           29.681               0.00            2.146           4658.88         1000
========================================================================================================================
```

RPS From TiDB with GCP # 尖峰 #1-3.py
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.364                0.00            3.646           2742.58         1
single_thread_multi_conn  10000           0.369                0.00            3.696           2705.74         1
multi_thread_multi_conn   10000           1.067                0.00            10.680          936.35          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.367                0.00            3.671           2724.23         1
single_thread_multi_conn  10000           0.408                0.00            4.151           2408.91         1
multi_thread_multi_conn   10000           9.620                0.00            1.136           8800.58         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.365                0.00            3.654           2736.56         1
single_thread_multi_conn  10000           0.418                0.00            4.311           2319.61         1
multi_thread_multi_conn   10000           17.773               0.00            1.254           7974.77         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.361                0.00            3.607           2772.30         1
single_thread_multi_conn  10000           0.416                0.00            4.321           2314.11         1
multi_thread_multi_conn   10000           20.529               0.00            1.274           7850.69         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.377                0.00            3.772           2651.28         1
single_thread_multi_conn  10000           0.415                0.00            4.477           2233.55         1
multi_thread_multi_conn   10000           12.161               0.00            1.553           6437.31         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.361                0.00            3.613           2767.78         1
single_thread_multi_conn  10000           0.412                0.00            4.596           2175.75         1
multi_thread_multi_conn   10000           4.959                0.00            2.089           4786.08         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.373                0.00            3.734           2678.31         1
single_thread_multi_conn  10000           0.418                0.00            4.810           2078.81         1
multi_thread_multi_conn   10000           5.541                0.00            2.877           3476.14         1000
========================================================================================================================
```

RPS From TiProxy with GCP # 尖峰 #1-4.py
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.485                0.00            4.851           2061.47         1
single_thread_multi_conn  10000           0.488                0.00            4.879           2049.43         1
multi_thread_multi_conn   10000           1.628                0.00            16.291          613.84          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.486                0.00            4.862           2056.91         1
single_thread_multi_conn  10000           0.543                0.00            5.541           1804.71         1
multi_thread_multi_conn   10000           15.625               0.00            1.718           5821.99         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.499                0.00            4.997           2001.40         1
single_thread_multi_conn  10000           0.556                0.00            5.783           1729.15         1
multi_thread_multi_conn   10000           29.160               0.00            1.768           5655.58         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.489                0.00            4.894           2043.18         1
single_thread_multi_conn  10000           0.554                0.00            5.818           1718.83         1
multi_thread_multi_conn   10000           35.037               0.00            1.822           5489.46         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.522                0.00            5.225           1913.72         1
single_thread_multi_conn  10000           0.555                0.00            6.095           1640.66         1
multi_thread_multi_conn   10000           63.569               0.00            2.148           4656.07         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.487                0.00            4.874           2051.63         1
single_thread_multi_conn  10000           0.564                0.00            6.453           1549.58         1
multi_thread_multi_conn   10000           83.732               0.00            2.493           4011.99         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.477                0.00            4.772           2095.74         1
single_thread_multi_conn  10000           0.557                0.00            6.696           1493.42         1
multi_thread_multi_conn   10000           21.078               0.00            2.825           3540.01         1000
========================================================================================================================
```

RPS From TiDB with IDC # 尖峰 # 同時執行 #1-5.py
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.525                0.00            5.254           1903.38         1
single_thread_multi_conn  10000           0.536                0.00            5.361           1865.22         1
multi_thread_multi_conn   10000           1.514                0.00            15.154          659.91          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.533                0.00            5.338           1873.42         1
single_thread_multi_conn  10000           0.607                0.00            6.162           1622.79         1
multi_thread_multi_conn   10000           7.618                0.00            0.973           10277.49        100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.590                0.00            5.904           1693.66         1
single_thread_multi_conn  10000           0.755                0.00            7.795           1282.89         1
multi_thread_multi_conn   10000           13.865               0.00            0.991           10093.25        200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.541                0.00            5.411           1848.11         1
single_thread_multi_conn  10000           0.610                0.00            6.326           1580.69         1
multi_thread_multi_conn   10000           15.202               0.00            0.986           10136.89        250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.521                0.00            5.215           1917.49         1
single_thread_multi_conn  10000           0.592                0.00            6.393           1564.17         1
multi_thread_multi_conn   10000           12.729               0.00            1.104           9060.52         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.528                0.00            5.286           1891.61         1
single_thread_multi_conn  10000           0.599                0.00            6.655           1502.73         1
multi_thread_multi_conn   10000           11.955               0.00            3.633           2752.71         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.539                0.00            5.398           1852.65         1
single_thread_multi_conn  10000           0.694                0.00            7.981           1252.99         1
multi_thread_multi_conn   10000           13.559               0.00            3.192           3132.93         1000
========================================================================================================================
```

RPS From TiProxy with IDC # 尖峰 # 同時執行 #1-6.py
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.609                0.00            6.094           1640.99         1
single_thread_multi_conn  10000           0.799                0.00            7.994           1250.93         1
multi_thread_multi_conn   10000           2.480                0.00            24.811          403.05          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.739                0.00            7.397           1351.89         1
single_thread_multi_conn  10000           0.851                0.00            8.678           1152.32         1
multi_thread_multi_conn   10000           12.459               0.00            1.428           7004.83         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.637                0.00            6.374           1568.83         1
single_thread_multi_conn  10000           0.858                0.00            8.936           1119.02         1
multi_thread_multi_conn   10000           21.622               0.00            1.340           7464.26         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.879                0.00            8.790           1137.72         1
single_thread_multi_conn  10000           0.885                0.00            9.329           1071.96         1
multi_thread_multi_conn   10000           26.422               0.00            1.340           7460.40         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.786                0.00            7.865           1271.39         1
single_thread_multi_conn  10000           0.859                0.00            9.416           1062.03         1
multi_thread_multi_conn   10000           43.636               0.00            1.656           6037.01         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.884                0.00            8.843           1130.89         1
single_thread_multi_conn  10000           0.864                0.00            9.982           1001.79         1
multi_thread_multi_conn   10000           34.000               0.00            1.781           5614.70         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.829                0.00            8.299           1204.96         1
single_thread_multi_conn  10000           0.855                0.00            10.283          972.49          1
multi_thread_multi_conn   10000           26.256               0.00            2.214           4517.42         1000
========================================================================================================================
```

RPS From TiDB with GCP # 尖峰 # 同時執行 #1-7.py
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.408                0.00            4.083           2449.34         1
single_thread_multi_conn  10000           0.406                0.00            4.067           2459.02         1
multi_thread_multi_conn   10000           1.663                0.00            16.641          600.92          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.440                0.00            4.402           2271.67         1
single_thread_multi_conn  10000           0.444                0.00            4.508           2218.22         1
multi_thread_multi_conn   10000           11.624               0.00            1.334           7499.05         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.439                0.00            4.396           2274.81         1
single_thread_multi_conn  10000           0.449                0.00            4.630           2160.06         1
multi_thread_multi_conn   10000           19.410               0.00            1.317           7592.54         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.409                0.00            4.094           2442.60         1
single_thread_multi_conn  10000           0.452                0.00            4.690           2132.36         1
multi_thread_multi_conn   10000           22.180               0.00            1.340           7460.46         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.408                0.00            4.085           2448.22         1
single_thread_multi_conn  10000           0.445                0.00            4.771           2096.11         1
multi_thread_multi_conn   10000           13.819               0.00            1.594           6274.65         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.413                0.00            4.135           2418.54         1
single_thread_multi_conn  10000           0.447                0.00            4.963           2015.10         1
multi_thread_multi_conn   10000           6.796                0.00            2.130           4695.18         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.403                0.00            4.028           2482.85         1
single_thread_multi_conn  10000           0.450                0.00            5.145           1943.73         1
multi_thread_multi_conn   10000           5.481                0.00            2.611           3830.52         1000
========================================================================================================================
```

RPS From TiProxy with GCP # 尖峰 # 同時執行 #1-8.py
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.546                0.00            5.466           1829.45         1
single_thread_multi_conn  10000           0.543                0.00            5.435           1839.76         1
multi_thread_multi_conn   10000           1.676                0.00            16.768          596.37          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.534                0.00            5.343           1871.71         1
single_thread_multi_conn  10000           0.582                0.00            5.939           1683.69         1
multi_thread_multi_conn   10000           16.201               0.00            1.786           5599.07         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.552                0.00            5.524           1810.17         1
single_thread_multi_conn  10000           0.585                0.00            6.080           1644.65         1
multi_thread_multi_conn   10000           29.777               0.00            1.814           5512.63         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.538                0.00            5.381           1858.36         1
single_thread_multi_conn  10000           0.590                0.00            6.181           1617.76         1
multi_thread_multi_conn   10000           36.551               0.00            1.865           5361.75         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.515                0.00            5.149           1942.05         1
single_thread_multi_conn  10000           0.592                0.00            6.468           1546.08         1
multi_thread_multi_conn   10000           61.958               0.00            2.107           4746.86         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.532                0.00            5.323           1878.67         1
single_thread_multi_conn  10000           0.589                0.00            6.712           1489.87         1
multi_thread_multi_conn   10000           85.976               0.00            2.517           3973.22         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.518                0.00            5.184           1928.96         1
single_thread_multi_conn  10000           0.603                0.00            7.157           1397.30         1
multi_thread_multi_conn   10000           18.875               0.00            2.865           3490.86         1000
========================================================================================================================
```

======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================
======================================================================================================================================================================================

## [Sysbench](https://docs.pingcap.com/zh/tidb/stable/benchmark-tidb-using-sysbench/)

- Tuning
    - TiDB
        - log.level: "error"
    - TiKV
        - log.level: "error"
        - storage.block-cache.capacity: "6GB"

- IDC * 1
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# make display
date ; tiup cluster display tidb-demo
Mon Aug 18 09:52:53 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://172.24.40.17:2379/dashboard
Dashboard URLs:     http://172.24.40.17:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                  Role        Host          Ports        OS/Arch       Status   Data Dir                         Deploy Dir
--                  ----        ----          -----        -------       ------   --------                         ----------
172.24.40.20:3000   grafana     172.24.40.20  3000         linux/x86_64  Up       -                                /data/tidb-deploy/grafana-3000
172.24.40.17:2379   pd          172.24.40.17  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090   prometheus  172.24.40.20  9090/12020   linux/x86_64  Up       /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
172.24.40.17:4000   tidb        172.24.40.17  4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
172.24.40.17:20160  tikv        172.24.40.17  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.17:6000   tiproxy     172.24.40.17  6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 6
```

Benchmark from TiDB
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#1_tidb/
Mon Aug 18 10:53:37 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        21.50                         16.79                 63.02                 9.84                  17864.6250               299.9722                         7621.74 per sec.    2399777.58          476.36 per sec.
oltp_read_write       31.37                         25.42                 81.66                 15.41                 11798.8750               299.9862                         6292.23 per sec.    2399889.72          314.61 per sec.
oltp_write_only       10.84                         8.19                  48.56                 3.26                  36628.2500               299.9501                         5860.25 per sec.    2399600.61          976.71 per sec.
select_random_points  4.33                          2.60                  43.01                 0.73                  115160.2500              299.8759                         3070.88 per sec.    2399007.02          3070.88 per sec.
select_random_ranges  3.49                          2.32                  27.84                 0.88                  129176.6250              299.8739                         3444.65 per sec.    2398991.52          3444.65 per sec.
```

Benchmark from TiProxy
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#1_tiproxy/
Mon Aug 18 11:21:59 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        21.50                         17.05                 65.18                 10.16                 17588.5000               299.9395                         7503.99 per sec.    2399516.06          469.00 per sec.
oltp_read_write       31.94                         26.27                 87.87                 17.00                 11416.6250               299.9632                         6088.41 per sec.    2399705.41          304.42 per sec.
oltp_write_only       11.45                         8.48                  156.69                3.75                  35376.3750               299.9089                         5660.05 per sec.    2399271.26          943.34 per sec.
select_random_points  4.41                          2.72                  33.28                 0.74                  110115.0000              299.8389                         2936.30 per sec.    2398711.56          2936.30 per sec.
select_random_ranges  3.55                          2.37                  27.49                 0.86                  126765.0000              299.8118                         3380.35 per sec.    2398494.43          3380.35 per sec.
```

- IDC * 3 (4vCPU 8GB Ram)
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# make display
date ; tiup cluster display tidb-demo
Mon Aug 18 11:31:24 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://172.24.40.17:2379/dashboard
Dashboard URLs:     http://172.24.40.17:2379/dashboard
ID                  Role     Host          Ports        OS/Arch       Status  Data Dir                    Deploy Dir
--                  ----     ----          -----        -------       ------  --------                    ----------
172.24.40.17:2379   pd       172.24.40.17  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.18:2379   pd       172.24.40.18  2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.19:2379   pd       172.24.40.19  2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:4000   tidb     172.24.40.17  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.18:4000   tidb     172.24.40.18  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.19:4000   tidb     172.24.40.19  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.17:20160  tikv     172.24.40.17  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.18:20160  tikv     172.24.40.18  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.19:20160  tikv     172.24.40.19  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:6000   tiproxy  172.24.40.17  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000   tiproxy  172.24.40.18  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.19:6000   tiproxy  172.24.40.19  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
Total nodes: 12
```

Benchmark from TiDB
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#2_tidb
Mon Aug 18 13:11:52 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        19.29                         14.91                 60.86                 8.42                  20121.5000               299.9338                         8584.75 per sec.    2399470.12          536.55 per sec.
oltp_read_write       30.81                         23.90                 809.77                14.52                 12552.2500               299.9713                         6693.06 per sec.    2399770.39          334.65 per sec.
oltp_write_only       10.65                         8.20                  35.96                 4.32                  36552.8750               299.9060                         5848.28 per sec.    2399248.21          974.71 per sec.
select_random_points  3.96                          2.31                  174.16                0.78                  130037.1250              299.8231                         3467.61 per sec.    2398584.53          3467.61 per sec.
select_random_ranges  3.13                          1.95                  29.62                 0.84                  153417.5000              299.7851                         4091.08 per sec.    2398280.45          4091.08 per sec.
```

Benchmark from TiProxy
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#2_tiproxy/
Mon Aug 18 13:12:30 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        18.61                         14.37                 145.59                8.83                  20869.0000               299.9442                         8903.67 per sec.    2399553.59          556.48 per sec.
oltp_read_write       28.16                         22.79                 64.23                 14.54                 13163.2500               299.9658                         7019.79 per sec.    2399726.48          350.99 per sec.
oltp_write_only       10.65                         8.32                  38.05                 4.38                  36065.1250               299.9151                         5770.23 per sec.    2399320.49          961.70 per sec.
select_random_points  3.96                          2.28                  37.92                 0.75                  131615.3750              299.8247                         3509.69 per sec.    2398597.29          3509.69 per sec.
select_random_ranges  3.19                          1.93                  19.37                 0.85                  155384.2500              299.8055                         4143.52 per sec.    2398444.19          4143.52 per sec.
```

- IDC * 3 (8vCPU 16GB Ram)
Cluster Summary
```
Wed Aug 20 10:26:57 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://172.24.40.17:2379/dashboard
Dashboard URLs:     http://172.24.40.17:2379/dashboard
ID                  Role     Host          Ports        OS/Arch       Status   Data Dir                    Deploy Dir
--                  ----     ----          -----        -------       ------   --------                    ----------
172.24.40.17:2379   pd       172.24.40.17  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.18:2379   pd       172.24.40.18  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.19:2379   pd       172.24.40.19  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:4000   tidb     172.24.40.17  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
172.24.40.18:4000   tidb     172.24.40.18  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
172.24.40.19:4000   tidb     172.24.40.19  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
172.24.40.17:20160  tikv     172.24.40.17  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.18:20160  tikv     172.24.40.18  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.19:20160  tikv     172.24.40.19  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:6000   tiproxy  172.24.40.17  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000   tiproxy  172.24.40.18  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
172.24.40.19:6000   tiproxy  172.24.40.19  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
```

Benchmark from TiDB
```
Wed Aug 20 10:49:47 CST 2025
Combined report has been generated at sysbench_results_#19_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        16.41                         12.37                 37.00                 8.04                  9703.7500                119.9897                         10349.42 per sec.   959917.48           646.84 per sec.
oltp_read_write       23.10                         18.65                 237.12                12.94                 6435.6250                119.9947                         8579.39 per sec.    959957.94           428.97 per sec.
oltp_write_only       7.56                          6.12                  28.07                 3.64                  19618.6250               119.9741                         7846.96 per sec.    959792.64           1307.83 per sec.
select_random_points  3.25                          1.80                  23.90                 0.78                  66620.8750               119.9371                         4441.26 per sec.    959496.86           4441.26 per sec.
select_random_ranges  2.43                          1.65                  16.15                 0.78                  72656.7500               119.9354                         4843.63 per sec.    959483.33           4843.63 per sec.
```

Benchmark from TiProxy
```
Wed Aug 20 10:49:47 CST 2025
Combined report has been generated at sysbench_results_#19_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        19.65                         15.15                 38.77                 8.89                  7922.6250                119.9936                         8449.29 per sec.    959948.98           528.08 per sec.
oltp_read_write       27.66                         21.65                 48.64                 14.37                 5541.2500                119.9930                         7387.28 per sec.    959943.69           369.36 per sec.
oltp_write_only       8.90                          6.91                  35.87                 4.16                  17365.7500               119.9765                         6945.77 per sec.    959812.25           1157.63 per sec.
select_random_points  3.07                          1.94                  15.81                 0.84                  61701.6250               119.9426                         4113.32 per sec.    959540.60           4113.32 per sec.
select_random_ranges  2.52                          1.78                  13.92                 0.79                  67431.7500               119.9402                         4495.30 per sec.    959521.59           4495.30 per sec.
```

- GCP * 1
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# make display
date ; tiup cluster display tidb-demo
Mon Aug 18 13:22:16 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status   Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------   --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
Total nodes: 4
```

Benchmark from TiDB
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#3_tidb
Mon Aug 18 15:14:46 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        22.69                         18.79                 45.81                 12.63                 15965.8750               299.9827                         6811.74 per sec.    2399861.52          425.73 per sec.
oltp_read_write       36.24                         30.66                 68.37                 19.83                 9784.0000                299.9893                         5217.79 per sec.    2399914.43          260.89 per sec.
oltp_write_only       12.98                         9.89                  36.57                 4.51                  30334.5000               299.9666                         4853.39 per sec.    2399732.73          808.90 per sec.
select_random_points  6.21                          3.52                  35.79                 1.04                  85323.7500               299.9262                         2275.27 per sec.    2399409.81          2275.27 per sec.
select_random_ranges  4.74                          3.09                  23.51                 1.20                  97190.8750               299.9211                         2591.72 per sec.    2399368.65          2591.72 per sec.
```

Benchmark from TiProxy
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#3_tiproxy/
Mon Aug 18 15:14:50 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        22.69                         18.72                 50.24                 12.09                 16024.2500               299.9796                         6836.67 per sec.    2399836.84          427.29 per sec.
oltp_read_write       39.65                         32.02                 78.78                 20.42                 9368.6250                299.9907                         4996.25 per sec.    2399925.46          249.81 per sec.
oltp_write_only       13.22                         10.05                 33.14                 4.25                  29833.8750               299.9644                         4773.30 per sec.    2399715.00          795.55 per sec.
select_random_points  6.21                          3.65                  20.51                 1.08                  82276.3750               299.9278                         2194.00 per sec.    2399422.73          2194.00 per sec.
select_random_ranges  5.09                          3.27                  25.38                 1.28                  91782.7500               299.9243                         2447.51 per sec.    2399394.01          2447.51 per sec.
```

- GCP * 3
Cluster Summary
```
Mon Aug 18 15:32:31 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status   Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------   --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd       10.160.152.22  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd       10.160.152.23  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb     10.160.152.22  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb     10.160.152.23  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv     10.160.152.22  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.23:20160  tikv     10.160.152.23  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy  10.160.152.22  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy  10.160.152.23  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
Total nodes: 12
```

Benchmark from TiDB
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#4_tidb
Mon Aug 18 16:34:11 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        12.52                         10.70                 32.49                 7.95                  28036.1250               299.9655                         11961.66 per sec.   2399724.29          747.60 per sec.
oltp_read_write       25.74                         20.21                 104.08                12.61                 14840.6250               299.9868                         7914.49 per sec.    2399894.37          395.72 per sec.
oltp_write_only       9.73                          7.46                  32.75                 3.58                  40181.7500               299.9558                         6428.93 per sec.    2399646.42          1071.49 per sec.
select_random_points  3.68                          2.06                  20.86                 0.83                  145409.1250              299.8955                         3877.52 per sec.    2399163.64          3877.52 per sec.
select_random_ranges  2.35                          1.58                  18.70                 0.94                  189318.0000              299.8663                         5048.42 per sec.    2398930.45          5048.42 per sec.
```

Benchmark from TiProxy
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#4_tiproxy/
Mon Aug 18 16:34:15 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        12.98                         11.05                 27.33                 8.05                  27145.3750               299.9631                         11581.67 per sec.   2399704.99          723.85 per sec.
oltp_read_write       23.52                         19.78                 57.86                 13.56                 15162.5000               299.9844                         8086.11 per sec.    2399875.10          404.31 per sec.
oltp_write_only       10.46                         7.76                  58.37                 3.56                  38641.7500               299.9585                         6182.53 per sec.    2399667.76          1030.42 per sec.
select_random_points  3.75                          2.20                  19.88                 0.84                  136338.8750              299.8950                         3635.66 per sec.    2399159.76          3635.66 per sec.
select_random_ranges  2.66                          1.82                  15.72                 0.97                  165113.5000              299.8846                         4402.98 per sec.    2399076.44          4402.98 per sec.
```

- IDC * 1 + GCP * 2
Cluster Summary
```
Wed Aug 20 00:39:43 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status  Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------  --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd       10.160.152.22  2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd       172.24.40.17   2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb     10.160.152.22  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb     172.24.40.17   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv     10.160.152.22  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv     172.24.40.17   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy  10.160.152.22  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy  172.24.40.17   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
```

Benchmark from TiDB with IDC
```
Wed Aug 20 01:12:27 CST 2025
Combined report has been generated at sysbench_results_#15_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        86.00                         58.41                 290.04                8.17                  2055.0000                120.0240                         2190.60 per sec.    960192.14           136.91 per sec.
oltp_read_write       110.66                        83.32                 333.02                20.01                 1440.6250                120.0274                         1919.40 per sec.    960218.88           95.97 per sec.
oltp_write_only       27.17                         21.54                 256.09                8.50                  5570.6250                119.9932                         2227.79 per sec.    959945.90           371.30 per sec.
select_random_points  5.37                          2.76                  205.66                0.76                  43532.2500               119.9335                         2902.03 per sec.    959467.70           2902.03 per sec.
select_random_ranges  6.67                          2.81                  223.80                0.91                  42640.6250               119.9312                         2842.59 per sec.    959449.60           2842.59 per sec.
```

Benchmark from TiProxy with IDC
```
Wed Aug 20 01:12:27 CST 2025
Combined report has been generated at sysbench_results_#15_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        94.10                         66.79                 309.54                10.00                 1797.0000                120.0272                         1915.71 per sec.    960217.87           119.73 per sec.
oltp_read_write       123.28                        87.39                 327.31                20.53                 1373.7500                120.0453                         1830.36 per sec.    960362.39           91.52 per sec.
oltp_write_only       27.66                         21.93                 271.56                8.70                  5472.1250                119.9968                         2188.36 per sec.    959974.15           364.73 per sec.
select_random_points  12.98                         7.48                  43.22                 0.72                  16048.7500               119.9723                         1069.80 per sec.    959778.23           1069.80 per sec.
select_random_ranges  7.56                          4.87                  238.79                0.82                  24632.8750               119.9633                         1642.08 per sec.    959706.50           1642.08 per sec.
```

Benchmark from TiDB with GCP
```
Tue Aug 19 05:34:01 PM UTC 2025
Reports have been generated in the sysbench_results_#16_tidb/sysbench_results_report directory.
Combined report has been generated at sysbench_results_#16_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        84.47                         45.57                 320.89                12.45                 2633.6250                120.0164                         2807.81 per sec.    960131.42           175.49 per sec.
oltp_read_write       114.72                        71.05                 342.97                20.99                 1689.7500                120.0536                         2250.76 per sec.    960429.12           112.54 per sec.
oltp_write_only       43.39                         32.78                 248.02                13.14                 3661.1250                120.0130                         1464.04 per sec.    960103.90           244.01 per sec.
select_random_points  20.74                         13.68                 287.81                5.68                  8770.6250                119.9995                         584.62 per sec.     959996.06           584.62 per sec.
select_random_ranges  15.83                         10.96                 27.73                 5.83                  10951.0000               119.9943                         730.01 per sec.     959954.63           730.01 per sec.
```

Benchmark from TiProxy with GCP
```
Tue Aug 19 05:34:01 PM UTC 2025
Reports have been generated in the sysbench_results_#16_tiproxy/sysbench_results_report directory.
Combined report has been generated at sysbench_results_#16_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        167.44                        138.90                388.91                91.89                 864.3750                 120.0588                         920.81 per sec.     960470.67           57.55 per sec.
oltp_read_write       207.82                        179.04                442.05                123.56                670.7500                 120.0932                         892.93 per sec.     960745.55           44.65 per sec.
oltp_write_only       55.82                         50.12                 72.61                 38.71                 2394.5000                120.0228                         957.35 per sec.     960182.37           159.56 per sec.
select_random_points  30.81                         18.88                 1038.68               11.00                 6356.2500                120.0010                         423.66 per sec.     960007.77           423.66 per sec.
select_random_ranges  15.83                         15.43                 434.78                11.07                 7779.2500                119.9975                         518.58 per sec.     959979.69           518.58 per sec.
```

- IDC * 2 + GCP * 1
Cluster Summary
```
Wed Aug 20 01:41:23 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status  Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------  --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd       172.24.40.17   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd       172.24.40.18   2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb     172.24.40.17   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb     172.24.40.18   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv     172.24.40.17   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv     172.24.40.18   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy  172.24.40.17   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy  172.24.40.18   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
```

Benchmark from TiDB with IDC
```
Wed Aug 20 02:16:54 CST 2025
Combined report has been generated at sysbench_results_#17_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        78.60                         33.92                 300.46                8.24                  3538.3750                120.0129                         3771.30 per sec.    960103.32           235.71 per sec.
oltp_read_write       92.42                         43.73                 157.16                13.39                 2744.8750                120.0220                         3657.77 per sec.    960175.92           182.89 per sec.
oltp_write_only       31.94                         20.11                 679.20                4.18                  5965.5000                119.9918                         2385.65 per sec.    959934.29           397.61 per sec.
select_random_points  4.82                          2.85                  207.35                0.89                  42120.6250               119.9400                         2807.89 per sec.    959520.22           2807.89 per sec.
select_random_ranges  3.89                          2.56                  22.52                 1.04                  46847.2500               119.9318                         3123.03 per sec.    959454.76           3123.03 per sec.
```

Benchmark from TiProxy with IDC
```
Wed Aug 20 02:16:54 CST 2025
Combined report has been generated at sysbench_results_#17_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        80.03                         38.11                 311.67                9.21                  3148.7500                120.0115                         3356.62 per sec.    960092.20           209.79 per sec.
oltp_read_write       102.97                        56.88                 324.73                15.03                 2109.8750                120.0178                         2811.23 per sec.    960142.61           140.56 per sec.
oltp_write_only       31.37                         20.00                 53.31                 4.36                  6000.3750                119.9881                         2399.72 per sec.    959904.42           399.95 per sec.
select_random_points  4.82                          2.61                  52.86                 0.88                  45876.2500               119.9344                         3058.26 per sec.    959474.95           3058.26 per sec.
select_random_ranges  4.03                          2.51                  28.08                 1.02                  47799.6250               119.9309                         3186.53 per sec.    959447.57           3186.53 per sec.
```

Benchmark from TiDB with GCP
```
Tue Aug 19 06:54:43 PM UTC 2025
Combined report has been generated at sysbench_results_#18_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        87.56                         59.61                 301.55                12.86                 2013.5000                120.0343                         2146.35 per sec.    960274.54           134.15 per sec.
oltp_read_write       118.92                        87.34                 349.01                27.69                 1374.2500                120.0337                         1831.23 per sec.    960269.47           91.56 per sec.
oltp_write_only       43.39                         35.96                 269.15                20.91                 3337.6250                120.0166                         1334.70 per sec.    960132.90           222.45 per sec.
select_random_points  22.69                         18.32                 86.36                 11.05                 6550.1250                120.0006                         436.61 per sec.     960005.12           436.61 per sec.
select_random_ranges  16.41                         15.84                 81.49                 11.42                 7573.8750                120.0026                         504.85 per sec.     960020.46           504.85 per sec.
```

Benchmark from TiProxy with GCP
```
Tue Aug 19 06:54:43 PM UTC 2025
Combined report has been generated at sysbench_results_#18_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        161.51                        123.33                407.17                91.98                 973.3750                 120.0450                         1037.51 per sec.    960359.82           64.84 per sec.
oltp_read_write       204.11                        164.66                454.26                116.76                729.2500                 120.0811                         970.94 per sec.     960649.14           48.55 per sec.
oltp_write_only       56.84                         47.86                 292.09                33.55                 2507.6250                120.0191                         1002.70 per sec.    960152.59           167.12 per sec.
select_random_points  13.95                         10.16                 238.12                5.85                  11812.7500               119.9936                         787.43 per sec.     959949.11           787.43 per sec.
select_random_ranges  12.30                         9.76                  434.01                5.71                  12297.7500               119.9969                         819.76 per sec.     959975.51           819.76 per sec.
```

- IDC * 3 + GCP * 2
Cluster Summary
```
Tue Aug 19 23:32:47 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status  Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------  --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd       10.160.152.22  2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd       172.24.40.17   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd       172.24.40.18   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.19:2379    pd       172.24.40.19   2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb     10.160.152.22  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb     172.24.40.17   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb     172.24.40.18   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.19:4000    tidb     172.24.40.19   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv     10.160.152.22  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv     172.24.40.17   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv     172.24.40.18   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.19:20160   tikv     172.24.40.19   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy  10.160.152.22  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy  172.24.40.17   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy  172.24.40.18   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.19:6000    tiproxy  172.24.40.19   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
```

Benchmark from TiDB with IDC # 離峰
```
Wed Aug 20 00:00:01 CST 2025
Combined report has been generated at sysbench_results_#13_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        78.60                         36.64                 921.44                8.33                  3275.5000                120.0212                         3491.61 per sec.    960169.26           218.23 per sec.
oltp_read_write       112.67                        79.82                 1000.73               18.07                 1503.6250                120.0210                         2003.82 per sec.    960168.31           100.19 per sec.
oltp_write_only       27.17                         17.72                 873.76                3.58                  6772.7500                119.9862                         2708.77 per sec.    959889.48           451.46 per sec.
select_random_points  3.68                          2.09                  206.89                0.72                  57337.8750               119.9291                         3822.38 per sec.    959432.96           3822.38 per sec.
select_random_ranges  6.43                          2.15                  842.92                0.75                  55697.3750               119.9344                         3712.91 per sec.    959475.22           3712.91 per sec.
```

Benchmark from TiProxy with IDC # 離峰
```
Wed Aug 20 00:00:01 CST 2025
Combined report has been generated at sysbench_results_#13_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        81.48                         38.90                 1876.76               9.23                  3085.6250                120.0213                         3288.70 per sec.    960170.16           205.54 per sec.
oltp_read_write       110.66                        71.90                 1190.23               17.19                 1669.2500                120.0272                         2224.53 per sec.    960217.34           111.23 per sec.
oltp_write_only       31.37                         22.22                 1541.48               4.22                  5399.2500                119.9912                         2159.26 per sec.    959929.30           359.88 per sec.
select_random_points  4.33                          2.39                  206.08                0.81                  50107.6250               119.9351                         3340.25 per sec.    959480.64           3340.25 per sec.
select_random_ranges  3.13                          1.99                  211.58                0.84                  60294.2500               119.9248                         4019.43 per sec.    959398.08           4019.43 per sec.
```

Benchmark from TiDB with GCP # 離峰
```
Tue Aug 19 04:23:21 PM UTC 2025
Combined report has been generated at sysbench_results_#14_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        116.80                        79.11                 4526.11               12.98                 1517.5000                120.0457                         1617.30 per sec.    960365.21           101.08 per sec.
oltp_read_write       147.61                        101.34                1683.01               22.65                 1184.7500                120.0633                         1578.12 per sec.    960506.19           78.91 per sec.
oltp_write_only       49.21                         39.41                 264.59                13.85                 3045.5000                120.0152                         1217.77 per sec.    960121.88           202.96 per sec.
select_random_points  32.53                         22.12                 1789.86               11.13                 5426.1250                120.0047                         361.68 per sec.     960037.31           361.68 per sec.
select_random_ranges  17.95                         16.66                 506.38                11.53                 7201.2500                120.0014                         480.02 per sec.     960011.43           480.02 per sec.
```

Benchmark from TiProxy with GCP # 離峰
```
Tue Aug 19 04:23:21 PM UTC 2025
Combined report has been generated at sysbench_results_#14_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        193.38                        155.81                2269.94               95.58                 770.6250                 120.0714                         821.10 per sec.     960571.17           51.32 per sec.
oltp_read_write       253.35                        214.05                2120.40               122.25                561.0000                 120.0797                         747.24 per sec.     960637.34           37.36 per sec.
oltp_write_only       61.08                         50.66                 270.90                36.42                 2369.0000                120.0254                         947.25 per sec.     960202.89           157.87 per sec.
select_random_points  21.11                         12.76                 319.54                5.98                  9401.1250                119.9971                         626.67 per sec.     959976.85           626.67 per sec.
select_random_ranges  14.21                         10.31                 522.44                5.93                  11639.3750               119.9936                         775.90 per sec.     959948.53           775.90 per sec.
```

- IDC * 2 + GCP * 3
Cluster Summary
```
Tue Aug 19 14:58:29 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status   Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------   --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd       10.160.152.22  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd       10.160.152.23  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd       172.24.40.17   2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd       172.24.40.18   2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb     10.160.152.22  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb     10.160.152.23  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb     172.24.40.17   4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb     172.24.40.18   4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv     10.160.152.22  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.23:20160  tikv     10.160.152.23  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv     172.24.40.17   20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv     172.24.40.18   20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy  10.160.152.22  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy  10.160.152.23  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy  172.24.40.17   6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy  172.24.40.18   6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
```

Benchmark from TiDB with IDC # 上班時段
```
Tue Aug 19 16:10:14 CST 2025
Combined report has been generated at sysbench_results_#7_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        511.33                        135.70                2478.60               14.26                 887.8750                 120.4846                         940.48 per sec.     963876.66           58.78 per sec.
oltp_read_write       419.45                        142.32                3359.08               36.20                 844.8750                 120.2441                         1118.76 per sec.    961952.74           55.94 per sec.
oltp_write_only       314.45                        76.76                 1494.25               16.05                 1563.6250                120.0226                         625.19 per sec.     960180.44           104.20 per sec.
select_random_points  15.00                         14.78                 927.59                6.02                  8118.1250                119.9820                         541.15 per sec.     959855.69           541.15 per sec.
select_random_ranges  12.98                         11.32                 456.86                6.40                  10597.1250               119.9752                         706.40 per sec.     959801.29           706.40 per sec.
```

Benchmark from TiProxy with IDC # 上班時段
```
Tue Aug 19 16:10:14 CST 2025
Combined report has been generated at sysbench_results_#7_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        102.97                        73.34                 2423.24               15.61                 1636.6250                120.0266                         1744.74 per sec.    960212.99           109.05 per sec.
oltp_read_write       139.85                        102.10                2638.35               35.75                 1175.6250                120.0263                         1566.09 per sec.    960210.69           78.30 per sec.
oltp_write_only       51.02                         40.58                 1022.64               15.30                 2957.2500                120.0041                         1182.54 per sec.    960033.05           197.09 per sec.
select_random_points  12.75                         11.09                 855.35                6.16                  10821.5000               119.9775                         721.36 per sec.     959820.29           721.36 per sec.
select_random_ranges  13.95                         11.69                 1087.71               6.21                  10262.2500               119.9754                         684.09 per sec.     959803.53           684.09 per sec.
```

Benchmark from TiDB with IDC # 離峰時段
```
Tue Aug 19 21:52:49 CST 2025
Combined report has been generated at sysbench_results_#9_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        89.16                         63.53                 318.37                13.16                 1889.6250                120.0460                         2013.68 per sec.    960368.39           125.85 per sec.
oltp_read_write       123.28                        95.83                 304.06                27.19                 1252.5000                120.0266                         1668.52 per sec.    960212.40           83.43 per sec.
oltp_write_only       44.17                         40.99                 2146.90               17.60                 2927.5000                120.0024                         1170.63 per sec.    960018.81           195.11 per sec.
select_random_points  12.75                         15.07                 3076.83               5.94                  7962.2500                119.9853                         530.76 per sec.     959882.78           530.76 per sec.
select_random_ranges  11.65                         10.87                 157.78                6.21                  11036.1250               119.9820                         735.65 per sec.     959856.35           735.65 per sec.
```

Benchmark from TiProxy with IDC # 離峰時段
```
Tue Aug 19 21:52:50 CST 2025
Combined report has been generated at sysbench_results_#9_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        94.10                         64.67                 166.30                14.70                 1856.2500                120.0394                         1978.59 per sec.    960314.96           123.66 per sec.
oltp_read_write       130.13                        111.16                2584.99               34.56                 1079.8750                120.0384                         1438.38 per sec.    960307.08           71.92 per sec.
oltp_write_only       45.79                         39.93                 3081.18               17.76                 3005.6250                120.0145                         1201.83 per sec.    960116.32           200.30 per sec.
select_random_points  12.30                         11.79                 877.62                6.15                  10175.6250               119.9799                         678.31 per sec.     959839.30           678.31 per sec.
select_random_ranges  11.87                         10.84                 55.59                 6.22                  11069.6250               119.9807                         737.90 per sec.     959845.20           737.90 per sec.
```

Benchmark from TiDB with GCP # 上班時段
```
Tue Aug 19 08:55:52 AM UTC 2025
Combined report has been generated at sysbench_results_#8_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        99.33                         52.72                 816.14                7.91                  2277.0000                120.0416                         2427.12 per sec.    960332.52           151.69 per sec.
oltp_read_write       123.28                        78.29                 1383.52               11.65                 1533.2500                120.0449                         2042.66 per sec.    960359.37           102.13 per sec.
oltp_write_only       41.10                         24.96                 1002.05               3.38                  4809.2500                120.0276                         1922.63 per sec.    960221.08           320.44 per sec.
select_random_points  14.21                         6.52                  1523.12               0.81                  18416.5000               119.9882                         1227.68 per sec.    959905.52           1227.68 per sec.
select_random_ranges  6.32                          1.84                  937.52                0.95                  65228.7500               119.9552                         4348.39 per sec.    959641.61           4348.39 per sec.
```

Benchmark from TiProxy with GCP # 上班時段
```
Tue Aug 19 08:55:52 AM UTC 2025
Combined report has been generated at sysbench_results_#8_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        1427.08                       342.54                4775.25               105.14                350.6250                 120.1034                         373.46 per sec.     960827.29           23.34 per sec.
oltp_read_write       3982.86                       1052.53               5687.05               160.90                115.6250                 121.6983                         150.58 per sec.     973586.63           7.53 per sec.
oltp_write_only       1869.60                       389.37                2610.38               51.42                 310.3750                 120.8506                         122.42 per sec.     966804.94           20.40 per sec.
select_random_points  369.77                        61.96                 1149.75               10.86                 1936.7500                120.0071                         129.10 per sec.     960056.82           129.10 per sec.
select_random_ranges  55.82                         33.45                 1516.40               11.21                 3587.5000                120.0066                         239.12 per sec.     960052.86           239.12 per sec.
```

Benchmark from TiDB with GCP # 離峰時段
```
Tue Aug 19 02:59:00 PM UTC 2025
Combined report has been generated at sysbench_results__tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        78.60                         43.32                 313.49                7.51                  2770.7500                120.0262                         2953.50 per sec.    960209.72           184.59 per sec.
oltp_read_write       97.55                         55.98                 126.46                11.40                 2144.3750                120.0355                         2857.34 per sec.    960283.71           142.87 per sec.
oltp_write_only       29.72                         19.91                 315.74                3.32                  6027.7500                120.0022                         2410.69 per sec.    960017.39           401.78 per sec.
select_random_points  4.41                          2.38                  31.54                 0.84                  50424.7500               119.9669                         3361.54 per sec.    959735.28           3361.54 per sec.
select_random_ranges  2.81                          1.81                  27.19                 0.90                  66306.0000               119.9535                         4420.27 per sec.    959628.38           4420.27 per sec.
```

Benchmark from TiProxy with GCP # 離峰時段
```
Tue Aug 19 02:59:01 PM UTC 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        183.21                        155.62                2689.49               97.25                 771.6250                 120.0795                         822.09 per sec.     960636.35           51.38 per sec.
oltp_read_write       219.36                        192.16                2265.10               133.76                624.8750                 120.0746                         832.04 per sec.     960596.86           41.60 per sec.
oltp_write_only       69.29                         61.98                 611.29                43.22                 1936.7500                120.0323                         774.33 per sec.     960258.54           129.06 per sec.
select_random_points  23.10                         20.22                 1069.88               10.80                 5936.2500                120.0017                         395.69 per sec.     960013.23           395.69 per sec.
select_random_ranges  21.89                         19.56                 1309.93               10.94                 6134.0000                120.0034                         408.86 per sec.     960026.96           408.86 per sec.
```

- IDC * 2 + GCP * 3 (兩機房同時執行 Sysbench 測試)
Cluster Summary
```
Tue Aug 19 14:58:29 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status   Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------   --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd       10.160.152.22  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd       10.160.152.23  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd       172.24.40.17   2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd       172.24.40.18   2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb     10.160.152.22  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb     10.160.152.23  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb     172.24.40.17   4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb     172.24.40.18   4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv     10.160.152.22  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.23:20160  tikv     10.160.152.23  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv     172.24.40.17   20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv     172.24.40.18   20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy  10.160.152.22  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy  10.160.152.23  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy  172.24.40.17   6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy  172.24.40.18   6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
```

Benchmark from TiDB with IDC # 上班時段
```
Tue Aug 19 15:45:13 CST 2025
Combined report has been generated at sysbench_results_#5_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        104.84                        69.37                 1037.30               13.90                 1730.1250                120.0206                         1844.12 per sec.    960164.69           115.26 per sec.
oltp_read_write       158.63                        103.38                1107.74               34.10                 1161.1250                120.0418                         1546.90 per sec.    960334.17           77.34 per sec.
oltp_write_only       49.21                         43.49                 1105.74               16.32                 2759.3750                120.0056                         1103.46 per sec.    960045.18           183.91 per sec.
select_random_points  14.73                         12.73                 646.67                6.22                  9423.5000                119.9755                         628.18 per sec.     959804.25           628.18 per sec.
select_random_ranges  55.82                         19.46                 743.06                6.19                  6167.8750                120.0045                         411.07 per sec.     960035.96           411.07 per sec.
```

Benchmark from TiProxy with IDC # 上班時段
```
Tue Aug 19 15:45:13 CST 2025
Combined report has been generated at sysbench_results_#5_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        116.80                        75.53                 712.72                16.09                 1589.3750                120.0476                         1693.81 per sec.    960380.83           105.86 per sec.
oltp_read_write       262.64                        108.85                2060.87               27.33                 1102.8750                120.0445                         1469.22 per sec.    960356.17           73.46 per sec.
oltp_write_only       297.92                        75.86                 1737.11               18.47                 1582.0000                120.0121                         632.58 per sec.     960096.52           105.43 per sec.
select_random_points  28.16                         20.68                 462.37                11.03                 5801.1250                119.9893                         386.67 per sec.     959914.52           386.67 per sec.
select_random_ranges  34.95                         23.45                 1782.15               11.24                 5117.1250                119.9936                         341.09 per sec.     959949.09           341.09 per sec.
```

Benchmark from TiDB with GCP # 上班時段
```
Tue Aug 19 07:41:33 AM UTC 2025
Combined report has been generated at sysbench_results_#6_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        106.75                        54.30                 1009.82               7.69                  2210.3750                120.0176                         2356.33 per sec.    960140.84           147.27 per sec.
oltp_read_write       127.81                        73.40                 3173.06               11.91                 1635.5000                120.0468                         2179.07 per sec.    960374.64           108.95 per sec.
oltp_write_only       33.12                         24.59                 776.52                3.45                  4880.2500                120.0064                         1951.73 per sec.    960050.95           325.29 per sec.
select_random_points  17.63                         10.16                 1525.97               5.75                  11807.8750               119.9947                         787.10 per sec.     959957.22           787.10 per sec.
select_random_ranges  46.63                         12.34                 620.73                5.89                  9724.5000                119.9921                         648.27 per sec.     959936.70           648.27 per sec.
```

Benchmark from TiProxy with GCP # 上班時段
```
Tue Aug 19 07:41:33 AM UTC 2025
Combined report has been generated at sysbench_results_#6_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        267.41                        206.61                4280.93               100.37                587.3750                 121.3580                         608.75 per sec.     970863.96           38.05 per sec.
oltp_read_write       657.93                        280.62                3366.28               136.03                428.0000                 120.1070                         569.57 per sec.     960856.30           28.48 per sec.
oltp_write_only       257.95                        107.93                2807.81               46.22                 1112.1250                120.0333                         444.54 per sec.     960266.02           74.09 per sec.
select_random_points  33.72                         25.37                 329.66                15.74                 4730.1250                120.0061                         315.28 per sec.     960048.41           315.28 per sec.
select_random_ranges  92.42                         38.43                 1789.86               15.88                 3126.7500                120.1614                         207.83 per sec.     961291.22           207.83 per sec.
```

Benchmark from TiDB with IDC # 離峰時段
```
Tue Aug 19 23:23:49 CST 2025
Combined report has been generated at sysbench_results_#11_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        89.16                         59.00                 1944.46               13.28                 2034.6250                120.0400                         2168.68 per sec.    960320.37           135.54 per sec.
oltp_read_write       114.72                        78.52                 357.22                29.28                 1528.6250                120.0316                         2036.53 per sec.    960253.06           101.83 per sec.
oltp_write_only       45.79                         37.00                 1362.43               15.54                 3243.7500                120.0031                         1297.15 per sec.    960024.92           216.19 per sec.
select_random_points  22.28                         16.67                 474.16                5.81                  7196.3750                119.9900                         479.67 per sec.     959920.30           479.67 per sec.
select_random_ranges  16.41                         13.32                 27.29                 5.97                  9007.8750                119.9858                         600.43 per sec.     959886.65           600.43 per sec.
```

Benchmark from TiProxy with IDC # 離峰時段
```
Tue Aug 19 23:23:50 CST 2025
Combined report has been generated at sysbench_results_#11_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        95.81                         66.20                 359.64                15.94                 1813.3750                120.0412                         1932.81 per sec.    960329.25           120.80 per sec.
oltp_read_write       125.52                        94.71                 634.43                34.15                 1267.3750                120.0322                         1688.62 per sec.    960257.21           84.43 per sec.
oltp_write_only       50.11                         40.05                 612.84                17.48                 2996.7500                120.0057                         1198.31 per sec.    960045.45           199.72 per sec.
select_random_points  22.28                         15.63                 740.13                6.15                  7674.6250                119.9822                         511.58 per sec.     959857.32           511.58 per sec.
select_random_ranges  17.32                         13.12                 32.93                 6.22                  9142.2500                119.9841                         609.41 per sec.     959873.18           609.41 per sec.
```

Benchmark from TiDB with GCP # 離峰時段
```
Tue Aug 19 03:23:48 PM UTC 2025
Combined report has been generated at sysbench_results_#12_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        80.03                         43.40                 1296.19               7.58                  2765.7500                120.0202                         2948.50 per sec.    960161.94           184.28 per sec.
oltp_read_write       102.97                        66.46                 361.93                12.32                 1806.1250                120.0350                         2406.55 per sec.    960280.16           120.33 per sec.
oltp_write_only       29.72                         18.72                 1127.70               3.39                  6410.5000                119.9968                         2563.91 per sec.    959974.03           427.32 per sec.
select_random_points  6.91                          2.33                  956.38                0.83                  51542.2500               119.9663                         3435.86 per sec.    959730.39           3435.86 per sec.
select_random_ranges  6.67                          2.23                  236.27                0.94                  53865.8750               119.9647                         3590.83 per sec.    959717.33           3590.83 per sec.
```

Benchmark from TiProxy with GCP # 離峰時段
```
Tue Aug 19 03:23:48 PM UTC 2025
Combined report has been generated at sysbench_results_#12_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        179.94                        149.38                609.02                97.80                 804.0000                 120.1008                         856.46 per sec.     960806.25           53.53 per sec.
oltp_read_write       223.34                        191.47                961.15                136.40                627.1250                 120.0780                         835.13 per sec.     960623.78           41.76 per sec.
oltp_write_only       80.03                         69.62                 601.03                45.72                 1724.1250                120.0252                         689.31 per sec.     960201.59           114.89 per sec.
select_random_points  27.66                         21.86                 858.60                11.20                 5490.6250                120.0040                         365.99 per sec.     960031.84           365.99 per sec.
select_random_ranges  22.28                         18.49                 91.00                 11.15                 6488.5000                120.0007                         432.50 per sec.     960005.25           432.50 per sec.
```

啟用 proxy.local-tidb-only 沒有用，再重新理解。
```
tiproxy_servers:
  - host: 172.24.40.17
    port: 6000
    status_port: 6001
    config:
      proxy.local-tidb-only: true
```

RPS by TiDB from IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.600                0.00            6.002           1666.12         1
single_thread_multi_conn  10000           0.624                0.00            6.244           1601.63         1
multi_thread_multi_conn   10000           1.817                0.00            18.182          550.00          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.610                0.00            6.104           1638.31         1
single_thread_multi_conn  10000           0.721                0.00            7.319           1366.33         1
multi_thread_multi_conn   10000           23.275               0.00            2.670           3745.56         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.545                0.00            5.457           1832.40         1
single_thread_multi_conn  10000           0.688                0.00            7.417           1348.33         1
multi_thread_multi_conn   10000           42.806               0.00            2.690           3716.86         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.666                0.00            6.662           1501.03         1
single_thread_multi_conn  10000           0.746                0.00            7.743           1291.51         1
multi_thread_multi_conn   10000           65.753               23.24           4.012           2492.38         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.627                0.00            6.274           1593.94         1
single_thread_multi_conn  10000           0.751                0.00            8.051           1242.02         1
multi_thread_multi_conn   10000           26.391               4.00            3.565           2804.78         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.597                0.00            5.972           1674.34         1
single_thread_multi_conn  10000           0.745                0.00            8.315           1202.66         1
multi_thread_multi_conn   10000           22.936               10.49           4.379           2283.79         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.656                0.00            6.563           1523.79         1
single_thread_multi_conn  10000           0.746                0.00            8.580           1165.56         1
multi_thread_multi_conn   10000           21.062               8.77            6.277           1593.01         1000
========================================================================================================================
```

RPS by TiProxy from IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           1.009                0.00            10.092          990.84          1
single_thread_multi_conn  10000           1.029                0.00            10.300          970.83          1
multi_thread_multi_conn   10000           3.217                0.00            32.181          310.74          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           1.019                0.00            10.195          980.88          1
single_thread_multi_conn  10000           1.070                0.00            10.964          912.11          1
multi_thread_multi_conn   10000           24.772               0.00            2.733           3659.35         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.995                0.00            9.962           1003.82         1
single_thread_multi_conn  10000           1.082                0.00            11.287          885.96          1
multi_thread_multi_conn   10000           29.449               0.00            1.943           5147.61         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.671                0.00            6.715           1489.11         1
single_thread_multi_conn  10000           1.847                0.00            20.309          492.39          1
multi_thread_multi_conn   10000           56.849               0.00            2.879           3473.39         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.947                0.00            9.476           1055.31         1
single_thread_multi_conn  10000           2.349                0.00            26.161          382.24          1
multi_thread_multi_conn   10000           48.835               0.00            2.314           4320.73         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.954                0.00            9.552           1046.95         1
single_thread_multi_conn  10000           1.464                0.00            16.884          592.29          1
multi_thread_multi_conn   10000           52.644               0.00            5.662           1766.06         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           1.050                0.00            10.513          951.23          1
single_thread_multi_conn  10000           1.899                0.00            22.968          435.39          1
multi_thread_multi_conn   10000           35.884               0.00            3.935           2541.57         1000
========================================================================================================================
```

RPS by TiDB from GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.346                0.00            3.465           2886.16         1
single_thread_multi_conn  10000           0.352                0.00            3.518           2842.52         1
multi_thread_multi_conn   10000           1.018                0.00            10.188          981.52          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.344                0.00            3.445           2902.67         1
single_thread_multi_conn  10000           0.373                0.00            3.796           2634.46         1
multi_thread_multi_conn   10000           30.415               0.00            3.373           2964.71         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.348                0.00            3.481           2873.10         1
single_thread_multi_conn  10000           0.375                0.00            3.872           2582.97         1
multi_thread_multi_conn   10000           23.797               0.00            1.529           6538.41         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.355                0.00            3.551           2816.42         1
single_thread_multi_conn  10000           0.380                0.00            3.949           2532.36         1
multi_thread_multi_conn   10000           31.225               2.50            1.845           5419.67         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.358                0.00            3.583           2791.13         1
single_thread_multi_conn  10000           0.382                0.00            4.124           2424.91         1
multi_thread_multi_conn   10000           49.887               0.00            1.882           5314.17         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.358                0.00            3.578           2794.52         1
single_thread_multi_conn  10000           0.386                0.00            4.329           2310.13         1
multi_thread_multi_conn   10000           20.769               0.00            5.948           1681.14         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.349                0.00            3.496           2860.72         1
single_thread_multi_conn  10000           0.383                0.00            5.379           1858.99         1
multi_thread_multi_conn   10000           13.792               0.00            3.568           2802.84         1000
========================================================================================================================
```

RPS by TiProxy from GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.986               0.00            109.881         91.01           1
single_thread_multi_conn  10000           11.310               0.00            113.129         88.39           1
multi_thread_multi_conn   10000           34.930               0.00            349.312         28.63           1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.137               0.00            111.401         89.77           1
single_thread_multi_conn  10000           28.249               0.00            284.618         35.13           1
multi_thread_multi_conn   10000           200.385              0.00            22.900          436.68          100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.826               0.00            128.396         77.88           1
single_thread_multi_conn  10000           13.121               0.00            136.675         73.17           1
multi_thread_multi_conn   10000           38.948               0.00            3.662           2730.51         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.457               0.00            124.595         80.26           1
single_thread_multi_conn  10000           12.499               0.00            132.218         75.63           1
multi_thread_multi_conn   10000           38.493               0.00            2.064           4844.78         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.307               0.00            123.102         81.23           1
single_thread_multi_conn  10000           12.848               0.00            140.845         71.00           1
multi_thread_multi_conn   10000           58.567               0.00            2.470           4047.88         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           13.826               0.00            138.287         72.31           1
single_thread_multi_conn  10000           13.075               0.00            149.274         66.99           1
multi_thread_multi_conn   10000           55.983               0.00            2.668           3748.27         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.483               0.00            114.858         87.06           1
single_thread_multi_conn  10000           11.435               0.00            138.321         72.30           1
multi_thread_multi_conn   10000           44.595               0.00            3.152           3172.17         1000
========================================================================================================================
```

Benchmark from TiDB with IDC # 離峰
```
Wed Aug 20 21:13:41 CST 2025
Combined report has been generated at sysbench_results_#20_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        75.82                         32.64                 300.12                7.77                  3676.5000                120.0052                         3919.76 per sec.    960041.67           244.98 per sec.
oltp_read_write       86.00                         40.38                 298.73                17.01                 2971.5000                119.9999                         3961.30 per sec.    959999.55           198.07 per sec.
oltp_write_only       25.28                         16.93                 523.08                3.61                  7087.1250                119.9859                         2834.46 per sec.    959887.36           472.41 per sec.
select_random_points  3.75                          2.20                  26.08                 0.70                  54512.5000               119.9232                         3634.02 per sec.    959385.80           3634.02 per sec.
select_random_ranges  6.32                          2.09                  59.41                 0.74                  57382.0000               119.9218                         3825.19 per sec.    959374.27           3825.19 per sec.
```

Benchmark from TiProxy with IDC # 離峰
```
Wed Aug 20 21:13:41 CST 2025
Combined report has been generated at sysbench_results_#20_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        81.48                         38.83                 174.99                9.60                  3091.2500                120.0204                         3295.50 per sec.    960163.15           205.97 per sec.
oltp_read_write       97.55                         50.12                 1855.20               13.83                 2394.8750                120.0197                         3190.88 per sec.    960157.75           159.54 per sec.
oltp_write_only       27.66                         18.00                 403.05                4.20                  6667.8750                119.9927                         2666.71 per sec.    959941.84           444.45 per sec.
select_random_points  7.43                          3.39                  1730.74               0.85                  35351.1250               119.9470                         2356.53 per sec.    959576.25           2356.53 per sec.
select_random_ranges  7.30                          2.58                  214.66                0.85                  46506.0000               119.9404                         3100.18 per sec.    959523.07           3100.18 per sec.
```

Benchmark from TiDB with GCP # 離峰
```
Wed Aug 20 01:36:28 PM UTC 2025
Combined report has been generated at sysbench_results_#21_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per secon
d
oltp_read_only        94.10                         70.24                 172.12                12.66                 1709.2500                120.0607                         1821.76 per sec.    960485.67           113.86 per sec.
oltp_read_write       132.49                        105.42                352.00                22.87                 1139.0000                120.0733                         1517.03 per sec.    960586.53           75.85 per sec.
oltp_write_only       48.34                         38.44                 1009.48               13.43                 3122.5000                120.0186                         1248.58 per sec.    960148.75           208.10 per sec.
select_random_points  24.83                         17.97                 1736.13               5.86                  6678.2500                120.0043                         445.15 per sec.     960034.21           445.15 per sec.
select_random_ranges  16.71                         15.80                 1714.74               6.05                  7593.0000                119.9968                         506.14 per sec.     959974.25           506.14 per sec.
```

Benchmark from TiProxy with GCP # 離峰
```
Wed Aug 20 01:36:28 PM UTC 2025
Combined report has been generated at sysbench_results_#21_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per secon
d
oltp_read_only        167.44                        129.50                380.83                93.13                 927.2500                 120.0812                         988.13 per sec.     960649.33           61.76 per sec.
oltp_read_write       200.47                        158.02                730.20                122.19                759.8750                 120.0749                         1011.71 per sec.    960599.26           50.59 per sec.
oltp_write_only       55.82                         48.25                 439.22                39.06                 2487.6250                120.0245                         994.63 per sec.     960195.80           165.77 per sec.
select_random_points  12.30                         9.12                  1498.51               5.70                  13163.1250               119.9914                         877.45 per sec.     959931.08           877.45 per sec.
select_random_ranges  11.87                         7.93                  25.42                 5.84                  15126.5000               119.9899                         1008.32 per sec.    959918.97           1008.32 per sec.
```

Benchmark from TiDB with IDC both Execute # 離峰
```
Wed Aug 20 22:27:19 CST 2025
Combined report has been generated at sysbench_results_#22_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        77.19                         37.03                 305.67                7.79                  3241.5000                120.0199                         3455.64 per sec.    960159.38           215.98 per sec.
oltp_read_write       89.16                         49.21                 1825.70               16.94                 2439.0000                120.0251                         3250.18 per sec.    960201.19           162.51 per sec.
oltp_write_only       26.68                         18.17                 348.81                4.00                  6602.5000                119.9836                         2640.71 per sec.    959868.92           440.12 per sec.
select_random_points  3.55                          2.10                  72.49                 0.74                  56986.5000               119.9284                         3798.94 per sec.    959427.29           3798.94 per sec.
select_random_ranges  6.55                          2.08                  220.76                0.74                  57637.2500               119.9302                         3842.21 per sec.    959441.95           3842.21 per sec.
```

Benchmark from TiProxy with IDC both Execute # 離峰
```
Wed Aug 20 22:27:19 CST 2025
Combined report has been generated at sysbench_results_#22_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        81.48                         47.72                 1595.61               9.84                  2515.0000                120.0086                         2681.22 per sec.    960069.02           167.58 per sec.
oltp_read_write       106.75                        67.44                 1710.98               16.09                 1780.2500                120.0527                         2371.77 per sec.    960421.88           118.59 per sec.
oltp_write_only       30.26                         19.90                 653.24                4.23                  6028.8750                119.9935                         2411.09 per sec.    959948.24           401.85 per sec.
select_random_points  8.43                          3.35                  718.70                0.78                  35762.6250               119.9482                         2384.03 per sec.    959585.66           2384.03 per sec.
select_random_ranges  7.30                          3.95                  640.65                0.91                  30369.3750               119.9557                         2024.49 per sec.    959645.81           2024.49 per sec.
```

Benchmark from TiDB with GCP both Execute # 離峰
```
Wed Aug 20 02:27:18 PM UTC 2025
Combined report has been generated at sysbench_results_#23_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        90.78                         63.31                 340.18                12.45                 1896.0000                120.0411                         2021.01 per sec.    960329.00           126.31 per sec.
oltp_read_write       125.52                        98.29                 366.91                27.70                 1221.2500                120.0402                         1627.20 per sec.    960321.45           81.36 per sec.
oltp_write_only       47.47                         38.24                 650.83                13.91                 3138.7500                120.0162                         1255.14 per sec.    960129.99           209.19 per sec.
select_random_points  23.10                         17.64                 286.74                10.49                 6801.1250                119.9989                         453.35 per sec.     959990.86           453.35 per sec.
select_random_ranges  16.71                         13.96                 243.49                5.87                  8598.6250                119.9995                         573.17 per sec.     959996.01           573.17 per sec.
```

Benchmark from TiProxy with GCP both Execute # 離峰
```
Wed Aug 20 02:27:18 PM UTC 2025
Combined report has been generated at sysbench_results_#23_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        183.21                        145.31                2448.17               90.18                 826.2500                 120.0609                         880.58 per sec.     960487.32           55.04 per sec.
oltp_read_write       227.40                        186.74                1874.16               115.94                643.1250                 120.0959                         856.35 per sec.     960767.00           42.82 per sec.
oltp_write_only       58.92                         50.12                 932.64                33.31                 2394.7500                120.0189                         957.55 per sec.     960150.93           159.59 per sec.
select_random_points  15.55                         9.53                  1705.63               5.53                  12594.5000               119.9952                         839.55 per sec.     959961.28           839.55 per sec.
select_random_ranges  12.08                         9.36                  669.08                5.65                  12820.5000               119.9945                         854.62 per sec.     959955.73           854.62 per sec.
```

- IDC * 3 + GCP * 2 (Scale out TiDB 3 -> 9 的效能影響)
Cluster Summary
```
Fri Aug 22 20:49:23 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.3
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://172.24.40.17:2379/dashboard
Dashboard URLs:     http://172.24.40.17:2379/dashboard
ID                  Role     Host          Ports        OS/Arch       Status  Data Dir                    Deploy Dir
--                  ----     ----          -----        -------       ------  --------                    ----------
172.24.40.17:2379   pd       172.24.40.17  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.18:2379   pd       172.24.40.18  2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.19:2379   pd       172.24.40.19  2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:4000   tidb     172.24.40.17  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.17:4001   tidb     172.24.40.17  4001/10081   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4001
172.24.40.17:4002   tidb     172.24.40.17  4002/10082   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4002
172.24.40.18:4000   tidb     172.24.40.18  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.18:4001   tidb     172.24.40.18  4001/10081   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4001
172.24.40.18:4002   tidb     172.24.40.18  4002/10082   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4002
172.24.40.19:4000   tidb     172.24.40.19  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.19:4001   tidb     172.24.40.19  4001/10081   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4001
172.24.40.19:4002   tidb     172.24.40.19  4002/10082   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4002
172.24.40.17:20160  tikv     172.24.40.17  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:6000   tiproxy  172.24.40.17  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000   tiproxy  172.24.40.18  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.19:6000   tiproxy  172.24.40.19  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
```

RPS by TiProxy from IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.603                0.00            6.036           1656.82         1
single_thread_multi_conn  10000           0.608                0.00            6.080           1644.64         1
multi_thread_multi_conn   10000           2.922                0.00            29.235          342.05          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.904                0.00            9.043           1105.78         1
single_thread_multi_conn  10000           1.043                0.00            10.657          938.38          1
multi_thread_multi_conn   10000           27.333               0.00            3.049           3279.77         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.800                0.00            8.009           1248.53         1
single_thread_multi_conn  10000           0.939                0.00            9.771           1023.42         1
multi_thread_multi_conn   10000           23.915               0.00            1.542           6484.21         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.872                0.00            8.722           1146.55         1
single_thread_multi_conn  10000           0.938                0.00            9.860           1014.16         1
multi_thread_multi_conn   10000           38.827               0.00            2.854           3503.64         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.930                0.00            9.305           1074.72         1
single_thread_multi_conn  10000           0.912                0.00            10.636          940.24          1
multi_thread_multi_conn   10000           38.870               0.00            2.445           4089.65         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.801                0.00            8.012           1248.05         1
single_thread_multi_conn  10000           0.915                0.00            10.650          939.00          1
multi_thread_multi_conn   10000           41.807               0.00            3.432           2913.89         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.776                0.00            7.772           1286.61         1
single_thread_multi_conn  10000           0.949                0.00            12.288          813.80          1
multi_thread_multi_conn   10000           32.753               0.00            2.866           3489.45         1000
========================================================================================================================
```

---

## TPC-C benchmark
> 使用 Percona-Lab/tpcc-mysql ; 不使用 TiUP Bench ; 根據 TiDB 優化過?

### 只參照 sysbench 的問題
- sysbench交易太單純 → 產能被高估
- 均勻存取 → 掩蓋熱點與鎖衝突
- 忽略日誌/複寫 → 產品上線問題逐漸浮現

### 為什麼需要 TPC-C
- 交易真實性：涵蓋五種交易類型，比例固定，能模擬 ERP / 訂單系統的實際行為。
- 複雜關聯：多表 JOIN、二級索引、外鍵依賴，能觸發行鎖、間隙鎖與死鎖情境。
- 查詢計畫穩定性：選擇性變化與複合索引，能反映統計異動導致的計畫抖動。
- HA/複寫檢驗：能觀察叢集提交延遲，驗證同步/半同步複寫下的 SLA。
- 資料寫入壓力：TPC-C 有大量新增/更新，能真實測試系統「寫入資料」的穩定性與延遲，而不是只看讀取速度。
- 併發擴展性：倉庫數量能調整，模擬使用者數成長時，觀察系統是否能隨規模放大而維持效能。
- 與 sysbench 互補：sysbench 適合微調，TPC-C 則提供端到端 SLA 與產能 (tpmC) 評估。

### [TPC-C benchmark 需要關注哪些指標](https://blog.csdn.net/justlpf/article/details/127516283)
- tpmC/TPS：越高代表系統能處理的交易產能越強。
- 延遲 (P95、P99)：顯示交易響應時間分佈，評估 SLA 是否能在實務場景達成。
- System Load 指標：判斷效能瓶頸主要在計算、記憶體，或磁碟 I/O。

### IDC * 3
```
[Summary] DELIVERY - Takes(s): 299.7, Count: 2858, TPM: 572.2, Sum(ms): 282137.9, Avg(ms): 98.7, 50th(ms): 75.5, 90th(ms): 176.2, 95th(ms): 218.1, 99th(ms): 352.3, 99.9th(ms): 486.5, Max(ms): 604.0
[Summary] DELIVERY_ERR - Takes(s): 299.7, Count: 2, TPM: 0.4, Sum(ms): 94.5, Avg(ms): 46.8, 50th(ms): 7.9, 90th(ms): 88.1, 95th(ms): 88.1, 99th(ms): 88.1, 99.9th(ms): 88.1, Max(ms): 88.1
[Summary] NEW_ORDER - Takes(s): 299.9, Count: 33007, TPM: 6602.7, Sum(ms): 1034428.7, Avg(ms): 31.4, 50th(ms): 24.1, 90th(ms): 60.8, 95th(ms): 71.3, 99th(ms): 88.1, 99.9th(ms): 109.1, Max(ms): 1040.2
[Summary] NEW_ORDER_ERR - Takes(s): 299.9, Count: 2, TPM: 0.4, Sum(ms): 75.1, Avg(ms): 37.5, 50th(ms): 28.3, 90th(ms): 48.2, 95th(ms): 48.2, 99th(ms): 48.2, 99.9th(ms): 48.2, Max(ms): 48.2
[Summary] ORDER_STATUS - Takes(s): 299.8, Count: 2954, TPM: 591.3, Sum(ms): 19726.8, Avg(ms): 6.7, 50th(ms): 6.8, 90th(ms): 9.4, 95th(ms): 10.5, 99th(ms): 14.7, 99.9th(ms): 29.4, Max(ms): 37.7
[Summary] PAYMENT - Takes(s): 299.9, Count: 31773, TPM: 6355.8, Sum(ms): 1617272.1, Avg(ms): 50.9, 50th(ms): 52.4, 90th(ms): 71.3, 95th(ms): 79.7, 99th(ms): 96.5, 99.9th(ms): 121.6, Max(ms): 1040.2
[Summary] PAYMENT_ERR - Takes(s): 299.9, Count: 6, TPM: 1.2, Sum(ms): 95.3, Avg(ms): 16.2, 50th(ms): 11.0, 90th(ms): 28.3, 95th(ms): 39.8, 99th(ms): 39.8, 99.9th(ms): 39.8, Max(ms): 39.8
[Summary] STOCK_LEVEL - Takes(s): 299.8, Count: 2912, TPM: 582.8, Sum(ms): 30707.6, Avg(ms): 10.5, 50th(ms): 10.5, 90th(ms): 13.6, 95th(ms): 15.7, 99th(ms): 21.0, 99.9th(ms): 31.5, Max(ms): 48.2
tpmC: 6602.7, tpmTotal: 14704.8, efficiency: 51343.0%
```