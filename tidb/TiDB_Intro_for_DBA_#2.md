# TiDB Intro for DBA #2

## Benchmark Architecture

### IDC Only (passthrough TiProxy)
```
╔═══════════════════════════════╗
║         Client / App         ║
╚═══════════════════════════════╝
              │
              ▼
╔════════════════════════════════════════════╗
║  A10 Load Balancer (VIP: x.x.x.x:6000)    ║
╚════════════════════════════════════════════╝
              │
              ▼
╔════════════════════════════════════════════════════════════╗
║                        TiProxy 層                        ║
║ ┌─────────────┬─────────────┬─────────────┐              ║
║ │ tiproxy-1   │ tiproxy-2   │ tiproxy-3   │              ║
║ │172.24.40.17 │172.24.40.18 │172.24.40.19 │              ║
║ │port: 6000   │port: 6000   │port: 6000   │              ║
║ └─────────────┴─────────────┴─────────────┘              ║
╚════════════════════════════════════════════════════════════╝
              │
              ▼
╔════════════════════════════════════════════════════════════╗
║                         TiDB 層                          ║
║ ┌─────────────┬─────────────┬─────────────┐              ║
║ │ TiDB-1      │ TiDB-2      │ TiDB-3      │              ║
║ │172.24.40.17 │172.24.40.18 │172.24.40.19 │              ║
║ │port: 4000   │port: 4000   │port: 4000   │              ║
║ └─────────────┴─────────────┴─────────────┘              ║
╚════════════════════════════════════════════════════════════╝
              │    │─────────────DistSQL / KV API──────────►│
              ▼                                              ▼
╔══════════════════════════════╦══════════════════════════════╗
║       PD 層                 ║        TiKV 層               ║
║ ┌─────────────┬────────────┐║ ┌─────────────┬────────────┐ ║
║ │ PD-1        │ PD-2       │║ │ TiKV-1      │ TiKV-2     │ ║
║ │172.24.40.17 │172.24.40.18│║ │172.24.40.17 │172.24.40.18│ ║
║ │port: 2379   │port: 2379  │║ │port:20160   │port:20160  │ ║
║ └─────────────┴────────────┘║ └─────────────┴────────────┘ ║
║ PD-3: 172.24.40.19:2379     ║ TiKV-3: 172.24.40.19:20160   ║
╚══════════════════════════════╩══════════════════════════════╝
```

### IDC or GCP Only (passthrough TiDB)
```
╔═══════════════════════════════╗
║         Client / App         ║
╚═══════════════════════════════╝
              │
              ▼
╔════════════════════════════════════════════╗
║  A10 Load Balancer (VIP: x.x.x.x:4000)    ║
╚════════════════════════════════════════════╝
              │
              ▼
╔════════════════════════════════════════════════════════════╗
║                         TiDB 層                          ║
║ ┌─────────────┬─────────────┬─────────────┐              ║
║ │ TiDB-1      │ TiDB-2      │ TiDB-3      │              ║
║ │172.24.40.17 │172.24.40.18 │172.24.40.19 │              ║
║ │port: 4000   │port: 4000   │port: 4000   │              ║
║ └─────────────┴─────────────┴─────────────┘              ║
╚════════════════════════════════════════════════════════════╝
              │    │─────────────DistSQL / KV API──────────►│
              ▼                                              ▼
╔══════════════════════════════╦══════════════════════════════╗
║       PD 層                 ║        TiKV 層               ║
║ ┌─────────────┬────────────┐║ ┌─────────────┬────────────┐ ║
║ │ PD-1        │ PD-2       │║ │ TiKV-1      │ TiKV-2     │ ║
║ │172.24.40.17 │172.24.40.18│║ │172.24.40.17 │172.24.40.18│ ║
║ │port: 2379   │port: 2379  │║ │port:20160   │port:20160  │ ║
║ └─────────────┴────────────┘║ └─────────────┴────────────┘ ║
║ PD-3: 172.24.40.19:2379     ║ TiKV-3: 172.24.40.19:20160   ║
╚══════════════════════════════╩══════════════════════════════╝
```

### Benchmark architecture environment with mixed IDC and GCP
```
╔════════════════════════════════════════════╗ ╔════════════════════════════════════════════╗
║         Client / App (#GCP)                ║ ║         Client / App (#IDC)                ║
╚════════════════════════════════════════════╝ ╚════════════════════════════════════════════╝
                       │                                              │
                       ▼                                              ▼
╔════════════════════════════════════════════╗ ╔════════════════════════════════════════════╗
║ GCP Load Balancer (VIP: 10.160.152.25:4000)║ ║ AIDC Load Balancer (VIP: 172.24.40.21:4000)║
║ GCP Load Balancer (VIP: 10.160.152.26:6000)║ ║ AIDC Load Balancer (VIP: 172.24.40.25:6000)║
╚════════════════════════════════════════════╝ ╚════════════════════════════════════════════╝
                       │                                              │
                       ▼                                              ▼
           ╔══════════════════════════════════════════════════════════════════════╗
           ║                        Unified TiDB Cluster                          ║
           ║                                                                      ║
           ║ ┌───────────────────────────────┐       ┌────────────────────────────┐║
           ║ │           GCP 區域            │       │          原 IDC 區域        │║
           ║ │                               │       │                            │║
           ║ │ ┌───────────────────────────┐ │       │ ┌────────────────────────┐ │║
           ║ │ │        TiProxy 層         │ │       │ │       TiProxy 層       │ │║
           ║ │ │ tiproxy-1 10.160.152.21   │ │       │ │ tiproxy-1 172.24.40.17 │ │║
           ║ │ │ tiproxy-2 10.160.152.22   │ │       │ │ tiproxy-2 172.24.40.18 │ │║
           ║ │ └───────────────────────────┘ │       │ │ tiproxy-3 172.24.40.19 │ │║
           ║ │             │                 │       │ └────────────────────────┘ │║
           ║ │             ▼                 │       │           │                │║
           ║ │ ┌───────────────────────────┐ │       │ ┌────────────────────────┐ │║
           ║ │ │         TiDB 層           │ │       │ │        TiDB 層         │ │║
           ║ │ │ TiDB-1 10.160.152.21:4000 │ │       │ │ TiDB-1 172.24.40.17    │ │║
           ║ │ │ TiDB-2 10.160.152.22:4000 │ │       │ │ TiDB-2 172.24.40.18    │ │║
           ║ │ └───────────────────────────┘ │       │ │ TiDB-3 172.24.40.19    │ │║
           ║ │             │                 │       │ └────────────────────────┘ │║
           ║ │             ▼                 │       │           │                │║
           ║ │ ┌───────────────────────────┐ │⇄⇄⇄⇄⇄⇄⇄│ ┌────────────────────────┐ │║
           ║ │ │          PD 層            │ │       │ │         PD 層          │ │║
           ║ │ │ PD-1   10.160.152.21:2379 │ │       │ │ PD-1   172.24.40.17    │ │║
           ║ │ │ PD-2   10.160.152.22:2379 │ │       │ │ PD-2   172.24.40.18    │ │║
           ║ │ └───────────────────────────┘ │       │ │ PD-3   172.24.40.19    │ │║
           ║ │             │                 │       │ └────────────────────────┘ │║
           ║ │             ▼                 │       │           │                │║
           ║ │ ┌───────────────────────────┐ │⇄⇄⇄⇄⇄⇄⇄│ ┌────────────────────────┐ │║
           ║ │ │         TiKV 層           │ │       │ │        TiKV 層         │ │║
           ║ │ │ TiKV-1 10.160.152.21:20160│ │       │ │ TiKV-1 172.24.40.17    │ │║
           ║ │ │ TiKV-2 10.160.152.22:20160│ │       │ │ TiKV-2 172.24.40.18    │ │║
           ║ │ └───────────────────────────┘ │       │ │ TiKV-3 172.24.40.19    │ │║
           ║ │                               │       │ └────────────────────────┘ │║
           ║ └───────────────────────────────┘       └────────────────────────────┘║
           ║                                                                      ║
           ╚══════════════════════════════════════════════════════════════════════╝
```

---

## RPS Benchmark

### Environment Phase

#### Deploy on VM

- IDC * 1
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# date ; tiup cluster display tidb-demo
Fri Aug  1 10:07:42 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://172.24.40.18:2379/dashboard
Dashboard URLs:     http://172.24.40.18:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                  Role        Host          Ports        OS/Arch       Status   Data Dir                         Deploy Dir
--                  ----        ----          -----        -------       ------   --------                         ----------
172.24.40.20:3000   grafana     172.24.40.20  3000         linux/x86_64  Up       -                                /data/tidb-deploy/grafana-3000
172.24.40.18:2379   pd          172.24.40.18  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090   prometheus  172.24.40.20  9090/12020   linux/x86_64  Up       /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
172.24.40.18:4000   tidb        172.24.40.18  4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
172.24.40.18:20160  tikv        172.24.40.18  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.18:6000   tiproxy     172.24.40.18  6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 6
```

RPS From TiDB
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.562                0.00            5.619           1779.71         1
single_thread_multi_conn  10000           0.579                0.00            5.793           1726.12         1
multi_thread_multi_conn   10000           1.283                0.00            12.844          778.56          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.609                0.00            6.095           1640.71         1
single_thread_multi_conn  10000           0.514                0.00            5.222           1915.11         1
multi_thread_multi_conn   10000           19.550               0.00            2.084           4797.60         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.586                0.00            5.868           1704.16         1
single_thread_multi_conn  10000           0.505                0.00            5.204           1921.71         1
multi_thread_multi_conn   10000           36.055               0.00            2.024           4939.65         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.572                0.00            5.721           1747.89         1
single_thread_multi_conn  10000           0.509                0.00            5.284           1892.57         1
multi_thread_multi_conn   10000           44.815               0.00            2.095           4772.84         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.551                0.00            5.512           1814.25         1
single_thread_multi_conn  10000           0.524                0.00            5.650           1770.06         1
multi_thread_multi_conn   10000           93.319               0.00            2.449           4083.94         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.575                0.00            5.754           1737.91         1
single_thread_multi_conn  10000           0.500                0.00            5.540           1805.19         1
multi_thread_multi_conn   10000           119.752              0.00            3.245           3081.47         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.587                0.00            5.877           1701.66         1
single_thread_multi_conn  10000           0.496                0.00            5.806           1722.37         1
multi_thread_multi_conn   10000           151.809              0.00            3.116           3208.78         1000
========================================================================================================================
```

RPS From TiDB passthrough A10 NAT
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.533                0.00            5.331           1875.67         1
single_thread_multi_conn  10000           0.525                0.00            5.252           1904.14         1
multi_thread_multi_conn   10000           1.365                0.00            13.661          731.98          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.554                0.00            5.540           1804.97         1
single_thread_multi_conn  10000           0.546                0.00            5.546           1803.13         1
multi_thread_multi_conn   10000           27.986               0.00            3.011           3320.80         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.573                0.00            5.739           1742.47         1
single_thread_multi_conn  10000           0.543                0.00            5.782           1729.42         1
multi_thread_multi_conn   10000           61.253               13.03           4.217           2371.37         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.517                0.00            5.171           1933.96         1
single_thread_multi_conn  10000           0.609                0.00            6.318           1582.82         1
multi_thread_multi_conn   10000           72.621               10.22           3.663           2729.77         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.591                0.00            5.919           1689.58         1
single_thread_multi_conn  10000           0.601                0.00            6.446           1551.41         1
multi_thread_multi_conn   10000           147.603              3.97            6.905           1448.33         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.549                0.00            5.493           1820.59         1
single_thread_multi_conn  10000           0.607                0.00            6.735           1484.83         1
multi_thread_multi_conn   10000           47.002               23.36           6.823           1465.61         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.554                0.00            5.544           1803.66         1
single_thread_multi_conn  10000           0.580                0.00            6.619           1510.77         1
multi_thread_multi_conn   10000           172.086              5.73            5.968           1675.65         1000
========================================================================================================================
```

RPS From TiProxy
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.675                0.00            6.749           1481.66         1
single_thread_multi_conn  10000           0.660                0.00            6.605           1514.11         1
multi_thread_multi_conn   10000           1.912                0.00            19.132          522.68          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.597                0.00            5.975           1673.69         1
single_thread_multi_conn  10000           0.689                0.00            7.018           1424.84         1
multi_thread_multi_conn   10000           28.626               0.00            3.013           3318.58         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.600                0.00            6.005           1665.42         1
single_thread_multi_conn  10000           0.640                0.00            6.636           1507.05         1
multi_thread_multi_conn   10000           55.745               0.00            2.982           3353.27         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.611                0.00            6.113           1635.88         1
single_thread_multi_conn  10000           0.651                0.00            6.832           1463.79         1
multi_thread_multi_conn   10000           70.404               0.00            3.136           3189.01         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.648                0.00            6.488           1541.19         1
single_thread_multi_conn  10000           0.699                0.00            7.622           1312.00         1
multi_thread_multi_conn   10000           135.323              0.00            3.204           3120.87         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.602                0.00            6.029           1658.55         1
single_thread_multi_conn  10000           0.639                0.00            7.229           1383.41         1
multi_thread_multi_conn   10000           201.128              0.00            3.486           2869.02         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.598                0.00            5.981           1671.88         1
single_thread_multi_conn  10000           0.658                0.00            7.720           1295.27         1
multi_thread_multi_conn   10000           226.734              0.00            3.314           3017.78         1000
========================================================================================================================
```

RPS From TiProxy passthrough A10 NAT
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.703                0.00            7.030           1422.43         1
single_thread_multi_conn  10000           0.682                0.00            6.826           1464.95         1
multi_thread_multi_conn   10000           2.047                0.00            20.483          488.20          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.685                0.00            6.855           1458.79         1
single_thread_multi_conn  10000           0.707                0.00            7.225           1384.08         1
multi_thread_multi_conn   10000           36.111               0.00            3.870           2583.71         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.659                0.00            6.595           1516.33         1
single_thread_multi_conn  10000           0.727                0.00            7.550           1324.56         1
multi_thread_multi_conn   10000           64.722               0.00            3.607           2772.31         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.778                0.00            7.787           1284.12         1
single_thread_multi_conn  10000           0.758                0.00            7.945           1258.65         1
multi_thread_multi_conn   10000           93.353               7.61            4.071           2456.69         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.731                0.00            7.313           1367.41         1
single_thread_multi_conn  10000           0.727                0.00            7.962           1255.96         1
multi_thread_multi_conn   10000           161.022              0.00            3.774           2649.55         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.769                0.00            7.694           1299.79         1
single_thread_multi_conn  10000           0.735                0.00            8.418           1187.92         1
multi_thread_multi_conn   10000           262.926              6.58            7.292           1371.37         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.688                0.00            6.889           1451.55         1
single_thread_multi_conn  10000           0.715                0.00            8.476           1179.81         1
multi_thread_multi_conn   10000           299.571              0.00            6.788           1473.18         1000
========================================================================================================================
```

---

- GCP * 1

Cluster Summary
```
[root@l-k8s-labroom-1 ~]# date ; tiup cluster display tidb-demo
Thu Aug  7 11:24:01 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://172.24.40.17:2379/dashboard
Dashboard URLs:     http://172.24.40.17:2379/dashboard
Grafana URL:        http://172.24.40.17:3000
ID                   Role        Host           Ports        OS/Arch       Status   Data Dir                         Deploy Dir
--                   ----        ----           -----        -------       ------   --------                         ----------
172.24.40.17:3000    grafana     172.24.40.17   3000         linux/x86_64  Up       -                                /data/tidb-deploy/grafana-3000
172.24.40.17:2379    pd          172.24.40.17   2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.17:9090    prometheus  172.24.40.17   9090/12020   linux/x86_64  Up       /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
10.160.152.22:4000   tidb        10.160.152.22  4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
10.160.152.22:20160  tikv        10.160.152.22  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.22:6000   tiproxy     10.160.152.22  6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 6
```

RPS From TiDB ; Connect From IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.578               0.00            115.809         86.35           1
single_thread_multi_conn  10000           11.732               0.00            117.356         85.21           1
multi_thread_multi_conn   10000           29.863               0.00            298.654         33.48           1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.610               0.00            116.140         86.10           1
single_thread_multi_conn  10000           11.623               0.00            118.007         84.74           1
multi_thread_multi_conn   10000           38.139               0.00            3.927           2546.21         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.648               0.00            116.526         85.82           1
single_thread_multi_conn  10000           11.603               0.00            119.514         83.67           1
multi_thread_multi_conn   10000           72.666               0.00            3.874           2581.29         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.706               0.00            117.101         85.40           1
single_thread_multi_conn  10000           11.445               0.00            118.680         84.26           1
multi_thread_multi_conn   10000           72.064               0.00            3.148           3176.38         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.749               0.00            127.535         78.41           1
single_thread_multi_conn  10000           11.371               0.00            122.659         81.53           1
multi_thread_multi_conn   10000           137.343              0.00            3.671           2724.03         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.873               0.00            118.763         84.20           1
single_thread_multi_conn  10000           11.496               0.00            127.290         78.56           1
multi_thread_multi_conn   10000           223.993              0.00            3.615           2766.02         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.217               0.00            112.215         89.11           1
single_thread_multi_conn  10000           11.257               0.00            129.757         77.07           1
multi_thread_multi_conn   10000           266.745              0.00            3.711           2694.99         1000
========================================================================================================================
```

RPS From TiProxy ; Connect From IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.370               0.00            113.736         87.92           1
single_thread_multi_conn  10000           11.356               0.00            113.611         88.02           1
multi_thread_multi_conn   10000           34.511               0.00            345.144         28.97           1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.216               0.00            112.206         89.12           1
single_thread_multi_conn  10000           11.463               0.00            116.947         85.51           1
multi_thread_multi_conn   10000           46.863               0.00            4.811           2078.38         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.274               0.00            112.778         88.67           1
single_thread_multi_conn  10000           11.336               0.00            117.867         84.84           1
multi_thread_multi_conn   10000           82.780               0.00            4.363           2291.83         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.111               0.00            121.153         82.54           1
single_thread_multi_conn  10000           12.094               0.00            127.007         78.74           1
multi_thread_multi_conn   10000           108.604              0.00            4.636           2157.11         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.971               0.00            119.759         83.50           1
single_thread_multi_conn  10000           11.534               0.00            127.140         78.65           1
multi_thread_multi_conn   10000           205.574              0.00            4.658           2146.93         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.748               0.00            117.526         85.09           1
single_thread_multi_conn  10000           17.275               0.00            196.362         50.93           1
multi_thread_multi_conn   10000           314.731              0.00            5.088           1965.44         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.092               0.00            120.961         82.67           1
single_thread_multi_conn  10000           11.406               0.00            136.607         73.20           1
multi_thread_multi_conn   10000           393.240              0.00            4.976           2009.63         1000
========================================================================================================================
```

RPS From TiDB ; Connect From GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.537                0.00            5.371           1861.92         1
single_thread_multi_conn  10000           0.517                0.00            5.172           1933.59         1
multi_thread_multi_conn   10000           1.396                0.00            13.965          716.08          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.543                0.00            5.433           1840.76         1
single_thread_multi_conn  10000           0.560                0.00            5.678           1761.11         1
multi_thread_multi_conn   10000           38.508               0.00            4.128           2422.24         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.537                0.00            5.375           1860.31         1
single_thread_multi_conn  10000           0.547                0.00            5.826           1716.33         1
multi_thread_multi_conn   10000           77.414               5.01            5.072           1971.58         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.537                0.00            5.370           1862.26         1
single_thread_multi_conn  10000           0.553                0.00            5.748           1739.68         1
multi_thread_multi_conn   10000           93.799               18.11           4.412           2266.35         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.537                0.00            5.369           1862.54         1
single_thread_multi_conn  10000           0.553                0.00            5.944           1682.41         1
multi_thread_multi_conn   10000           206.096              3.93            5.344           1871.40         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.533                0.00            5.336           1873.93         1
single_thread_multi_conn  10000           0.558                0.00            6.195           1614.16         1
multi_thread_multi_conn   10000           56.879               15.49           7.041           1420.28         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.539                0.00            5.397           1852.95         1
single_thread_multi_conn  10000           0.570                0.00            6.531           1531.15         1
multi_thread_multi_conn   10000           357.425              25.62           6.156           1624.45         1000
========================================================================================================================
```

RPS From TiProxy ; Connect From GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.660                0.00            6.598           1515.62         1
single_thread_multi_conn  10000           0.658                0.00            6.579           1520.05         1
multi_thread_multi_conn   10000           1.994                0.00            19.945          501.38          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.658                0.00            6.588           1517.95         1
single_thread_multi_conn  10000           0.680                0.00            6.928           1443.39         1
multi_thread_multi_conn   10000           68.464               0.00            7.126           1403.35         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.662                0.00            6.622           1510.04         1
single_thread_multi_conn  10000           0.687                0.00            7.139           1400.75         1
multi_thread_multi_conn   10000           107.233              0.00            5.745           1740.74         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.657                0.00            6.570           1522.09         1
single_thread_multi_conn  10000           0.693                0.00            7.284           1372.86         1
multi_thread_multi_conn   10000           162.060              0.00            7.031           1422.28         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.663                0.00            6.632           1507.74         1
single_thread_multi_conn  10000           0.687                0.00            9.414           1062.27         1
multi_thread_multi_conn   10000           279.924              0.00            6.390           1564.99         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.662                0.00            6.622           1510.15         1
single_thread_multi_conn  10000           0.683                0.00            9.720           1028.79         1
multi_thread_multi_conn   10000           474.001              0.00            7.727           1294.17         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.666                0.00            6.672           1498.77         1
single_thread_multi_conn  10000           0.700                0.00            12.129          824.47          1
multi_thread_multi_conn   10000           527.272              0.00            7.118           1404.79         1000
========================================================================================================================
```

---

- IDC * 3
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# date ; tiup cluster display tidb-demo
Thu Aug  7 16:07:07 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://172.24.40.17:2379/dashboard
Dashboard URLs:     http://172.24.40.17:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                  Role        Host          Ports        OS/Arch       Status  Data Dir                         Deploy Dir
--                  ----        ----          -----        -------       ------  --------                         ----------
172.24.40.20:3000   grafana     172.24.40.20  3000         linux/x86_64  Up      -                                /data/tidb-deploy/grafana-3000
172.24.40.17:2379   pd          172.24.40.17  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.18:2379   pd          172.24.40.18  2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.19:2379   pd          172.24.40.19  2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090   prometheus  172.24.40.20  9090/12020   linux/x86_64  Up      /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
172.24.40.17:4000   tidb        172.24.40.17  4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.18:4000   tidb        172.24.40.18  4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.19:4000   tidb        172.24.40.19  4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.17:20160  tikv        172.24.40.17  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.18:20160  tikv        172.24.40.18  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.19:20160  tikv        172.24.40.19  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.17:6000   tiproxy     172.24.40.17  6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000   tiproxy     172.24.40.18  6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.19:6000   tiproxy     172.24.40.19  6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 14
```

RPS From TiDB passthrough A10 NAT
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.535                0.00            5.352           1868.58         1
single_thread_multi_conn  10000           0.604                0.00            6.042           1655.19         1
multi_thread_multi_conn   10000           1.664                0.00            16.657          600.34          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.537                0.00            5.372           1861.44         1
single_thread_multi_conn  10000           0.657                0.00            6.676           1497.91         1
multi_thread_multi_conn   10000           22.738               0.00            2.694           3712.11         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.638                0.00            6.388           1565.52         1
single_thread_multi_conn  10000           0.644                0.00            6.954           1438.09         1
multi_thread_multi_conn   10000           40.300               0.00            4.795           2085.69         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.549                0.00            5.493           1820.37         1
single_thread_multi_conn  10000           0.662                0.00            6.883           1452.80         1
multi_thread_multi_conn   10000           32.968               23.21           3.834           2608.15         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.609                0.00            6.099           1639.58         1
single_thread_multi_conn  10000           0.623                0.00            6.718           1488.58         1
multi_thread_multi_conn   10000           21.953               4.00            3.952           2530.23         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.612                0.00            6.121           1633.83         1
single_thread_multi_conn  10000           0.622                0.00            6.974           1433.83         1
multi_thread_multi_conn   10000           26.442               10.52           4.712           2122.34         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.621                0.00            6.214           1609.32         1
single_thread_multi_conn  10000           0.628                0.00            7.208           1387.30         1
multi_thread_multi_conn   10000           28.267               30.72           5.452           1834.19         1000
========================================================================================================================
```

RPS From TiProxy passthrough A10 NAT
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.850                0.00            8.501           1176.30         1
single_thread_multi_conn  10000           0.655                0.00            6.555           1525.66         1
multi_thread_multi_conn   10000           2.589                0.00            25.901          386.08          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.860                0.00            8.606           1161.93         1
single_thread_multi_conn  10000           0.899                0.00            9.200           1087.01         1
multi_thread_multi_conn   10000           26.422               0.00            2.904           3443.11         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.674                0.00            6.746           1482.33         1
single_thread_multi_conn  10000           0.866                0.00            9.041           1106.13         1
multi_thread_multi_conn   10000           28.692               0.00            3.802           2630.35         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.875                0.00            8.753           1142.52         1
single_thread_multi_conn  10000           0.905                0.00            9.510           1051.57         1
multi_thread_multi_conn   10000           41.932               0.00            2.700           3704.11         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.802                0.00            8.030           1245.35         1
single_thread_multi_conn  10000           0.894                0.00            11.388          878.09          1
multi_thread_multi_conn   10000           30.800               0.00            1.928           5187.93         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.854                0.00            8.548           1169.92         1
single_thread_multi_conn  10000           0.885                0.00            11.378          878.88          1
multi_thread_multi_conn   10000           38.636               0.00            3.579           2794.06         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.817                0.00            8.181           1222.40         1
single_thread_multi_conn  10000           0.852                0.00            11.967          835.62          1
multi_thread_multi_conn   10000           29.584               0.00            2.637           3791.55         1000
========================================================================================================================
```

---

- GCP * 3
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# date ; tiup cluster display tidb-demo
Mon Aug 11 11:15:20 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                   Role        Host           Ports        OS/Arch       Status  Data Dir                         Deploy Dir
--                   ----        ----           -----        -------       ------  --------                         ----------
172.24.40.20:3000    grafana     172.24.40.20   3000         linux/x86_64  Up      -                                /data/tidb-deploy/grafana-3000
10.160.152.21:2379   pd          10.160.152.21  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd          10.160.152.22  2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd          10.160.152.23  2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090    prometheus  172.24.40.20   9090/12020   linux/x86_64  Up      /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
10.160.152.21:4000   tidb        10.160.152.21  4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb        10.160.152.22  4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb        10.160.152.23  4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv        10.160.152.21  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv        10.160.152.22  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.23:20160  tikv        10.160.152.23  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy     10.160.152.21  6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy     10.160.152.22  6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy     10.160.152.23  6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 14
```

RPS From TiDB passthrough GCP Load Balance (#10.160.152.25:4000)
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.375                0.00            3.756           2662.38         1
single_thread_multi_conn  10000           0.400                0.00            4.001           2499.08         1
multi_thread_multi_conn   10000           1.053                0.00            10.538          948.95          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.454                0.00            4.537           2204.10         1
single_thread_multi_conn  10000           0.423                0.00            4.302           2324.68         1
multi_thread_multi_conn   10000           29.547               0.00            3.312           3019.17         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.430                0.00            4.300           2325.79         1
single_thread_multi_conn  10000           0.425                0.00            4.556           2195.09         1
multi_thread_multi_conn   10000           48.152               20.63           5.839           1712.52         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.392                0.00            3.918           2552.62         1
single_thread_multi_conn  10000           0.424                0.00            4.392           2276.97         1
multi_thread_multi_conn   10000           20.738               2.49            1.478           6766.10         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.422                0.00            4.222           2368.40         1
single_thread_multi_conn  10000           0.423                0.00            4.539           2202.89         1
multi_thread_multi_conn   10000           18.596               4.01            4.387           2279.26         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.424                0.00            4.248           2354.27         1
single_thread_multi_conn  10000           0.000                100.00          0.005           1862148.82      1
multi_thread_multi_conn   10000           34.512               23.66           7.396           1352.09         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.398                0.00            3.978           2513.60         1
single_thread_multi_conn  10000           0.426                0.00            4.906           2038.48         1
multi_thread_multi_conn   10000           9.478                9.92            3.548           2818.24         1000
========================================================================================================================
```

RPS From TiProxy passthrough GCP Load Balance (#10.160.152.26:6000)
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.482                0.00            4.824           2073.01         1
single_thread_multi_conn  10000           0.533                0.00            5.328           1876.86         1
multi_thread_multi_conn   10000           1.615                0.00            16.154          619.05          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.535                0.00            5.353           1867.94         1
single_thread_multi_conn  10000           0.559                0.00            5.704           1753.31         1
multi_thread_multi_conn   10000           32.605               0.00            3.625           2758.27         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.517                0.00            5.170           1934.33         1
single_thread_multi_conn  10000           0.563                0.00            6.030           1658.48         1
multi_thread_multi_conn   10000           35.245               0.00            4.272           2340.78         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.500                0.00            5.000           2000.14         1
single_thread_multi_conn  10000           0.564                0.00            5.906           1693.07         1
multi_thread_multi_conn   10000           74.652               23.18           3.851           2596.57         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.532                0.00            5.325           1877.83         1
single_thread_multi_conn  10000           0.568                0.00            6.221           1607.49         1
multi_thread_multi_conn   10000           164.195              3.89            4.783           2090.81         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.536                0.00            5.361           1865.27         1
single_thread_multi_conn  10000           0.565                0.00            6.440           1552.70         1
multi_thread_multi_conn   10000           51.960               10.42           6.473           1544.79         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.495                0.00            4.949           2020.60         1
single_thread_multi_conn  10000           0.568                0.00            6.735           1484.71         1
multi_thread_multi_conn   10000           24.919               30.66           5.737           1743.19         1000
========================================================================================================================
```

---

- IDC * 1 + GCP * 2
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# date ; tiup cluster display tidb-demo
Mon Aug 11 14:25:07 CST 2025
Checking updates for component cluster... Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.23:2379/dashboard
Dashboard URLs:     http://10.160.152.23:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                   Role        Host           Ports        OS/Arch       Status  Data Dir                         Deploy Dir
--                   ----        ----           -----        -------       ------  --------                         ----------
172.24.40.20:3000    grafana     172.24.40.20   3000         linux/x86_64  Up      -                                /data/tidb-deploy/grafana-3000
10.160.152.22:2379   pd          10.160.152.22  2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd          10.160.152.23  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd          172.24.40.17   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090    prometheus  172.24.40.20   9090/12020   linux/x86_64  Up      /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
10.160.152.22:4000   tidb        10.160.152.22  4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb        10.160.152.23  4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb        172.24.40.17   4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.22:20160  tikv        10.160.152.22  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.23:20160  tikv        10.160.152.23  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv        172.24.40.17   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.22:6000   tiproxy     10.160.152.22  6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy     10.160.152.23  6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy     172.24.40.17   6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 14
```

RPS From TiDB with IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.583                0.00            5.838           1712.98         1
single_thread_multi_conn  10000           0.541                0.00            5.418           1845.74         1
multi_thread_multi_conn   10000           1.455                0.00            14.566          686.54          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.555                0.00            5.555           1800.25         1
single_thread_multi_conn  10000           0.562                0.00            5.711           1751.14         1
multi_thread_multi_conn   10000           28.748               0.00            3.166           3158.77         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.545                0.00            5.462           1830.98         1
single_thread_multi_conn  10000           0.571                0.00            6.115           1635.32         1
multi_thread_multi_conn   10000           61.280               11.32           4.216           2372.00         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.619                0.00            6.191           1615.35         1
single_thread_multi_conn  10000           0.618                0.00            6.428           1555.61         1
multi_thread_multi_conn   10000           63.370               11.83           5.045           1982.13         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.547                0.00            5.470           1828.17         1
single_thread_multi_conn  10000           0.608                0.00            6.535           1530.28         1
multi_thread_multi_conn   10000           149.822              3.79            7.018           1424.94         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.570                0.00            5.706           1752.58         1
single_thread_multi_conn  10000           0.609                0.00            6.781           1474.76         1
multi_thread_multi_conn   10000           36.522               21.81           5.512           1814.39         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.542                0.00            5.427           1842.59         1
single_thread_multi_conn  10000           0.572                0.00            6.566           1523.08         1
multi_thread_multi_conn   10000           191.716              13.83           6.049           1653.15         1000
========================================================================================================================
```

RPS From TiProxy with IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.639                0.00            6.399           1562.67         1
single_thread_multi_conn  10000           0.646                0.00            6.467           1546.22         1
multi_thread_multi_conn   10000           2.187                0.00            21.881          457.01          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.681                0.00            6.820           1466.38         1
single_thread_multi_conn  10000           8.221                0.00            83.950          119.12          1
multi_thread_multi_conn   10000           24.834               0.00            3.039           3290.50         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.720                0.00            7.206           1387.81         1
single_thread_multi_conn  10000           9.798                0.00            102.263         97.79           1
multi_thread_multi_conn   10000           38.835               0.00            2.228           4488.76         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.112               0.00            121.163         82.53           1
single_thread_multi_conn  10000           10.890               0.00            113.123         88.40           1
multi_thread_multi_conn   10000           45.694               0.00            2.102           4757.46         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.254               0.00            122.585         81.58           1
single_thread_multi_conn  10000           8.238                0.00            90.802          110.13          1
multi_thread_multi_conn   10000           81.255               0.00            2.234           4477.06         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.473               0.00            124.775         80.14           1
single_thread_multi_conn  10000           8.303                0.00            95.620          104.58          1
multi_thread_multi_conn   10000           110.156              0.00            2.257           4430.60         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.054               0.00            120.579         82.93           1
single_thread_multi_conn  10000           9.515                0.00            111.183         89.94           1
multi_thread_multi_conn   10000           78.857               0.00            2.691           3715.82         1000
========================================================================================================================
```

RPS From TiDB with GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.432                0.00            4.324           2312.80         1
single_thread_multi_conn  10000           0.393                0.00            3.933           2542.43         1
multi_thread_multi_conn   10000           1.098                0.00            10.986          910.29          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.432                0.00            4.327           2311.24         1
single_thread_multi_conn  10000           0.442                0.00            4.487           2228.53         1
multi_thread_multi_conn   10000           30.643               0.00            3.357           2978.68         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.395                0.00            3.955           2528.41         1
single_thread_multi_conn  10000           0.442                0.00            4.728           2115.07         1
multi_thread_multi_conn   10000           50.270               20.72           5.781           1729.94         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.390                0.00            3.904           2561.46         1
single_thread_multi_conn  10000           0.441                0.00            4.564           2191.23         1
multi_thread_multi_conn   10000           37.753               2.46            2.135           4683.38         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.436                0.00            4.366           2290.49         1
single_thread_multi_conn  10000           0.440                0.00            4.722           2117.87         1
multi_thread_multi_conn   10000           151.511              3.94            4.483           2230.73         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.400                0.00            3.999           2500.39         1
single_thread_multi_conn  10000           0.443                0.00            5.579           1792.33         1
multi_thread_multi_conn   10000           34.602               31.18           7.755           1289.50         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.437                0.00            4.376           2284.99         1
single_thread_multi_conn  10000           0.445                0.00            5.087           1965.81         1
multi_thread_multi_conn   10000           19.577               9.97            3.702           2701.37         1000
========================================================================================================================
```

RPS From TiProxy with GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.845               0.00            118.476         84.41           1
single_thread_multi_conn  10000           12.960               0.00            129.629         77.14           1
multi_thread_multi_conn   10000           38.154               0.00            381.550         26.21           1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.956               0.00            119.586         83.62           1
single_thread_multi_conn  10000           7.235                0.00            73.679          135.72          1
multi_thread_multi_conn   10000           20.255               0.00            2.236           4473.26         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.525                0.00            5.253           1903.60         1
single_thread_multi_conn  10000           4.530                0.00            47.049          212.54          1
multi_thread_multi_conn   10000           35.209               0.00            2.198           4549.24         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.526                0.00            5.262           1900.35         1
single_thread_multi_conn  10000           4.344                0.00            45.554          219.52          1
multi_thread_multi_conn   10000           43.833               0.00            2.247           4450.11         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.567                0.00            5.675           1762.19         1
single_thread_multi_conn  10000           4.322                0.00            47.553          210.29          1
multi_thread_multi_conn   10000           71.906               0.00            2.398           4169.54         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.957               0.00            119.593         83.62           1
single_thread_multi_conn  10000           5.334                0.00            61.571          162.41          1
multi_thread_multi_conn   10000           96.755               0.00            2.667           3749.86         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.541                0.00            5.410           1848.54         1
single_thread_multi_conn  10000           5.995                0.00            68.417          146.16          1
multi_thread_multi_conn   10000           50.684               0.00            3.006           3326.43         1000
========================================================================================================================
```

---

- IDC * 2 + GCP * 1
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# make display
date ; tiup cluster display tidb-demo
Fri Aug 15 10:16:41 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.23:2379/dashboard
Dashboard URLs:     http://10.160.152.23:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                   Role        Host           Ports        OS/Arch       Status  Data Dir                         Deploy Dir
--                   ----        ----           -----        -------       ------  --------                         ----------
172.24.40.20:3000    grafana     172.24.40.20   3000         linux/x86_64  Up      -                                /data/tidb-deploy/grafana-3000
10.160.152.23:2379   pd          10.160.152.23  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd          172.24.40.17   2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd          172.24.40.18   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090    prometheus  172.24.40.20   9090/12020   linux/x86_64  Up      /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
10.160.152.23:4000   tidb        10.160.152.23  4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb        172.24.40.17   4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb        172.24.40.18   4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.23:20160  tikv        10.160.152.23  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv        172.24.40.17   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv        172.24.40.18   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.23:6000   tiproxy     10.160.152.23  6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy     172.24.40.17   6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy     172.24.40.18   6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 14
```

RPS From TiDB with IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.549                0.00            5.498           1818.73         1
single_thread_multi_conn  10000           0.605                0.00            6.059           1650.54         1
multi_thread_multi_conn   10000           1.558                0.00            15.590          641.42          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.551                0.00            5.514           1813.62         1
single_thread_multi_conn  10000           0.670                0.00            6.789           1473.02         1
multi_thread_multi_conn   10000           24.899               0.00            2.854           3503.67         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.549                0.00            5.498           1818.94         1
single_thread_multi_conn  10000           0.635                0.00            6.786           1473.59         1
multi_thread_multi_conn   10000           39.203               0.00            4.533           2206.28         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.563                0.00            5.633           1775.41         1
single_thread_multi_conn  10000           0.651                0.00            6.727           1486.54         1
multi_thread_multi_conn   10000           61.753               23.22           6.426           1556.18         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.559                0.00            5.597           1786.81         1
single_thread_multi_conn  10000           0.650                0.00            6.959           1436.98         1
multi_thread_multi_conn   10000           37.747               4.00            3.525           2836.72         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.550                0.00            5.504           1816.91         1
single_thread_multi_conn  10000           0.627                0.00            6.911           1446.96         1
multi_thread_multi_conn   10000           30.245               10.51           5.034           1986.34         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.592                0.00            5.925           1687.73         1
single_thread_multi_conn  10000           0.637                0.00            7.241           1381.09         1
multi_thread_multi_conn   10000           28.601               30.73           4.914           2035.11         1000
========================================================================================================================
```

RPS From TiProxy with IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.698                0.00            6.983           1432.06         1
single_thread_multi_conn  10000           0.806                0.00            8.069           1239.34         1
multi_thread_multi_conn   10000           2.335                0.00            23.365          427.99          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.778                0.00            7.784           1284.73         1
single_thread_multi_conn  10000           2.905                0.00            29.628          337.51          1
multi_thread_multi_conn   10000           17.391               0.00            2.156           4638.07         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.624                0.00            6.243           1601.80         1
single_thread_multi_conn  10000           2.641                0.00            27.474          363.98          1
multi_thread_multi_conn   10000           49.741               0.00            2.902           3445.76         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.609               0.00            116.139         86.10           1
single_thread_multi_conn  10000           2.978                0.00            31.172          320.80          1
multi_thread_multi_conn   10000           34.701               0.00            1.743           5737.60         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.612                0.00            6.126           1632.28         1
single_thread_multi_conn  10000           4.691                0.00            51.422          194.47          1
multi_thread_multi_conn   10000           62.091               0.00            1.961           5099.12         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.863                0.00            8.634           1158.19         1
single_thread_multi_conn  10000           4.882                0.00            57.188          174.86          1
multi_thread_multi_conn   10000           55.255               0.00            2.143           4665.75         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.494               0.00            114.991         86.96           1
single_thread_multi_conn  10000           4.659                0.00            55.219          181.10          1
multi_thread_multi_conn   10000           37.937               0.00            2.337           4278.90         1000
========================================================================================================================
```

RPS From TiDB with GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.351                0.00            3.510           2848.93         1
single_thread_multi_conn  10000           0.352                0.00            3.524           2837.65         1
multi_thread_multi_conn   10000           0.998                0.00            9.986           1001.43         1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.346                0.00            3.463           2887.58         1
single_thread_multi_conn  10000           0.362                0.00            3.677           2719.98         1
multi_thread_multi_conn   10000           35.867               0.00            3.881           2576.90         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.351                0.00            3.510           2848.91         1
single_thread_multi_conn  10000           0.361                0.00            3.913           2555.53         1
multi_thread_multi_conn   10000           52.555               20.62           5.769           1733.41         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.358                0.00            3.578           2794.64         1
single_thread_multi_conn  10000           0.366                0.00            3.805           2627.95         1
multi_thread_multi_conn   10000           69.397               2.50            3.277           3051.45         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.000                100.00          0.005           1921964.90      1
single_thread_multi_conn  10000           0.000                100.00          0.003           2915545.67      1
multi_thread_multi_conn   10000           70.521               62.13           6.935           1441.89         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.352                0.00            3.524           2837.92         1
single_thread_multi_conn  10000           0.368                0.00            4.449           2247.57         1
multi_thread_multi_conn   10000           23.433               0.00            6.165           1622.11         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.354                0.00            3.544           2821.61         1
single_thread_multi_conn  10000           0.377                0.00            5.322           1878.96         1
multi_thread_multi_conn   10000           170.395              0.00            4.181           2391.69         1000
========================================================================================================================
```

RPS From TiProxy with GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.318               0.00            113.208         88.33           1
single_thread_multi_conn  10000           11.394               0.00            113.965         87.75           1
multi_thread_multi_conn   10000           33.495               0.00            334.957         29.85           1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.118               0.00            111.206         89.92           1
single_thread_multi_conn  10000           11.797               0.00            120.207         83.19           1
multi_thread_multi_conn   10000           189.346              0.00            21.167          472.43          100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           15.129               0.00            151.320         66.09           1
single_thread_multi_conn  10000           7.760                0.00            80.613          124.05          1
multi_thread_multi_conn   10000           45.681               0.00            2.661           3757.28         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.708               0.00            117.107         85.39           1
single_thread_multi_conn  10000           7.775                0.00            81.795          122.26          1
multi_thread_multi_conn   10000           56.192               0.00            2.761           3622.17         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.079               0.00            120.813         82.77           1
single_thread_multi_conn  10000           7.963                0.00            87.552          114.22          1
multi_thread_multi_conn   10000           104.712              0.00            2.883           3468.11         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           24.602               0.00            246.047         40.64           1
single_thread_multi_conn  10000           12.283               0.00            170.593         58.62           1
multi_thread_multi_conn   10000           89.237               0.00            2.862           3493.87         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.616               0.00            126.187         79.25           1
single_thread_multi_conn  10000           5.334                19.60           67.591          147.95          1
multi_thread_multi_conn   10000           177.149              0.00            3.587           2787.94         1000
========================================================================================================================
```

---

- IDC * 3 + GCP * 2
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# make display
date ; tiup cluster display tidb-demo
Fri Aug 15 14:50:26 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                   Role        Host           Ports        OS/Arch       Status  Data Dir                         Deploy Dir
--                   ----        ----           -----        -------       ------  --------                         ----------
172.24.40.20:3000    grafana     172.24.40.20   3000         linux/x86_64  Up      -                                /data/tidb-deploy/grafana-3000
10.160.152.21:2379   pd          10.160.152.21  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd          10.160.152.22  2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd          172.24.40.17   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd          172.24.40.18   2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.19:2379    pd          172.24.40.19   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090    prometheus  172.24.40.20   9090/12020   linux/x86_64  Up      /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
10.160.152.21:4000   tidb        10.160.152.21  4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb        10.160.152.22  4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb        172.24.40.17   4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb        172.24.40.18   4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
172.24.40.19:4000    tidb        172.24.40.19   4000/10080   linux/x86_64  Up      -                                /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv        10.160.152.21  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv        10.160.152.22  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv        172.24.40.17   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv        172.24.40.18   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.19:20160   tikv        172.24.40.19   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy     10.160.152.21  6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy     10.160.152.22  6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy     172.24.40.17   6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy     172.24.40.18   6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
172.24.40.19:6000    tiproxy     172.24.40.19   6000/6001    linux/x86_64  Up      -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 22
```

RPS From TiDB with IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.610                0.00            6.108           1637.22         1
single_thread_multi_conn  10000           0.589                0.00            5.896           1696.03         1
multi_thread_multi_conn   10000           1.605                0.00            16.064          622.51          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.533                0.00            5.331           1875.94         1
single_thread_multi_conn  10000           0.620                0.00            6.292           1589.41         1
multi_thread_multi_conn   10000           22.498               0.00            2.578           3878.91         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.583                0.00            5.836           1713.38         1
single_thread_multi_conn  10000           0.620                0.00            6.614           1511.98         1
multi_thread_multi_conn   10000           41.033               1.06            3.366           2970.50         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.619                0.00            6.194           1614.55         1
single_thread_multi_conn  10000           0.610                0.00            6.326           1580.81         1
multi_thread_multi_conn   10000           31.783               22.19           2.649           3775.71         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.549                0.00            5.499           1818.57         1
single_thread_multi_conn  10000           0.649                0.00            6.971           1434.57         1
multi_thread_multi_conn   10000           19.744               3.99            3.311           3020.64         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.546                0.00            5.466           1829.39         1
single_thread_multi_conn  10000           0.621                0.00            6.905           1448.15         1
multi_thread_multi_conn   10000           29.293               11.55           6.841           1461.68         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.552                0.00            5.520           1811.65         1
single_thread_multi_conn  10000           0.640                0.00            7.325           1365.27         1
multi_thread_multi_conn   10000           21.929               29.67           4.177           2393.85         1000
========================================================================================================================
```

RPS From TiProxy with IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.664                0.00            6.648           1504.14         1
single_thread_multi_conn  10000           0.830                0.00            8.304           1204.18         1
multi_thread_multi_conn   10000           2.609                0.00            26.107          383.04          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.891                0.00            8.916           1121.59         1
single_thread_multi_conn  10000           0.876                0.00            8.951           1117.24         1
multi_thread_multi_conn   10000           25.519               0.00            2.800           3571.46         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.890                0.00            8.908           1122.63         1
single_thread_multi_conn  10000           1.766                0.00            18.398          543.53          1
multi_thread_multi_conn   10000           22.830               0.00            3.774           2649.38         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.850                0.00            8.509           1175.25         1
single_thread_multi_conn  10000           3.402                0.00            35.450          282.08          1
multi_thread_multi_conn   10000           59.658               0.00            3.093           3232.77         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.669                0.00            6.694           1493.94         1
single_thread_multi_conn  10000           3.865                0.00            42.373          236.00          1
multi_thread_multi_conn   10000           42.184               0.00            1.640           6096.11         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.688               0.00            116.922         85.53           1
single_thread_multi_conn  10000           3.930                0.00            44.772          223.36          1
multi_thread_multi_conn   10000           36.360               0.00            1.997           5008.76         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           12.222               0.00            122.266         81.79           1
single_thread_multi_conn  10000           4.054                0.00            49.784          200.87          1
multi_thread_multi_conn   10000           32.234               0.00            3.393           2947.51         1000
========================================================================================================================
```

RPS From TiDB with GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.330                0.00            3.304           3026.36         1
single_thread_multi_conn  10000           0.334                0.00            3.341           2992.79         1
multi_thread_multi_conn   10000           0.980                0.00            9.811           1019.27         1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.334                0.00            3.344           2990.51         1
single_thread_multi_conn  10000           0.363                0.00            3.692           2708.81         1
multi_thread_multi_conn   10000           31.677               0.00            3.428           2917.25         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.350                0.00            3.499           2858.35         1
single_thread_multi_conn  10000           0.365                0.00            3.960           2525.26         1
multi_thread_multi_conn   10000           48.202               20.75           5.845           1710.83         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.345                0.00            3.453           2895.96         1
single_thread_multi_conn  10000           0.369                0.00            3.834           2608.44         1
multi_thread_multi_conn   10000           34.806               5.56            2.090           4785.39         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.346                0.00            3.462           2888.84         1
single_thread_multi_conn  10000           0.000                100.00          0.192           52103.16        1
multi_thread_multi_conn   10000           61.696               35.27           5.407           1849.41         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.347                0.00            3.473           2879.00         1
single_thread_multi_conn  10000           0.371                0.00            4.836           2067.95         1
multi_thread_multi_conn   10000           23.176               0.00            6.432           1554.61         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.354                0.00            3.540           2824.90         1
single_thread_multi_conn  10000           0.000                100.00          0.807           12390.79        1
multi_thread_multi_conn   10000           21.738               36.53           5.432           1841.02         1000
========================================================================================================================
```

RPS From TiProxy with GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.213               0.00            112.239         89.10           1
single_thread_multi_conn  10000           11.232               0.00            112.348         89.01           1
multi_thread_multi_conn   10000           36.797               0.00            367.982         27.18           1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.526               0.00            115.282         86.74           1
single_thread_multi_conn  10000           13.815               0.00            140.473         71.19           1
multi_thread_multi_conn   10000           35.268               0.00            3.662           2730.93         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           16.280               0.00            162.995         61.35           1
single_thread_multi_conn  10000           10.984               0.00            114.255         87.52           1
multi_thread_multi_conn   10000           34.041               0.00            2.092           4779.98         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.831               0.00            108.338         92.30           1
single_thread_multi_conn  10000           11.083               0.00            116.283         86.00           1
multi_thread_multi_conn   10000           36.206               0.00            1.988           5030.60         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.070               0.00            110.729         90.31           1
single_thread_multi_conn  10000           11.217               0.00            123.299         81.10           1
multi_thread_multi_conn   10000           57.468               0.00            2.448           4084.91         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.616               0.00            106.184         94.18           1
single_thread_multi_conn  10000           8.714                0.00            99.823          100.18          1
multi_thread_multi_conn   10000           41.620               0.00            2.650           3774.03         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.189               0.00            111.920         89.35           1
single_thread_multi_conn  10000           11.495               0.00            137.178         72.90           1
multi_thread_multi_conn   10000           54.022               0.00            3.161           3163.58         1000
========================================================================================================================
```

---

- IDC * 2 + GCP * 3
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# make display
date ; tiup cluster display tidb-demo
Sun Aug 17 03:42:17 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                   Role        Host           Ports        OS/Arch       Status   Data Dir                         Deploy Dir
--                   ----        ----           -----        -------       ------   --------                         ----------
172.24.40.20:3000    grafana     172.24.40.20   3000         linux/x86_64  Up       -                                /data/tidb-deploy/grafana-3000
10.160.152.21:2379   pd          10.160.152.21  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd          10.160.152.22  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd          10.160.152.23  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd          172.24.40.17   2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd          172.24.40.18   2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090    prometheus  172.24.40.20   9090/12020   linux/x86_64  Up       /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
10.160.152.21:4000   tidb        10.160.152.21  4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb        10.160.152.22  4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb        10.160.152.23  4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb        172.24.40.17   4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb        172.24.40.18   4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv        10.160.152.21  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv        10.160.152.22  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.23:20160  tikv        10.160.152.23  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv        172.24.40.17   20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv        172.24.40.18   20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy     10.160.152.21  6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy     10.160.152.22  6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy     10.160.152.23  6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy     172.24.40.17   6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy     172.24.40.18   6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 22
```

RPS From TiDB with IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.553                0.00            5.536           1806.48         1
single_thread_multi_conn  10000           0.543                0.00            5.431           1841.14         1
multi_thread_multi_conn   10000           1.480                0.00            14.814          675.02          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.572                0.00            5.724           1746.99         1
single_thread_multi_conn  10000           0.602                0.00            6.106           1637.73         1
multi_thread_multi_conn   10000           23.210               0.00            2.567           3896.01         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.537                0.00            5.372           1861.48         1
single_thread_multi_conn  10000           0.580                0.00            6.217           1608.40         1
multi_thread_multi_conn   10000           46.773               8.86            3.883           2575.13         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.627                0.00            6.277           1593.19         1
single_thread_multi_conn  10000           0.605                0.00            6.278           1592.84         1
multi_thread_multi_conn   10000           36.196               14.28           4.505           2219.82         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.537                0.00            5.375           1860.51         1
single_thread_multi_conn  10000           0.598                0.00            6.399           1562.66         1
multi_thread_multi_conn   10000           35.938               4.00            3.380           2958.15         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.561                0.00            5.614           1781.20         1
single_thread_multi_conn  10000           0.705                0.00            7.700           1298.77         1
multi_thread_multi_conn   10000           33.194               19.34           5.512           1814.32         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.553                0.00            5.538           1805.56         1
single_thread_multi_conn  10000           0.583                0.00            6.731           1485.62         1
multi_thread_multi_conn   10000           21.095               21.88           3.651           2739.32         1000
========================================================================================================================
```

RPS From TiProxy with IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.755                0.00            7.553           1324.04         1
single_thread_multi_conn  10000           0.835                0.00            8.357           1196.60         1
multi_thread_multi_conn   10000           2.427                0.00            24.281          411.85          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.593                0.00            5.934           1685.22         1
single_thread_multi_conn  10000           5.040                0.00            51.409          194.52          1
multi_thread_multi_conn   10000           19.294               0.00            2.363           4232.26         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.912                0.00            9.125           1095.90         1
single_thread_multi_conn  10000           3.987                0.00            41.469          241.14          1
multi_thread_multi_conn   10000           27.465               0.00            1.727           5788.76         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.666               0.00            106.705         93.72           1
single_thread_multi_conn  10000           3.955                0.00            41.503          240.95          1
multi_thread_multi_conn   10000           32.883               0.00            1.673           5978.74         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.625                0.00            6.252           1599.42         1
single_thread_multi_conn  10000           4.086                0.00            44.925          222.59          1
multi_thread_multi_conn   10000           60.793               0.00            1.778           5622.82         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.688               0.00            106.921         93.53           1
single_thread_multi_conn  10000           4.817                0.00            55.290          180.86          1
multi_thread_multi_conn   10000           59.500               0.00            1.995           5013.66         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.919                0.00            9.192           1087.90         1
single_thread_multi_conn  10000           4.056                0.00            48.569          205.89          1
multi_thread_multi_conn   10000           47.387               0.00            2.152           4646.92         1000
========================================================================================================================
```

RPS From TiDB with GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.422                0.00            4.221           2368.83         1
single_thread_multi_conn  10000           0.423                0.00            4.233           2362.52         1
multi_thread_multi_conn   10000           1.054                0.00            10.546          948.18          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.386                0.00            3.861           2590.32         1
single_thread_multi_conn  10000           0.422                0.00            4.283           2335.06         1
multi_thread_multi_conn   10000           29.537               0.00            3.290           3039.49         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.386                0.00            3.864           2588.02         1
single_thread_multi_conn  10000           0.424                0.00            4.553           2196.12         1
multi_thread_multi_conn   10000           49.530               20.71           5.866           1704.71         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.386                0.00            3.859           2591.13         1
single_thread_multi_conn  10000           0.425                0.00            4.410           2267.59         1
multi_thread_multi_conn   10000           24.351               2.48            1.608           6219.94         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.000                100.00          0.005           1974719.40      1
single_thread_multi_conn  10000           0.000                100.00          0.004           2850553.21      1
multi_thread_multi_conn   10000           53.446               62.78           6.487           1541.65         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.386                0.00            3.863           2588.44         1
single_thread_multi_conn  10000           0.423                0.00            5.004           1998.33         1
multi_thread_multi_conn   10000           22.688               0.00            6.421           1557.38         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.394                0.00            3.942           2536.96         1
single_thread_multi_conn  10000           0.428                0.00            5.842           1711.63         1
multi_thread_multi_conn   10000           6.172                0.00            2.629           3803.42         1000
========================================================================================================================
```

RPS From TiProxy with GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.634               0.00            106.364         94.02           1
single_thread_multi_conn  10000           10.287               0.00            102.894         97.19           1
multi_thread_multi_conn   10000           31.418               0.00            314.189         31.83           1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.398               0.00            104.002         96.15           1
single_thread_multi_conn  10000           10.554               0.00            107.634         92.91           1
multi_thread_multi_conn   10000           31.325               0.00            3.319           3013.08         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.379               0.00            103.813         96.33           1
single_thread_multi_conn  10000           10.863               0.00            112.938         88.54           1
multi_thread_multi_conn   10000           35.173               0.00            2.136           4682.24         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.679               0.00            106.812         93.62           1
single_thread_multi_conn  10000           9.010                0.00            94.570          105.74          1
multi_thread_multi_conn   10000           27.626               0.00            1.756           5694.75         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.513                0.00            5.129           1949.80         1
single_thread_multi_conn  10000           4.746                0.00            52.187          191.62          1
multi_thread_multi_conn   10000           41.350               0.00            2.056           4862.79         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.746               0.00            107.489         93.03           1
single_thread_multi_conn  10000           10.893               0.00            125.129         79.92           1
multi_thread_multi_conn   10000           52.640               0.00            2.660           3759.30         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.780               0.00            107.829         92.74           1
single_thread_multi_conn  10000           10.925               0.00            130.821         76.44           1
multi_thread_multi_conn   10000           46.738               0.00            3.144           3180.53         1000
========================================================================================================================
```

---

- IDC * 2 + GCP * 3 (兩機房同時執行 RPS 測試)
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# make display
date ; tiup cluster display tidb-demo
Sun Aug 17 03:42:17 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                   Role        Host           Ports        OS/Arch       Status   Data Dir                         Deploy Dir
--                   ----        ----           -----        -------       ------   --------                         ----------
172.24.40.20:3000    grafana     172.24.40.20   3000         linux/x86_64  Up       -                                /data/tidb-deploy/grafana-3000
10.160.152.21:2379   pd          10.160.152.21  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd          10.160.152.22  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd          10.160.152.23  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd          172.24.40.17   2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd          172.24.40.18   2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090    prometheus  172.24.40.20   9090/12020   linux/x86_64  Up       /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
10.160.152.21:4000   tidb        10.160.152.21  4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb        10.160.152.22  4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb        10.160.152.23  4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb        172.24.40.17   4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb        172.24.40.18   4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv        10.160.152.21  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv        10.160.152.22  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.23:20160  tikv        10.160.152.23  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv        172.24.40.17   20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv        172.24.40.18   20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy     10.160.152.21  6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy     10.160.152.22  6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy     10.160.152.23  6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy     172.24.40.17   6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy     172.24.40.18   6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 22
```

RPS From TiDB with IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.523                0.00            5.231           1911.72         1
single_thread_multi_conn  10000           0.553                0.00            5.536           1806.28         1
multi_thread_multi_conn   10000           1.485                0.00            14.863          672.81          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.548                0.00            5.485           1823.19         1
single_thread_multi_conn  10000           0.613                0.00            6.225           1606.52         1
multi_thread_multi_conn   10000           24.372               0.00            2.753           3632.48         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.571                0.00            5.713           1750.53         1
single_thread_multi_conn  10000           0.612                0.00            6.705           1491.51         1
multi_thread_multi_conn   10000           54.522               8.53            3.941           2537.45         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.556                0.00            5.569           1795.52         1
single_thread_multi_conn  10000           0.660                0.00            6.832           1463.73         1
multi_thread_multi_conn   10000           40.081               14.70           2.696           3709.59         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.535                0.00            5.357           1866.56         1
single_thread_multi_conn  10000           0.594                0.00            6.374           1568.80         1
multi_thread_multi_conn   10000           29.858               4.02            3.599           2778.59         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.528                0.00            5.289           1890.85         1
single_thread_multi_conn  10000           0.602                0.00            6.667           1499.98         1
multi_thread_multi_conn   10000           35.053               19.02           5.606           1783.72         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.565                0.00            5.650           1769.76         1
single_thread_multi_conn  10000           0.591                0.00            6.755           1480.38         1
multi_thread_multi_conn   10000           23.595               22.20           3.996           2502.78         1000
========================================================================================================================
```

RPS From TiProxy with IDC
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.198               0.00            112.010         89.28           1
single_thread_multi_conn  10000           0.694                0.00            6.945           1439.89         1
multi_thread_multi_conn   10000           2.352                0.00            23.533          424.94          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.834                0.00            8.344           1198.47         1
single_thread_multi_conn  10000           1.023                0.00            10.441          957.80          1
multi_thread_multi_conn   10000           27.769               0.00            3.123           3201.66         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.615                0.00            6.160           1623.46         1
single_thread_multi_conn  10000           7.074                0.00            73.594          135.88          1
multi_thread_multi_conn   10000           25.908               0.00            1.641           6093.34         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.143               0.00            111.467         89.71           1
single_thread_multi_conn  10000           4.160                0.00            43.651          229.09          1
multi_thread_multi_conn   10000           32.465               0.00            1.631           6132.87         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.623                0.00            6.232           1604.69         1
single_thread_multi_conn  10000           7.057                0.00            77.632          128.81          1
multi_thread_multi_conn   10000           50.214               0.00            1.779           5620.78         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.851                0.00            8.514           1174.48         1
single_thread_multi_conn  10000           4.247                0.00            48.855          204.69          1
multi_thread_multi_conn   10000           68.755               0.00            2.600           3846.16         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.629                0.00            6.299           1587.48         1
single_thread_multi_conn  10000           7.275                0.00            86.945          115.01          1
multi_thread_multi_conn   10000           47.830               0.00            2.370           4218.96         1000
========================================================================================================================
```

RPS From TiDB with GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.386                0.00            3.860           2590.58         1
single_thread_multi_conn  10000           0.419                0.00            4.195           2383.61         1
multi_thread_multi_conn   10000           1.048                0.00            10.484          953.85          1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.391                0.00            3.914           2554.91         1
single_thread_multi_conn  10000           0.417                0.00            4.234           2361.66         1
multi_thread_multi_conn   10000           29.059               0.00            3.286           3043.38         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.417                0.00            4.168           2398.97         1
single_thread_multi_conn  10000           0.421                0.00            4.516           2214.58         1
multi_thread_multi_conn   10000           48.382               20.67           5.855           1707.85         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.389                0.00            3.894           2568.33         1
single_thread_multi_conn  10000           0.422                0.00            4.373           2286.53         1
multi_thread_multi_conn   10000           22.354               2.48            1.504           6646.97         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.395                0.00            3.952           2530.45         1
single_thread_multi_conn  10000           0.423                0.00            4.541           2201.99         1
multi_thread_multi_conn   10000           65.526               3.92            4.386           2280.04         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.420                0.00            4.203           2379.45         1
single_thread_multi_conn  10000           0.000                100.00          0.005           1848769.78      1
multi_thread_multi_conn   10000           31.777               23.68           7.209           1387.20         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.000                100.00          0.005           2016104.60      1
single_thread_multi_conn  10000           0.000                100.00          0.003           2976161.21      1
multi_thread_multi_conn   10000           31.907               66.06           7.651           1307.07         1000
========================================================================================================================
```

RPS From TiProxy with GCP
```
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.928               0.00            109.307         91.49           1
single_thread_multi_conn  10000           10.823               0.00            108.259         92.37           1
multi_thread_multi_conn   10000           32.810               0.00            328.113         30.48           1
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.788               0.00            107.909         92.67           1
single_thread_multi_conn  10000           11.068               0.00            112.863         88.60           1
multi_thread_multi_conn   10000           32.760               0.00            3.439           2907.92         100
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.836               0.00            108.385         92.26           1
single_thread_multi_conn  10000           11.021               0.00            114.590         87.27           1
multi_thread_multi_conn   10000           35.048               0.00            2.847           3513.05         200
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.822               0.00            108.249         92.38           1
single_thread_multi_conn  10000           10.936               0.00            114.806         87.10           1
multi_thread_multi_conn   10000           36.499               0.00            1.967           5083.99         250
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           10.850               0.00            108.524         92.15           1
single_thread_multi_conn  10000           7.136                0.00            78.408          127.54          1
multi_thread_multi_conn   10000           40.711               0.00            2.055           4866.94         500
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           11.036               0.00            110.385         90.59           1
single_thread_multi_conn  10000           9.391                0.00            107.903         92.68           1
multi_thread_multi_conn   10000           28.842               0.00            2.578           3879.08         750
========================================================================================================================
========================================================================================================================
Test Type                 Total Tests     Avg Response (ms)    Error Rate %    Total Time (s)  Req/sec         Threads
------------------------------------------------------------------------------------------------------------------------
single_thread_single_conn 10000           0.497                0.00            4.969           2012.39         1
single_thread_multi_conn  10000           4.795                0.00            57.733          173.21          1
multi_thread_multi_conn   10000           19.633               0.00            2.950           3390.00         1000
========================================================================================================================
```

---

## [Sysbench](https://docs.pingcap.com/zh/tidb/stable/benchmark-tidb-using-sysbench/)

- Tuning
    - TiDB
        - log.level: "error"
    - TiKV
        - log.level: "error"
        - storage.block-cache.capacity: "6GB"

- IDC * 1
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# make display
date ; tiup cluster display tidb-demo
Mon Aug 18 09:52:53 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://172.24.40.17:2379/dashboard
Dashboard URLs:     http://172.24.40.17:2379/dashboard
Grafana URL:        http://172.24.40.20:3000
ID                  Role        Host          Ports        OS/Arch       Status   Data Dir                         Deploy Dir
--                  ----        ----          -----        -------       ------   --------                         ----------
172.24.40.20:3000   grafana     172.24.40.20  3000         linux/x86_64  Up       -                                /data/tidb-deploy/grafana-3000
172.24.40.17:2379   pd          172.24.40.17  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379          /data/tidb-deploy/pd-2379
172.24.40.20:9090   prometheus  172.24.40.20  9090/12020   linux/x86_64  Up       /data/tidb-data/prometheus-9090  /data/tidb-deploy/prometheus-9090
172.24.40.17:4000   tidb        172.24.40.17  4000/10080   linux/x86_64  Up       -                                /data/tidb-deploy/tidb-4000
172.24.40.17:20160  tikv        172.24.40.17  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160       /data/tidb-deploy/tikv-20160
172.24.40.17:6000   tiproxy     172.24.40.17  6000/6001    linux/x86_64  Up       -                                /data/tidb-deploy/tiproxy-6000
Total nodes: 6
```

Benchmark from TiDB
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#1_tidb/
Mon Aug 18 10:53:37 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        21.50                         16.79                 63.02                 9.84                  17864.6250               299.9722                         7621.74 per sec.    2399777.58          476.36 per sec.
oltp_read_write       31.37                         25.42                 81.66                 15.41                 11798.8750               299.9862                         6292.23 per sec.    2399889.72          314.61 per sec.
oltp_write_only       10.84                         8.19                  48.56                 3.26                  36628.2500               299.9501                         5860.25 per sec.    2399600.61          976.71 per sec.
select_random_points  4.33                          2.60                  43.01                 0.73                  115160.2500              299.8759                         3070.88 per sec.    2399007.02          3070.88 per sec.
select_random_ranges  3.49                          2.32                  27.84                 0.88                  129176.6250              299.8739                         3444.65 per sec.    2398991.52          3444.65 per sec.
```

Benchmark from TiProxy
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#1_tiproxy/
Mon Aug 18 11:21:59 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        21.50                         17.05                 65.18                 10.16                 17588.5000               299.9395                         7503.99 per sec.    2399516.06          469.00 per sec.
oltp_read_write       31.94                         26.27                 87.87                 17.00                 11416.6250               299.9632                         6088.41 per sec.    2399705.41          304.42 per sec.
oltp_write_only       11.45                         8.48                  156.69                3.75                  35376.3750               299.9089                         5660.05 per sec.    2399271.26          943.34 per sec.
select_random_points  4.41                          2.72                  33.28                 0.74                  110115.0000              299.8389                         2936.30 per sec.    2398711.56          2936.30 per sec.
select_random_ranges  3.55                          2.37                  27.49                 0.86                  126765.0000              299.8118                         3380.35 per sec.    2398494.43          3380.35 per sec.
```

- IDC * 3
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# make display
date ; tiup cluster display tidb-demo
Mon Aug 18 11:31:24 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://172.24.40.17:2379/dashboard
Dashboard URLs:     http://172.24.40.17:2379/dashboard
ID                  Role     Host          Ports        OS/Arch       Status  Data Dir                    Deploy Dir
--                  ----     ----          -----        -------       ------  --------                    ----------
172.24.40.17:2379   pd       172.24.40.17  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.18:2379   pd       172.24.40.18  2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.19:2379   pd       172.24.40.19  2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:4000   tidb     172.24.40.17  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.18:4000   tidb     172.24.40.18  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.19:4000   tidb     172.24.40.19  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.17:20160  tikv     172.24.40.17  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.18:20160  tikv     172.24.40.18  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.19:20160  tikv     172.24.40.19  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:6000   tiproxy  172.24.40.17  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000   tiproxy  172.24.40.18  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.19:6000   tiproxy  172.24.40.19  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
Total nodes: 12
```

Benchmark from TiDB
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#2_tidb
Mon Aug 18 13:11:52 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        19.29                         14.91                 60.86                 8.42                  20121.5000               299.9338                         8584.75 per sec.    2399470.12          536.55 per sec.
oltp_read_write       30.81                         23.90                 809.77                14.52                 12552.2500               299.9713                         6693.06 per sec.    2399770.39          334.65 per sec.
oltp_write_only       10.65                         8.20                  35.96                 4.32                  36552.8750               299.9060                         5848.28 per sec.    2399248.21          974.71 per sec.
select_random_points  3.96                          2.31                  174.16                0.78                  130037.1250              299.8231                         3467.61 per sec.    2398584.53          3467.61 per sec.
select_random_ranges  3.13                          1.95                  29.62                 0.84                  153417.5000              299.7851                         4091.08 per sec.    2398280.45          4091.08 per sec.
```

Benchmark from TiProxy
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#2_tiproxy/
Mon Aug 18 13:12:30 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        18.61                         14.37                 145.59                8.83                  20869.0000               299.9442                         8903.67 per sec.    2399553.59          556.48 per sec.
oltp_read_write       28.16                         22.79                 64.23                 14.54                 13163.2500               299.9658                         7019.79 per sec.    2399726.48          350.99 per sec.
oltp_write_only       10.65                         8.32                  38.05                 4.38                  36065.1250               299.9151                         5770.23 per sec.    2399320.49          961.70 per sec.
select_random_points  3.96                          2.28                  37.92                 0.75                  131615.3750              299.8247                         3509.69 per sec.    2398597.29          3509.69 per sec.
select_random_ranges  3.19                          1.93                  19.37                 0.85                  155384.2500              299.8055                         4143.52 per sec.    2398444.19          4143.52 per sec.
```

- GCP * 1
Cluster Summary
```
[root@l-k8s-labroom-1 ~]# make display
date ; tiup cluster display tidb-demo
Mon Aug 18 13:22:16 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status   Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------   --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
Total nodes: 4
```

Benchmark from TiDB
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#3_tidb
Mon Aug 18 15:14:46 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        22.69                         18.79                 45.81                 12.63                 15965.8750               299.9827                         6811.74 per sec.    2399861.52          425.73 per sec.
oltp_read_write       36.24                         30.66                 68.37                 19.83                 9784.0000                299.9893                         5217.79 per sec.    2399914.43          260.89 per sec.
oltp_write_only       12.98                         9.89                  36.57                 4.51                  30334.5000               299.9666                         4853.39 per sec.    2399732.73          808.90 per sec.
select_random_points  6.21                          3.52                  35.79                 1.04                  85323.7500               299.9262                         2275.27 per sec.    2399409.81          2275.27 per sec.
select_random_ranges  4.74                          3.09                  23.51                 1.20                  97190.8750               299.9211                         2591.72 per sec.    2399368.65          2591.72 per sec.
```

Benchmark from TiProxy
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#3_tiproxy/
Mon Aug 18 15:14:50 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        22.69                         18.72                 50.24                 12.09                 16024.2500               299.9796                         6836.67 per sec.    2399836.84          427.29 per sec.
oltp_read_write       39.65                         32.02                 78.78                 20.42                 9368.6250                299.9907                         4996.25 per sec.    2399925.46          249.81 per sec.
oltp_write_only       13.22                         10.05                 33.14                 4.25                  29833.8750               299.9644                         4773.30 per sec.    2399715.00          795.55 per sec.
select_random_points  6.21                          3.65                  20.51                 1.08                  82276.3750               299.9278                         2194.00 per sec.    2399422.73          2194.00 per sec.
select_random_ranges  5.09                          3.27                  25.38                 1.28                  91782.7500               299.9243                         2447.51 per sec.    2399394.01          2447.51 per sec.
```

- GCP * 3
Cluster Summary
```
Mon Aug 18 15:32:31 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status   Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------   --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|L|UI  /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd       10.160.152.22  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd       10.160.152.23  2379/2380    linux/x86_64  Up       /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb     10.160.152.22  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb     10.160.152.23  4000/10080   linux/x86_64  Up       -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv     10.160.152.22  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.23:20160  tikv     10.160.152.23  20160/20180  linux/x86_64  Up       /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy  10.160.152.22  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy  10.160.152.23  6000/6001    linux/x86_64  Up       -                           /data/tidb-deploy/tiproxy-6000
Total nodes: 12
```

Benchmark from TiDB
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#4_tidb
Mon Aug 18 16:34:11 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        12.52                         10.70                 32.49                 7.95                  28036.1250               299.9655                         11961.66 per sec.   2399724.29          747.60 per sec.
oltp_read_write       25.74                         20.21                 104.08                12.61                 14840.6250               299.9868                         7914.49 per sec.    2399894.37          395.72 per sec.
oltp_write_only       9.73                          7.46                  32.75                 3.58                  40181.7500               299.9558                         6428.93 per sec.    2399646.42          1071.49 per sec.
select_random_points  3.68                          2.06                  20.86                 0.83                  145409.1250              299.8955                         3877.52 per sec.    2399163.64          3877.52 per sec.
select_random_ranges  2.35                          1.58                  18.70                 0.94                  189318.0000              299.8663                         5048.42 per sec.    2398930.45          5048.42 per sec.
```

Benchmark from TiProxy
```
[root@l-monitor-labroom-1 benchmark-tidb]# date ; ./a_genReport.sh sysbench_results_#4_tiproxy/
Mon Aug 18 16:34:15 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        12.98                         11.05                 27.33                 8.05                  27145.3750               299.9631                         11581.67 per sec.   2399704.99          723.85 per sec.
oltp_read_write       23.52                         19.78                 57.86                 13.56                 15162.5000               299.9844                         8086.11 per sec.    2399875.10          404.31 per sec.
oltp_write_only       10.46                         7.76                  58.37                 3.56                  38641.7500               299.9585                         6182.53 per sec.    2399667.76          1030.42 per sec.
select_random_points  3.75                          2.20                  19.88                 0.84                  136338.8750              299.8950                         3635.66 per sec.    2399159.76          3635.66 per sec.
select_random_ranges  2.66                          1.82                  15.72                 0.97                  165113.5000              299.8846                         4402.98 per sec.    2399076.44          4402.98 per sec.
```

- IDC * 1 + GCP * 2
Cluster Summary
```
date ; tiup cluster display tidb-demo
Mon Aug 18 16:42:06 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status  Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------  --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd       10.160.152.22  2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd       172.24.40.17   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb     10.160.152.22  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb     172.24.40.17   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv     10.160.152.22  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv     172.24.40.17   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy  10.160.152.22  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy  172.24.40.17   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
Total nodes: 12
```

Benchmark from TiDB with IDC
```
> date ; ./a_genReport.sh sysbench_results_#5_tidb; \
Mon Aug 18 19:40:46 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        110.66                        79.21                 767.43                14.44                 3787.7500                300.0095                         1615.66 per sec.    2400076.18          100.98 per sec.
oltp_read_write       144.97                        110.92                1160.70               35.65                 2705.1250                300.0431                         1442.20 per sec.    2400344.56          72.11 per sec.
oltp_write_only       51.02                         43.60                 999.49                21.49                 6880.6250                299.9858                         1100.76 per sec.    2399886.47          183.46 per sec.
select_random_points  27.17                         20.23                 209.63                11.61                 14824.1250               299.9606                         395.28 per sec.     2399684.43          395.28 per sec.
select_random_ranges  19.65                         17.48                 260.36                11.82                 17162.2500               299.9497                         457.63 per sec.     2399597.99          457.63 per sec.
```

Benchmark from TiProxy with IDC
```
> date ; ./a_genReport.sh sysbench_results_#5_tiproxy;
Mon Aug 18 19:40:46 CST 2025
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        95.81                         72.06                 733.07                13.81                 4163.5000                300.0154                         1776.05 per sec.    2400123.47          111.00 per sec.
oltp_read_write       127.81                        100.88                367.75                34.79                 2974.2500                300.0318                         1585.66 per sec.    2400254.76          79.28 per sec.
oltp_write_only       45.79                         39.13                 435.80                21.30                 7666.3750                299.9810                         1226.51 per sec.    2399848.35          204.42 per sec.
select_random_points  24.38                         19.02                 248.72                10.89                 15770.0000               299.9604                         420.50 per sec.     2399682.96          420.50 per sec.
select_random_ranges  16.71                         15.67                 86.72                 10.96                 19140.1250               299.9493                         510.38 per sec.     2399594.07          510.38 per sec.
```

Benchmark from TiDB with GCP
```
Mon Aug 18 12:33:27 PM UTC 2025
Combined report has been generated at sysbench_results_#6_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        73.13                         31.97                 899.29                7.35                  9383.5000                300.0188                         4002.66 per sec.    2400150.68          250.17 per sec.
oltp_read_write       94.10                         48.06                 903.77                11.28                 6242.2500                300.0126                         3328.64 per sec.    2400100.62          166.43 per sec.
oltp_write_only       28.16                         16.71                 456.85                3.20                  17953.6250               299.9848                         2872.40 per sec.    2399878.78          478.73 per sec.
select_random_points  7.04                          3.05                  250.39                0.87                  98200.3750               299.9295                         2618.61 per sec.    2399435.99          2618.61 per sec.
select_random_ranges  7.17                          2.90                  182.65                0.99                  103520.7500              299.9272                         2760.48 per sec.    2399418.00          2760.48 per sec.
```

Benchmark from TiProxy with GCP
```
Mon Aug 18 12:33:27 PM UTC 2025
Combined report has been generated at sysbench_results_#6_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        75.82                         32.75                 344.04                7.45                  9162.0000                300.0154                         3908.20 per sec.    2400123.45          244.26 per sec.
oltp_read_write       95.81                         49.70                 962.82                11.35                 6036.5000                300.0060                         3218.61 per sec.    2400047.96          160.93 per sec.
oltp_write_only       26.20                         16.90                 608.40                3.34                  17749.7500               299.9850                         2839.78 per sec.    2399879.84          473.30 per sec.
select_random_points  6.67                          2.54                  33.70                 0.82                  118042.0000              299.9068                         3147.73 per sec.    2399254.37          3147.73 per sec.
select_random_ranges  6.91                          2.46                  33.64                 0.96                  122042.0000              299.9026                         3254.40 per sec.    2399220.88          3254.40 per sec.
```

- IDC * 2 + GCP * 1
Cluster Summary
```
date ; tiup cluster display tidb-demo
Mon Aug 18 20:58:38 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status  Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------  --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd       172.24.40.17   2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd       172.24.40.18   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb     172.24.40.17   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb     172.24.40.18   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv     172.24.40.17   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv     172.24.40.18   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy  172.24.40.17   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy  172.24.40.18   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
Total nodes: 12
```

Benchmark from TiDB with IDC
```
Mon Aug 18 21:53:07 CST 2025
Combined report has been generated at sysbench_results_#7_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        77.19                         36.01                 301.73                8.46                  8330.3750                299.9938                         3553.34 per sec.    2399950.07          222.08 per sec.
oltp_read_write       99.33                         49.97                 523.04                13.36                 6003.3750                300.0048                         3201.14 per sec.    2400038.62          160.06 per sec.
oltp_write_only       28.67                         17.96                 282.62                3.75                  16698.8750               299.9517                         2671.64 per sec.    2399613.91          445.27 per sec.
select_random_points  7.56                          3.04                  50.01                 0.69                  98736.8750               299.8552                         2632.88 per sec.    2398841.55          2632.88 per sec.
select_random_ranges  7.17                          2.65                  224.47                0.80                  113142.1250              299.8308                         3017.05 per sec.    2398646.25          3017.05 per sec.
```

Benchmark from TiProxy with IDC
```
Mon Aug 18 21:53:07 CST 2025
Combined report has been generated at sysbench_results_#7_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        77.19                         35.34                 308.40                7.99                  8489.1250                300.0017                         3621.24 per sec.    2400013.72          226.33 per sec.
oltp_read_write       104.84                        63.34                 344.17                13.60                 4736.7500                300.0216                         2525.62 per sec.    2400172.47          126.28 per sec.
oltp_write_only       28.67                         18.05                 208.78                3.48                  16619.8750               299.9664                         2658.98 per sec.    2399731.56          443.16 per sec.
select_random_points  7.56                          2.93                  41.10                 0.74                  102486.6250              299.8962                         2732.88 per sec.    2399169.73          2732.88 per sec.
select_random_ranges  3.43                          2.03                  20.86                 0.83                  147482.5000              299.8524                         3932.82 per sec.    2398819.53          3932.82 per sec.
```

Benchmark from TiDB with GCP
```
Mon Aug 18 02:50:27 PM UTC 2025
Combined report has been generated at sysbench_results_#8_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        87.56                         59.43                 329.11                12.66                 5048.2500                300.0299                         2153.45 per sec.    2400239.55          134.59 per sec.
oltp_read_write       116.80                        82.55                 324.43                27.39                 3634.7500                300.0393                         1937.93 per sec.    2400314.78          96.90 per sec.
oltp_write_only       41.85                         34.67                 261.08                20.12                 8652.8750                300.0074                         1384.31 per sec.    2400059.00          230.72 per sec.
select_random_points  20.37                         15.75                 277.08                10.69                 19048.1250               299.9873                         507.92 per sec.     2399898.61          507.92 per sec.
select_random_ranges  15.83                         15.23                 257.37                10.85                 19696.6250               299.9838                         525.22 per sec.     2399870.37          525.22 per sec.
```

Benchmark from TiProxy with GCP
```
Mon Aug 18 02:50:27 PM UTC 2025
Combined report has been generated at sysbench_results_#8_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        92.42                         66.89                 311.65                12.78                 4485.0000                300.0240                         1913.12 per sec.    2400192.25          119.57 per sec.
oltp_read_write       118.92                        86.62                 344.70                27.10                 3463.8750                300.0316                         1846.78 per sec.    2400253.18          92.34 per sec.
oltp_write_only       42.61                         36.49                 264.45                19.69                 8222.6250                300.0059                         1315.47 per sec.    2400046.81          219.25 per sec.
select_random_points  22.28                         16.76                 247.52                5.70                  17894.1250               299.9896                         477.15 per sec.     2399916.85          477.15 per sec.
select_random_ranges  15.83                         13.60                 172.93                6.21                  22050.7500               299.9865                         587.99 per sec.     2399891.79          587.99 per sec.
```

- IDC * 3 + GCP * 2
Cluster Summary
```
date ; tiup cluster display tidb-demo
Mon Aug 18 22:57:25 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status  Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------  --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd       10.160.152.22  2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd       172.24.40.17   2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd       172.24.40.18   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.19:2379    pd       172.24.40.19   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb     10.160.152.22  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb     172.24.40.17   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb     172.24.40.18   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.19:4000    tidb     172.24.40.19   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv     10.160.152.22  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv     172.24.40.17   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv     172.24.40.18   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.19:20160   tikv     172.24.40.19   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy  10.160.152.22  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy  172.24.40.17   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy  172.24.40.18   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.19:6000    tiproxy  172.24.40.19   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
Total nodes: 20
```

Benchmark from TiDB with IDC
```
Mon Aug 18 23:53:17 CST 2025
Combined report has been generated at sysbench_results_#9_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        81.48                         42.33                 339.54                8.20                  7087.5000                299.9884                         3023.65 per sec.    2399907.39          188.98 per sec.
oltp_read_write       102.97                        59.35                 1634.82               13.65                 5054.8750                300.0101                         2695.12 per sec.    2400081.01          134.76 per sec.
oltp_write_only       30.26                         19.48                 1514.28               3.78                  15395.7500               299.9603                         2463.12 per sec.    2399682.05          410.52 per sec.
select_random_points  4.10                          2.34                  37.36                 0.69                  127895.6250              299.8582                         3410.50 per sec.    2398865.82          3410.50 per sec.
select_random_ranges  3.19                          1.92                  213.57                0.78                  155987.2500              299.8547                         4159.55 per sec.    2398837.58          4159.55 per sec.
```

Benchmark from TiProxy with IDC
```
Mon Aug 18 23:53:17 CST 2025
Combined report has been generated at sysbench_results_#9_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        80.03                         40.94                 954.14                8.05                  7327.7500                300.0048                         3125.97 per sec.    2400038.60          195.37 per sec.
oltp_read_write       97.55                         54.85                 1774.47               12.76                 5470.2500                300.0169                         2916.89 per sec.    2400135.52          145.84 per sec.
oltp_write_only       28.16                         17.71                 855.00                3.52                  16942.0000               299.9702                         2710.62 per sec.    2399761.79          451.77 per sec.
select_random_points  7.43                          2.42                  846.92                0.65                  124136.8750              299.8752                         3310.21 per sec.    2399001.68          3310.21 per sec.
select_random_ranges  6.91                          2.27                  424.84                0.72                  132256.2500              299.8712                         3526.76 per sec.    2398969.37          3526.76 per sec.
```

Benchmark from TiDB with GCP
```
Mon Aug 18 04:44:33 PM UTC 2025
Combined report has been generated at sysbench_results_#10_tidb/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        94.10                         62.62                 1367.82               12.54                 4790.8750                300.0257                         2043.69 per sec.    2400205.40          127.73 per sec.
oltp_read_write       127.81                        96.45                 1028.48               23.08                 3110.8750                300.0417                         1658.69 per sec.    2400333.97          82.93 per sec.
oltp_write_only       43.39                         34.70                 727.86                13.83                 8645.3750                300.0073                         1383.11 per sec.    2400058.52          230.52 per sec.
select_random_points  16.12                         12.36                 6524.75               5.70                  24275.2500               299.9827                         647.30 per sec.     2399861.98          647.30 per sec.
select_random_ranges  16.12                         12.11                 306.81                6.23                  24765.7500               299.9850                         660.38 per sec.     2399880.38          660.38 per sec.
```

Benchmark from TiProxy with GCP
```
Mon Aug 18 04:44:33 PM UTC 2025
Combined report has been generated at sysbench_results_#10_tiproxy/combined_report.txt
OLTP Type             95th percentile latency (ms)  Average latency (ms)  Maximum latency (ms)  Minimum latency (ms)  Events per thread (avg)  Execution time per thread (avg)  Queries per second  Total latency (ms)  Transactions per second
oltp_read_only        101.13                        66.45                 392.88                12.90                 4514.8750                300.0224                         1926.05 per sec.    2400179.48          120.38 per sec.
oltp_read_write       132.49                        97.70                 1200.59               22.62                 3071.0000                300.0367                         1637.45 per sec.    2400293.96          81.87 per sec.
oltp_write_only       48.34                         39.11                 1987.66               14.15                 7670.7500                300.0089                         1227.15 per sec.    2400071.09          204.53 per sec.
select_random_points  24.38                         19.30                 3350.92               10.92                 15547.3750               299.9966                         414.57 per sec.     2399972.99          414.57 per sec.
select_random_ranges  16.41                         15.73                 256.74                11.18                 19071.1250               299.9910                         508.53 per sec.     2399928.35          508.53 per sec.
```

- IDC * 2 + GCP * 3
Cluster Summary
```
Tue Aug 19 08:51:43 CST 2025
Cluster type:       tidb
Cluster name:       tidb-demo
Cluster version:    v8.5.2
Deploy user:        root
SSH type:           builtin
Dashboard URL:      http://10.160.152.21:2379/dashboard
Dashboard URLs:     http://10.160.152.21:2379/dashboard
ID                   Role     Host           Ports        OS/Arch       Status  Data Dir                    Deploy Dir
--                   ----     ----           -----        -------       ------  --------                    ----------
10.160.152.21:2379   pd       10.160.152.21  2379/2380    linux/x86_64  Up|UI   /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.22:2379   pd       10.160.152.22  2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.23:2379   pd       10.160.152.23  2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.17:2379    pd       172.24.40.17   2379/2380    linux/x86_64  Up|L    /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
172.24.40.18:2379    pd       172.24.40.18   2379/2380    linux/x86_64  Up      /data/tidb-data/pd-2379     /data/tidb-deploy/pd-2379
10.160.152.21:4000   tidb     10.160.152.21  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.22:4000   tidb     10.160.152.22  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.23:4000   tidb     10.160.152.23  4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.17:4000    tidb     172.24.40.17   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
172.24.40.18:4000    tidb     172.24.40.18   4000/10080   linux/x86_64  Up      -                           /data/tidb-deploy/tidb-4000
10.160.152.21:20160  tikv     10.160.152.21  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.22:20160  tikv     10.160.152.22  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.23:20160  tikv     10.160.152.23  20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.17:20160   tikv     172.24.40.17   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
172.24.40.18:20160   tikv     172.24.40.18   20160/20180  linux/x86_64  Up      /data/tidb-data/tikv-20160  /data/tidb-deploy/tikv-20160
10.160.152.21:6000   tiproxy  10.160.152.21  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
10.160.152.22:6000   tiproxy  10.160.152.22  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
10.160.152.23:6000   tiproxy  10.160.152.23  6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.17:6000    tiproxy  172.24.40.17   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
172.24.40.18:6000    tiproxy  172.24.40.18   6000/6001    linux/x86_64  Up      -                           /data/tidb-deploy/tiproxy-6000
Total nodes: 20
```

Benchmark from TiDB with IDC
```
```

Benchmark from TiProxy with IDC
```
```

Benchmark from TiDB with GCP
```
```

Benchmark from TiProxy with GCP
```
```

- IDC * 2 + GCP * 3 (兩機房同時執行 Sysbench 測試)
Cluster Summary
```
```

Benchmark from TiDB with IDC
```
```

Benchmark from TiProxy with IDC
```
```

Benchmark from TiDB with GCP
```
```

Benchmark from TiProxy with GCP
```
```

---

## TPC-C benchmark
> 使用 Percona-Lab/tpcc-mysql ; 不使用 TiUP Bench ; 根據 TiDB 優化過?

### 只參照 sysbench 的問題
- sysbench交易太單純 → 產能被高估
- 均勻存取 → 掩蓋熱點與鎖衝突
- 忽略日誌/複寫 → 產品上線問題逐漸浮現

### 為什麼需要 TPC-C
- 交易真實性：涵蓋五種交易類型，比例固定，能模擬 ERP / 訂單系統的實際行為。
- 複雜關聯：多表 JOIN、二級索引、外鍵依賴，能觸發行鎖、間隙鎖與死鎖情境。
- 查詢計畫穩定性：選擇性變化與複合索引，能反映統計異動導致的計畫抖動。
- HA/複寫檢驗：能觀察叢集提交延遲，驗證同步/半同步複寫下的 SLA。
- 資料寫入壓力：TPC-C 有大量新增/更新，能真實測試系統「寫入資料」的穩定性與延遲，而不是只看讀取速度。
- 併發擴展性：倉庫數量能調整，模擬使用者數成長時，觀察系統是否能隨規模放大而維持效能。
- 與 sysbench 互補：sysbench 適合微調，TPC-C 則提供端到端 SLA 與產能 (tpmC) 評估。

### [TPC-C benchmark 需要關注哪些指標](https://blog.csdn.net/justlpf/article/details/127516283)
- tpmC/TPS：越高代表系統能處理的交易產能越強。
- 延遲 (P95、P99)：顯示交易響應時間分佈，評估 SLA 是否能在實務場景達成。
- System Load 指標：判斷效能瓶頸主要在計算、記憶體，或磁碟 I/O。

